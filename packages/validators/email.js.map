{"version":3,"file":"email.js","names":["_isEmail","_interopRequireDefault","require","_params","_errors","_listify","_default","config","params","cleanParams","optional","validate","Object","assign","value","clean","_trim","default","call","indexOf","isEmail","errors","split","length","type","field","list","listify","exports","module"],"sources":["src/email.js"],"sourcesContent":["import isEmail from 'validator/lib/isEmail';\n\nimport cleanParams from './lib/params';\nimport errors from './lib/errors';\n\nimport listify from './listify';\n\nexport default config => {\n  const params = cleanParams('email', config, {\n    optional: true\n  });\n\n  const validate = Object.assign(value => {\n    const clean = typeof value === 'string' ? value.trim() : '';\n\n    if (!value && params.optional) {\n      return null;\n    }\n\n    if (clean.indexOf(' ') !== -1 || !isEmail(clean)) {\n      throw errors(params, value, 'email.invalid', 'email is not valid');\n    }\n\n    if (clean.split('@').length > 2) {\n      throw errors(params, value, 'email.invalid', 'email is not valid');\n    }\n\n    return clean;\n  }, {\n    type: 'email',\n    field: params.field\n  });\n\n  return params.list ? listify(validate, params) : validate;\n};\n"],"mappings":";;;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AAEA,IAAAG,QAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAAgC,IAAAI,QAAA,GAEjBC,MAAM,IAAI;EACvB,MAAMC,MAAM,GAAG,IAAAC,eAAW,EAAC,OAAO,EAAEF,MAAM,EAAE;IAC1CG,QAAQ,EAAE;EACZ,CAAC,CAAC;EAEF,MAAMC,QAAQ,GAAGC,MAAM,CAACC,MAAM,CAACC,KAAK,IAAI;IACtC,MAAMC,KAAK,GAAG,OAAOD,KAAK,KAAK,QAAQ,GAAG,IAAAE,KAAA,CAAAC,OAAA,EAAAH,KAAK,EAAAI,IAAA,CAALJ,KAAW,CAAC,GAAG,EAAE;IAE3D,IAAI,CAACA,KAAK,IAAIN,MAAM,CAACE,QAAQ,EAAE;MAC7B,OAAO,IAAI;IACb;IAEA,IAAIK,KAAK,CAACI,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAAC,gBAAO,EAACL,KAAK,CAAC,EAAE;MAChD,MAAM,IAAAM,eAAM,EAACb,MAAM,EAAEM,KAAK,EAAE,eAAe,EAAE,oBAAoB,CAAC;IACpE;IAEA,IAAIC,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAACC,MAAM,GAAG,CAAC,EAAE;MAC/B,MAAM,IAAAF,eAAM,EAACb,MAAM,EAAEM,KAAK,EAAE,eAAe,EAAE,oBAAoB,CAAC;IACpE;IAEA,OAAOC,KAAK;EACd,CAAC,EAAE;IACDS,IAAI,EAAE,OAAO;IACbC,KAAK,EAAEjB,MAAM,CAACiB;EAChB,CAAC,CAAC;EAEF,OAAOjB,MAAM,CAACkB,IAAI,GAAG,IAAAC,gBAAO,EAAChB,QAAQ,EAAEH,MAAM,CAAC,GAAGG,QAAQ;AAC3D,CAAC;AAAAiB,OAAA,CAAAX,OAAA,GAAAX,QAAA;AAAAuB,MAAA,CAAAD,OAAA,GAAAA,OAAA,CAAAX,OAAA","ignoreList":[]}