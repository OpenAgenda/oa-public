{"version":3,"file":"stream.js","names":["_isStream","_interopRequireDefault","require","_errors","isFile","value","isStream","path","_default","config","params","_objectSpread2","default","field","undefined","list","type","optional","Object","assign","errors","allowNull","allowObject","exports","module"],"sources":["src/stream.js"],"sourcesContent":["import isStream from 'is-stream';\nimport errors from './lib/errors';\n\nfunction isFile(value) {\n  return isStream(value) || (value && value.path);\n}\n\nexport default config => {\n  const params = {\n    field: undefined,\n    list: false,\n    type: 'stream',\n    optional: true,\n    ...config\n  };\n\n  return Object.assign(value => {\n    if (value === undefined && !params.optional) {\n      throw errors(params, value, 'required', 'a stream is required');\n    }\n\n    if (value === undefined) {\n      return params.default;\n    }\n\n    if (params.allowNull && value === null) {\n      return null;\n    }\n\n    if (params.allowObject && value instanceof Object) {\n      return value;\n    }\n\n    if (isFile(value)) {\n      return value;\n    }\n\n    throw errors(params, value, 'invalid', 'value is not a stream');\n  }, {\n    type: 'stream',\n    field: params.field\n  });\n};\n\n"],"mappings":";;;;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEA,SAASE,MAAMA,CAACC,KAAK,EAAE;EACrB,OAAO,IAAAC,iBAAQ,EAACD,KAAK,CAAC,IAAKA,KAAK,IAAIA,KAAK,CAACE,IAAK;AACjD;AAAC,IAAAC,QAAA,GAEcC,MAAM,IAAI;EACvB,MAAMC,MAAM,OAAAC,cAAA,CAAAC,OAAA;IACVC,KAAK,EAAEC,SAAS;IAChBC,IAAI,EAAE,KAAK;IACXC,IAAI,EAAE,QAAQ;IACdC,QAAQ,EAAE;EAAI,GACXR,MAAM,CACV;EAED,OAAOS,MAAM,CAACC,MAAM,CAACd,KAAK,IAAI;IAC5B,IAAIA,KAAK,KAAKS,SAAS,IAAI,CAACJ,MAAM,CAACO,QAAQ,EAAE;MAC3C,MAAM,IAAAG,eAAM,EAACV,MAAM,EAAEL,KAAK,EAAE,UAAU,EAAE,sBAAsB,CAAC;IACjE;IAEA,IAAIA,KAAK,KAAKS,SAAS,EAAE;MACvB,OAAOJ,MAAM,CAACE,OAAO;IACvB;IAEA,IAAIF,MAAM,CAACW,SAAS,IAAIhB,KAAK,KAAK,IAAI,EAAE;MACtC,OAAO,IAAI;IACb;IAEA,IAAIK,MAAM,CAACY,WAAW,IAAIjB,KAAK,YAAYa,MAAM,EAAE;MACjD,OAAOb,KAAK;IACd;IAEA,IAAID,MAAM,CAACC,KAAK,CAAC,EAAE;MACjB,OAAOA,KAAK;IACd;IAEA,MAAM,IAAAe,eAAM,EAACV,MAAM,EAAEL,KAAK,EAAE,SAAS,EAAE,uBAAuB,CAAC;EACjE,CAAC,EAAE;IACDW,IAAI,EAAE,QAAQ;IACdH,KAAK,EAAEH,MAAM,CAACG;EAChB,CAAC,CAAC;AACJ,CAAC;AAAAU,OAAA,CAAAX,OAAA,GAAAJ,QAAA;AAAAgB,MAAA,CAAAD,OAAA,GAAAA,OAAA,CAAAX,OAAA","ignoreList":[]}