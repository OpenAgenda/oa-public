{"version":3,"file":"clean.js","names":["_isLeaf","node","is","type","Object","keys","filter","k","length","_isNormalized","schema","fields","clean","_objectSpread2","default","cleanSchema","list","schemaFields","assign","forEach","branchKey","module","exports"],"sources":["../src/schema/clean.js"],"sourcesContent":["function _isLeaf(node) {\n  let is = false;\n\n  if (node && node.type && typeof node.type !== 'object' && node.type !== 'schema') {\n    is = true;\n  } else {\n    is = !Object.keys(node || {}).filter(k => (\n      (typeof node[k] === 'object' && node[k] !== null)\n    )).length;\n  }\n  return is;\n}\n\nfunction _isNormalized(schema) {\n  if (schema.fields) return true;\n\n  return false;\n}\n\nexport default function clean(schema) {\n  if (_isLeaf(schema)) {\n    return { ...schema };\n  }\n\n  const cleanSchema = {\n    fields: {},\n    list: false,\n    type: 'schema'\n  };\n\n  let schemaFields;\n\n  if (_isNormalized(schema)) {\n    Object.assign(cleanSchema, schema);\n\n    schemaFields = schema.fields;\n  } else {\n    schemaFields = schema;\n  }\n\n  Object.keys(schemaFields).forEach(branchKey => {\n    cleanSchema.fields[branchKey] = clean(schemaFields[branchKey]);\n  });\n\n  return cleanSchema;\n}\n"],"mappings":";;;;;;;;AAAA,SAASA,OAAOA,CAACC,IAAI,EAAE;EACrB,IAAIC,EAAE,GAAG,KAAK;EAEd,IAAID,IAAI,IAAIA,IAAI,CAACE,IAAI,IAAI,OAAOF,IAAI,CAACE,IAAI,KAAK,QAAQ,IAAIF,IAAI,CAACE,IAAI,KAAK,QAAQ,EAAE;IAChFD,EAAE,GAAG,IAAI;EACX,CAAC,MAAM;IACLA,EAAE,GAAG,CAACE,MAAM,CAACC,IAAI,CAACJ,IAAI,IAAI,CAAC,CAAC,CAAC,CAACK,MAAM,CAACC,CAAC,IACnC,OAAON,IAAI,CAACM,CAAC,CAAC,KAAK,QAAQ,IAAIN,IAAI,CAACM,CAAC,CAAC,KAAK,IAC7C,CAAC,CAACC,MAAM;EACX;EACA,OAAON,EAAE;AACX;AAEA,SAASO,aAAaA,CAACC,MAAM,EAAE;EAC7B,IAAIA,MAAM,CAACC,MAAM,EAAE,OAAO,IAAI;EAE9B,OAAO,KAAK;AACd;AAEe,SAASC,KAAKA,CAACF,MAAM,EAAE;EACpC,IAAIV,OAAO,CAACU,MAAM,CAAC,EAAE;IACnB,WAAAG,cAAA,CAAAC,OAAA,MAAYJ,MAAM;EACpB;EAEA,MAAMK,WAAW,GAAG;IAClBJ,MAAM,EAAE,CAAC,CAAC;IACVK,IAAI,EAAE,KAAK;IACXb,IAAI,EAAE;EACR,CAAC;EAED,IAAIc,YAAY;EAEhB,IAAIR,aAAa,CAACC,MAAM,CAAC,EAAE;IACzBN,MAAM,CAACc,MAAM,CAACH,WAAW,EAAEL,MAAM,CAAC;IAElCO,YAAY,GAAGP,MAAM,CAACC,MAAM;EAC9B,CAAC,MAAM;IACLM,YAAY,GAAGP,MAAM;EACvB;EAEAN,MAAM,CAACC,IAAI,CAACY,YAAY,CAAC,CAACE,OAAO,CAACC,SAAS,IAAI;IAC7CL,WAAW,CAACJ,MAAM,CAACS,SAAS,CAAC,GAAGR,KAAK,CAACK,YAAY,CAACG,SAAS,CAAC,CAAC;EAChE,CAAC,CAAC;EAEF,OAAOL,WAAW;AACpB;AAACM,MAAA,CAAAC,OAAA,GAAAA,OAAA,CAAAR,OAAA","ignoreList":[]}