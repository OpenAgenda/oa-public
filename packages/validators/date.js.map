{"version":3,"file":"date.js","names":["_params","_interopRequireDefault","require","_errors","_default","config","params","cleanParams","field","min","undefined","max","default","optional","Object","assign","value","_context","clean","isUndefinedOrNull","_includes","call","Date","getTime","errors","toString","values","type","exports","module"],"sources":["src/date.js"],"sourcesContent":["import cleanParams from './lib/params';\nimport errors from './lib/errors';\n\nexport default config => {\n  const params = cleanParams('date', config, {\n    field: false,\n    min: undefined,\n    max: undefined,\n    default: undefined,\n    optional: true\n  });\n\n  return Object.assign(value => {\n    let clean;\n    const isUndefinedOrNull = [undefined, null].includes(value);\n\n    if (isUndefinedOrNull && params.default === 'now') {\n      return new Date();\n    }\n\n    if (isUndefinedOrNull && params.default === null) {\n      return null;\n    }\n\n    if (isUndefinedOrNull && params.default instanceof Date) {\n      return new Date(params.default.getTime());\n    }\n\n    if (isUndefinedOrNull && !params.optional) {\n      throw errors(params, value, 'date.required', 'a date is required');\n    }\n\n    if (isUndefinedOrNull) {\n      return value;\n    }\n\n    if (typeof value === 'string') {\n      clean = new Date(value);\n\n      if (clean.toString() === 'Invalid Date') {\n        throw errors(params, value, 'date.invalid', 'not a date');\n      }\n    } else if (value instanceof Date) {\n      clean = new Date(value.getTime());\n    } else {\n      throw errors(params, value, 'date.invalid', 'not a date');\n    }\n\n    if (params.min && clean < params.min) {\n      throw errors(params, value, 'date.toosmall', 'date is too small', {\n        values: {\n          min: params.min\n        }\n      });\n    }\n\n    if (params.max && clean > params.max) {\n      throw errors(params, value, 'date.toobig', 'date is too big', {\n        values: {\n          max: params.max\n        }\n      });\n    }\n\n    return clean;\n  }, {\n    type: 'date',\n    field: params.field\n  });\n};\n"],"mappings":";;;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAkC,IAAAE,QAAA,GAEnBC,MAAM,IAAI;EACvB,MAAMC,MAAM,GAAG,IAAAC,eAAW,EAAC,MAAM,EAAEF,MAAM,EAAE;IACzCG,KAAK,EAAE,KAAK;IACZC,GAAG,EAAEC,SAAS;IACdC,GAAG,EAAED,SAAS;IACdE,OAAO,EAAEF,SAAS;IAClBG,QAAQ,EAAE;EACZ,CAAC,CAAC;EAEF,OAAOC,MAAM,CAACC,MAAM,CAACC,KAAK,IAAI;IAAA,IAAAC,QAAA;IAC5B,IAAIC,KAAK;IACT,MAAMC,iBAAiB,GAAG,IAAAC,SAAA,CAAAR,OAAA,EAAAK,QAAA,IAACP,SAAS,EAAE,IAAI,CAAC,EAAAW,IAAA,CAAAJ,QAAA,EAAUD,KAAK,CAAC;IAE3D,IAAIG,iBAAiB,IAAIb,MAAM,CAACM,OAAO,KAAK,KAAK,EAAE;MACjD,OAAO,IAAIU,IAAI,CAAC,CAAC;IACnB;IAEA,IAAIH,iBAAiB,IAAIb,MAAM,CAACM,OAAO,KAAK,IAAI,EAAE;MAChD,OAAO,IAAI;IACb;IAEA,IAAIO,iBAAiB,IAAIb,MAAM,CAACM,OAAO,YAAYU,IAAI,EAAE;MACvD,OAAO,IAAIA,IAAI,CAAChB,MAAM,CAACM,OAAO,CAACW,OAAO,CAAC,CAAC,CAAC;IAC3C;IAEA,IAAIJ,iBAAiB,IAAI,CAACb,MAAM,CAACO,QAAQ,EAAE;MACzC,MAAM,IAAAW,eAAM,EAAClB,MAAM,EAAEU,KAAK,EAAE,eAAe,EAAE,oBAAoB,CAAC;IACpE;IAEA,IAAIG,iBAAiB,EAAE;MACrB,OAAOH,KAAK;IACd;IAEA,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;MAC7BE,KAAK,GAAG,IAAII,IAAI,CAACN,KAAK,CAAC;MAEvB,IAAIE,KAAK,CAACO,QAAQ,CAAC,CAAC,KAAK,cAAc,EAAE;QACvC,MAAM,IAAAD,eAAM,EAAClB,MAAM,EAAEU,KAAK,EAAE,cAAc,EAAE,YAAY,CAAC;MAC3D;IACF,CAAC,MAAM,IAAIA,KAAK,YAAYM,IAAI,EAAE;MAChCJ,KAAK,GAAG,IAAII,IAAI,CAACN,KAAK,CAACO,OAAO,CAAC,CAAC,CAAC;IACnC,CAAC,MAAM;MACL,MAAM,IAAAC,eAAM,EAAClB,MAAM,EAAEU,KAAK,EAAE,cAAc,EAAE,YAAY,CAAC;IAC3D;IAEA,IAAIV,MAAM,CAACG,GAAG,IAAIS,KAAK,GAAGZ,MAAM,CAACG,GAAG,EAAE;MACpC,MAAM,IAAAe,eAAM,EAAClB,MAAM,EAAEU,KAAK,EAAE,eAAe,EAAE,mBAAmB,EAAE;QAChEU,MAAM,EAAE;UACNjB,GAAG,EAAEH,MAAM,CAACG;QACd;MACF,CAAC,CAAC;IACJ;IAEA,IAAIH,MAAM,CAACK,GAAG,IAAIO,KAAK,GAAGZ,MAAM,CAACK,GAAG,EAAE;MACpC,MAAM,IAAAa,eAAM,EAAClB,MAAM,EAAEU,KAAK,EAAE,aAAa,EAAE,iBAAiB,EAAE;QAC5DU,MAAM,EAAE;UACNf,GAAG,EAAEL,MAAM,CAACK;QACd;MACF,CAAC,CAAC;IACJ;IAEA,OAAOO,KAAK;EACd,CAAC,EAAE;IACDS,IAAI,EAAE,MAAM;IACZnB,KAAK,EAAEF,MAAM,CAACE;EAChB,CAAC,CAAC;AACJ,CAAC;AAAAoB,OAAA,CAAAhB,OAAA,GAAAR,QAAA;AAAAyB,MAAA,CAAAD,OAAA,GAAAA,OAAA,CAAAhB,OAAA","ignoreList":[]}