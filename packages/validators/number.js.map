{"version":3,"file":"number.js","names":["_errors","_interopRequireDefault","require","_params","_listify","_default","config","params","cleanParams","min","max","validate","value","_context","clean","length","parseFloat","undefined","optional","_includes","default","call","errors","Number","isNaN","values","type","field","list","listify","exports","module"],"sources":["src/number.js"],"sourcesContent":["import errors from './lib/errors';\nimport cleanParams from './lib/params';\n\nimport listify from './listify';\n\nexport default config => {\n  const params = cleanParams('number', config, {\n    min: null,\n    max: null,\n  });\n\n  const validate = value => {\n    let clean;\n\n    if (typeof value === 'string' && value.length) {\n      clean = parseFloat(value, 10);\n    } else if (typeof value === 'number') {\n      clean = value;\n    }\n\n    if (clean === undefined && !params.optional && [undefined, null].includes(params.default)) {\n      throw errors(params, value, 'required', 'a number is required');\n    } else if (clean === undefined && (params.default !== undefined)) {\n      return params.default;\n    } else if (clean === undefined && params.optional) {\n      return;\n    }\n\n    if (Number.isNaN(clean)) {\n      throw errors(params, value, 'number.invalid', 'not a number');\n    }\n\n    if (params.min !== null && clean < params.min) {\n      throw errors(params, value, 'number.toosmall', 'the number is too small', {\n        values: {\n          min: params.min\n        }\n      });\n    }\n\n    if (params.max !== null && clean > params.max) {\n      throw errors(params, value, 'number.toobig', 'the number is too big', {\n        values: {\n          max: params.max\n        }\n      });\n    }\n\n    return clean;\n  };\n\n  validate.type = 'number';\n  validate.field = params.field;\n\n  return params.list ? listify(validate, params) : validate;\n};\n"],"mappings":";;;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEA,IAAAE,QAAA,GAAAH,sBAAA,CAAAC,OAAA;AAAgC,IAAAG,QAAA,GAEjBC,MAAM,IAAI;EACvB,MAAMC,MAAM,GAAG,IAAAC,eAAW,EAAC,QAAQ,EAAEF,MAAM,EAAE;IAC3CG,GAAG,EAAE,IAAI;IACTC,GAAG,EAAE;EACP,CAAC,CAAC;EAEF,MAAMC,QAAQ,GAAGC,KAAK,IAAI;IAAA,IAAAC,QAAA;IACxB,IAAIC,KAAK;IAET,IAAI,OAAOF,KAAK,KAAK,QAAQ,IAAIA,KAAK,CAACG,MAAM,EAAE;MAC7CD,KAAK,GAAGE,UAAU,CAACJ,KAAK,EAAE,EAAE,CAAC;IAC/B,CAAC,MAAM,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;MACpCE,KAAK,GAAGF,KAAK;IACf;IAEA,IAAIE,KAAK,KAAKG,SAAS,IAAI,CAACV,MAAM,CAACW,QAAQ,IAAI,IAAAC,SAAA,CAAAC,OAAA,EAAAP,QAAA,IAACI,SAAS,EAAE,IAAI,CAAC,EAAAI,IAAA,CAAAR,QAAA,EAAUN,MAAM,CAACa,OAAO,CAAC,EAAE;MACzF,MAAM,IAAAE,eAAM,EAACf,MAAM,EAAEK,KAAK,EAAE,UAAU,EAAE,sBAAsB,CAAC;IACjE,CAAC,MAAM,IAAIE,KAAK,KAAKG,SAAS,IAAKV,MAAM,CAACa,OAAO,KAAKH,SAAU,EAAE;MAChE,OAAOV,MAAM,CAACa,OAAO;IACvB,CAAC,MAAM,IAAIN,KAAK,KAAKG,SAAS,IAAIV,MAAM,CAACW,QAAQ,EAAE;MACjD;IACF;IAEA,IAAIK,MAAM,CAACC,KAAK,CAACV,KAAK,CAAC,EAAE;MACvB,MAAM,IAAAQ,eAAM,EAACf,MAAM,EAAEK,KAAK,EAAE,gBAAgB,EAAE,cAAc,CAAC;IAC/D;IAEA,IAAIL,MAAM,CAACE,GAAG,KAAK,IAAI,IAAIK,KAAK,GAAGP,MAAM,CAACE,GAAG,EAAE;MAC7C,MAAM,IAAAa,eAAM,EAACf,MAAM,EAAEK,KAAK,EAAE,iBAAiB,EAAE,yBAAyB,EAAE;QACxEa,MAAM,EAAE;UACNhB,GAAG,EAAEF,MAAM,CAACE;QACd;MACF,CAAC,CAAC;IACJ;IAEA,IAAIF,MAAM,CAACG,GAAG,KAAK,IAAI,IAAII,KAAK,GAAGP,MAAM,CAACG,GAAG,EAAE;MAC7C,MAAM,IAAAY,eAAM,EAACf,MAAM,EAAEK,KAAK,EAAE,eAAe,EAAE,uBAAuB,EAAE;QACpEa,MAAM,EAAE;UACNf,GAAG,EAAEH,MAAM,CAACG;QACd;MACF,CAAC,CAAC;IACJ;IAEA,OAAOI,KAAK;EACd,CAAC;EAEDH,QAAQ,CAACe,IAAI,GAAG,QAAQ;EACxBf,QAAQ,CAACgB,KAAK,GAAGpB,MAAM,CAACoB,KAAK;EAE7B,OAAOpB,MAAM,CAACqB,IAAI,GAAG,IAAAC,gBAAO,EAAClB,QAAQ,EAAEJ,MAAM,CAAC,GAAGI,QAAQ;AAC3D,CAAC;AAAAmB,OAAA,CAAAV,OAAA,GAAAf,QAAA;AAAA0B,MAAA,CAAAD,OAAA,GAAAA,OAAA,CAAAV,OAAA","ignoreList":[]}