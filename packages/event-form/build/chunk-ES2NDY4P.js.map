{"version":3,"sources":["../src/utils/extractLanguages.js"],"sourcesContent":["export default function extractLanguages(\n  formSchema = null,\n  values = null,\n  options = {},\n) {\n  const { defaultLanguage = 'en' } = options;\n\n  const fields = formSchema ? formSchema.fields : null;\n\n  const languagesField = (fields ?? []).find((f) => f.field === 'languages');\n\n  const multilingualFields = fields\n    ? fields.filter((f) => !!f.languages).map((f) => f.field)\n    : ['title', 'description', 'longDescription', 'keywords', 'conditions'];\n\n  const languages = multilingualFields.reduce((carry, fieldName) => {\n    const fieldValue = values?.[fieldName];\n\n    if (\n      !fieldValue\n      || !(fieldValue instanceof Object)\n      || Array.isArray(fieldValue)\n    ) {\n      return carry;\n    }\n\n    return carry.concat(\n      Object.keys(fieldValue).filter((l) => !carry.includes(l)),\n    );\n  }, languagesField?.required ?? []);\n\n  if (languages.length) {\n    return languages;\n  }\n\n  if (languagesField?.default) {\n    return [].concat(languagesField.default);\n  }\n\n  return [defaultLanguage];\n}\n"],"mappings":";AAAe,SAAR,iBACL,aAAa,MACb,SAAS,MACT,UAAU,CAAC,GACX;AACA,QAAM,EAAE,kBAAkB,KAAK,IAAI;AAEnC,QAAM,SAAS,aAAa,WAAW,SAAS;AAEhD,QAAM,kBAAkB,UAAU,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,UAAU,WAAW;AAEzE,QAAM,qBAAqB,SACvB,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,IACtD,CAAC,SAAS,eAAe,mBAAmB,YAAY,YAAY;AAExE,QAAM,YAAY,mBAAmB,OAAO,CAAC,OAAO,cAAc;AAChE,UAAM,aAAa,iCAAS;AAE5B,QACE,CAAC,cACE,EAAE,sBAAsB,WACxB,MAAM,QAAQ,UAAU,GAC3B;AACA,aAAO;AAAA,IACT;AAEA,WAAO,MAAM;AAAA,MACX,OAAO,KAAK,UAAU,EAAE,OAAO,CAAC,MAAM,CAAC,MAAM,SAAS,CAAC,CAAC;AAAA,IAC1D;AAAA,EACF,IAAG,iDAAgB,aAAY,CAAC,CAAC;AAEjC,MAAI,UAAU,QAAQ;AACpB,WAAO;AAAA,EACT;AAEA,MAAI,iDAAgB,SAAS;AAC3B,WAAO,CAAC,EAAE,OAAO,eAAe,OAAO;AAAA,EACzC;AAEA,SAAO,CAAC,eAAe;AACzB;","names":[]}