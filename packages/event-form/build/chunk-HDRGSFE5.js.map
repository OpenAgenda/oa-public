{"version":3,"sources":["../src/components/Accessibility.js"],"sourcesContent":["import _ from 'lodash';\nimport { Component } from 'react';\n\nimport mLabels from '@openagenda/labels/event/accessibility.js';\nimport flatten from '@openagenda/labels/flatten.js';\n\nconst TYPES = ['hi', 'vi', 'pi', 'mi', 'ii'];\n\nconst getDefault = () =>\n  TYPES.reduce(\n    (c, t) => ({\n      ...c,\n      [t]: false,\n    }),\n    {},\n  );\n\nexport default class AccessibilityComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      enabled: this.hasAccessibility(),\n    };\n  }\n\n  hasAccessibility() {\n    const { value: currentValue } = this.props;\n    const value = currentValue ?? getDefault();\n\n    return !!_.keys(value).filter((k) => value[k]).length;\n  }\n\n  toggleEnabled() {\n    const { onChange } = this.props;\n\n    const { enabled } = this.state;\n\n    const toggled = !enabled;\n\n    this.setState({\n      enabled: toggled,\n    });\n\n    if (!toggled && this.hasAccessibility()) {\n      onChange(getDefault());\n    }\n  }\n\n  toggleAccessibility(type) {\n    const { onChange, value: currentValue } = this.props;\n\n    const value = currentValue ?? getDefault();\n\n    onChange({\n      ...value,\n      [type]: !value[type],\n    });\n  }\n\n  render() {\n    const { value, lang } = this.props;\n\n    const labels = flatten(mLabels, lang, true);\n\n    const { enabled } = this.state;\n\n    return (\n      <div className=\"accessibility form-group\">\n        <div className=\"checkbox\">\n          <label htmlFor=\"show-accessibility\">\n            <input\n              id=\"show-accessibility\"\n              type=\"checkbox\"\n              checked={enabled}\n              onChange={this.toggleEnabled.bind(this)}\n            />\n            {labels.input}\n          </label>\n        </div>\n        {enabled ? (\n          <div className=\"accessibility-detail margin-left-md margin-top-md\">\n            {TYPES.map((type, i) => (\n              <div\n                className={`checkbox ${type + (i + 1 < TYPES.length ? ' margin-bottom-md' : ' margin-bottom-xs')}`}\n                key={type}\n              >\n                <label htmlFor={type}>\n                  <input\n                    id={type}\n                    name={type}\n                    type=\"checkbox\"\n                    checked={!!value?.[type]}\n                    onChange={this.toggleAccessibility.bind(this, type)}\n                  />\n                  <i />\n                  {labels[type]}\n                </label>\n              </div>\n            ))}\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n"],"mappings":";AAAA,OAAO,OAAO;AACd,SAAS,iBAAiB;AAE1B,OAAO,aAAa;AACpB,OAAO,aAAa;AAkEV,SACE,KADF;AAhEV,IAAM,QAAQ,CAAC,MAAM,MAAM,MAAM,MAAM,IAAI;AAE3C,IAAM,aAAa,MACjB,MAAM;AAAA,EACJ,CAAC,GAAG,OAAO;AAAA,IACT,GAAG;AAAA,IACH,CAAC,CAAC,GAAG;AAAA,EACP;AAAA,EACA,CAAC;AACH;AAEF,IAAqB,yBAArB,cAAoD,UAAU;AAAA,EAC5D,YAAY,OAAO;AACjB,UAAM,KAAK;AAEX,SAAK,QAAQ;AAAA,MACX,SAAS,KAAK,iBAAiB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,mBAAmB;AACjB,UAAM,EAAE,OAAO,aAAa,IAAI,KAAK;AACrC,UAAM,QAAQ,gBAAgB,WAAW;AAEzC,WAAO,CAAC,CAAC,EAAE,KAAK,KAAK,EAAE,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC,EAAE;AAAA,EACjD;AAAA,EAEA,gBAAgB;AACd,UAAM,EAAE,SAAS,IAAI,KAAK;AAE1B,UAAM,EAAE,QAAQ,IAAI,KAAK;AAEzB,UAAM,UAAU,CAAC;AAEjB,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAED,QAAI,CAAC,WAAW,KAAK,iBAAiB,GAAG;AACvC,eAAS,WAAW,CAAC;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,oBAAoB,MAAM;AACxB,UAAM,EAAE,UAAU,OAAO,aAAa,IAAI,KAAK;AAE/C,UAAM,QAAQ,gBAAgB,WAAW;AAEzC,aAAS;AAAA,MACP,GAAG;AAAA,MACH,CAAC,IAAI,GAAG,CAAC,MAAM,IAAI;AAAA,IACrB,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAE,OAAO,KAAK,IAAI,KAAK;AAE7B,UAAM,SAAS,QAAQ,SAAS,MAAM,IAAI;AAE1C,UAAM,EAAE,QAAQ,IAAI,KAAK;AAEzB,WACE,qBAAC,SAAI,WAAU,4BACb;AAAA,0BAAC,SAAI,WAAU,YACb,+BAAC,WAAM,SAAQ,sBACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,IAAG;AAAA,YACH,MAAK;AAAA,YACL,SAAS;AAAA,YACT,UAAU,KAAK,cAAc,KAAK,IAAI;AAAA;AAAA,QACxC;AAAA,QACC,OAAO;AAAA,SACV,GACF;AAAA,MACC,UACC,oBAAC,SAAI,WAAU,qDACZ,gBAAM,IAAI,CAAC,MAAM,MAChB;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,YAAY,QAAQ,IAAI,IAAI,MAAM,SAAS,sBAAsB,oBAAoB;AAAA,UAGhG,+BAAC,WAAM,SAAS,MACd;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,IAAI;AAAA,gBACJ,MAAM;AAAA,gBACN,MAAK;AAAA,gBACL,SAAS,CAAC,EAAC,+BAAQ;AAAA,gBACnB,UAAU,KAAK,oBAAoB,KAAK,MAAM,IAAI;AAAA;AAAA,YACpD;AAAA,YACA,oBAAC,OAAE;AAAA,YACF,OAAO,IAAI;AAAA,aACd;AAAA;AAAA,QAZK;AAAA,MAaP,CACD,GACH,IACE;AAAA,OACN;AAAA,EAEJ;AACF;","names":[]}