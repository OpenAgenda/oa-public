{"version":3,"file":"Details.js","names":["React","Fragment","useState","SwitchModule","Modal","jsxDEV","_jsxDEV","_Fragment","Switch","default","roleToString","type","Details","props","limit","getQuery","agenda","members","total","pageRange","getMembersPage","displayConfirmDelete","setAgenda","updateHref","initialQuery","tab","setTab","modalVisible","setModalVisible","handleResync","uid","fetch","concat","method","headers","body","JSON","stringify","error","console","handleTabChange","name","_objectSpread","setOfficial","checked","official","setPrivate","private","hasNextPage","lastPage","hasPrevPage","renderPrev","children","colSpan","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","renderNext","renderMemberItem","member","_member$user$uid","_member$user","_member$user2","_member$user3","_member$user4","_member$user5","_member$user6","_member$user7","_member$user8","deletedUser","id","invited","custom","contactName","email","user","userUid","role","fullName","username","createdAt","href","disabled","renderMembersTable","length","map","m","renderAgendaHeader","network","image","slug","title","description","url","isPrivate","updatedAt","style","marginRight","src","alt","target","rel","checkedChildren","unCheckedChildren","onChange","renderFeaturesTab","credentials","_get","_keys","c","_agenda$credentials","_set","onClose","contentLabel"],"sources":["../src/Details.js"],"sourcesContent":["import React, { Fragment, useState } from 'react';\nimport SwitchModule from 'rc-switch';\nimport _ from 'lodash';\nimport { Modal } from '@openagenda/react-shared';\n\nconst Switch = SwitchModule.default || SwitchModule;\n\nfunction roleToString(type) {\n  switch (type) {\n    case 1:\n      return 'Contributeur';\n    case 2:\n      return 'Administrateur';\n    case 3:\n      return 'Modérateur';\n    // NOTE : la ligne suivante ne sera jamais atteinte car 'case 3' est déjà au-dessus\n    case 3:\n      return 'Lecteur';\n    default:\n      return 'Inconnu';\n  }\n}\n\nexport default function Details(props) {\n  const {\n    limit = 20,\n    getQuery,\n    agenda,\n    members,\n    total,\n    pageRange,\n    getMembersPage,\n    displayConfirmDelete,\n    setAgenda,\n    updateHref\n  } = props;\n\n  // On lit la query initiale pour en déduire l'onglet par défaut\n  const initialQuery = getQuery();\n  const [tab, setTab] = useState(() => (initialQuery && initialQuery.tab) || 'members');\n  const [modalVisible, setModalVisible] = useState(false);\n  \n  /**\n   * Fonction pour gérer la resynchronisation\n   */\n  const handleResync = async (type) => {\n    if (!agenda || !agenda.uid) return;\n    setModalVisible(true);\n    \n    try {\n      await fetch(`/api/agendas/${agenda.uid}/settings/resync`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify([type]),\n      });\n    } catch (error) {\n      console.error(`Erreur lors de la resynchronisation de ${type}:`, error);\n      setModalVisible(false);\n    }\n  };\n\n  /**\n   * Sélecteurs d'onglet\n   */\n  const handleTabChange = (name) => {\n    setTab(name);\n    updateHref({\n      ...(getQuery() || {}),\n      tab: name\n    });\n  };\n\n  /**\n   * Switches\n   */\n  const setOfficial = (checked) => {\n    setAgenda({ official: checked });\n  };\n\n  const setPrivate = (checked) => {\n    setAgenda({ private: checked });\n  };\n\n  /**\n   * Pagination\n   */\n  const hasNextPage = () => {\n    const lastPage = pageRange[1];\n    return lastPage * limit < total;\n  };\n\n  const hasPrevPage = () => {\n    return pageRange[0] > 1;\n  };\n\n  const renderPrev = () => {\n    if (!hasPrevPage()) return null;\n    return (\n      <tr>\n        <td colSpan=\"6\" className=\"text-center\">\n          <button className=\"btn btn-default\" onClick={() => getMembersPage(false)}>\n            Précédent\n          </button>\n        </td>\n      </tr>\n    );\n  };\n\n  const renderNext = () => {\n    if (!hasNextPage()) return null;\n    return (\n      <tr>\n        <td colSpan=\"6\" className=\"text-center\">\n          <button className=\"btn btn-default\" onClick={() => getMembersPage(true)}>\n            Suivant\n          </button>\n        </td>\n      </tr>\n    );\n  };\n\n  /**\n   * Rendu des membres\n   */\n  const renderMemberItem = (member) => {\n    // Cas : utilisateur supprimé\n    if (member.deletedUser) {\n      return (\n        <tr key={member.id}>\n          <td className=\"text-danger text-center\" colSpan={7}>User deleted</td>\n        </tr>\n      );\n    }\n\n    // Cas : invité\n    if (member.invited) {\n      return (\n        <tr key={member.id}>\n          <td className=\"text-info text-center\" colSpan={7}>\n            User invited (\n            {member.custom.contactName ? <Fragment>{member.custom.contactName}: </Fragment> : null}\n            {member.custom.email})\n          </td>\n        </tr>\n      );\n    }\n\n    // Cas : utilisateur \"actif\"\n    return (\n      <tr key={member.id}>\n        <td className=\"text-primary\">\n          {member.user?.uid ?? `Utilisateur supprimé (${member.userUid})`}\n        </td>\n        <td>{roleToString(member.role)}</td>\n        <td>{member.user?.fullName}</td>\n        <td>{member.user?.username}</td>\n        <td>{member.user?.email}</td>\n        <td>le {member.user?.createdAt}</td>\n        <td>\n          <a href={`/admin/users/signin?uid=${member.user?.uid}`}>\n            <i className=\"fa fa-sign-in\" aria-hidden=\"true\"></i>\n          </a>{' '}\n          <a\n            disabled={!member.user?.uid}\n            href={member.user?.uid ? `/admin/users?userUid=${member.user.uid}` : '#'}\n          >\n            <i className=\"fa fa-user\" aria-hidden=\"true\"></i>\n          </a>\n        </td>\n      </tr>\n    );\n  };\n\n  const renderMembersTable = () => {\n    return (\n      <table className=\"table table-striped table-hover\">\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Type</th>\n            <th>Nom complet</th>\n            <th>Nom d'utilisateur</th>\n            <th>Email</th>\n            <th>Depuis</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {renderPrev()}\n          {members?.length ? (\n            members.map((m) => renderMemberItem(m))\n          ) : (\n            <tr>\n              <td colSpan=\"7\" className=\"text-center\">\n                Y'a personne !\n              </td>\n            </tr>\n          )}\n          {renderNext()}\n        </tbody>\n      </table>\n    );\n  };\n\n  /**\n   * Header de l'agenda\n   */\n  const renderAgendaHeader = () => {\n    if (!agenda) return null;\n\n    const { network, image, slug, title, description, url, uid, official, private: isPrivate, updatedAt, createdAt } = agenda;\n    \n    return (\n      <header className=\"agenda-header\">\n        <div className=\"container-fluid profile notheme\">\n          <div className=\"row\">\n            <div className=\"pull-right\">\n              <button\n                type=\"button\"\n                onClick={() => handleResync('rebuildSearch')}\n                className=\"btn btn-primary\"\n                style={{ marginRight: '5px' }}\n              >\n                Réindexer\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => handleResync('resyncInbox')}\n                className=\"btn btn-info\"\n                style={{ marginRight: '5px' }}\n              >\n                Réinitialiser la messagerie\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => handleResync('rebuildActivities')}\n                className=\"btn btn-success\"\n                style={{ marginRight: '5px' }}\n              >\n                Resynchroniser l'historique\n              </button>\n              <button\n                type=\"button\"\n                onClick={displayConfirmDelete}\n                className=\"btn btn-danger\"\n              >\n                Supprimer\n              </button>\n            </div>\n\n            {image ? (\n              <div className=\"col-sm-2 avatar-container\">\n                <a href={`/${slug}`}>\n                  <img className=\"avatar\" src={image} alt={title} />\n                </a>\n              </div>\n            ) : null}\n\n            <div className={image ? 'col-sm-7 title-container' : 'title-container'}>\n              <a href={`/${slug}`}>\n                {network && (\n                  <span>\n                    {network.title} ›{' '}\n                    <a href={`/admin/networks/${network.uid}`}>config</a> -{' '}\n                    <a href={`/admin/networks/${network.uid}/agendas`}>agendas</a>{' '}\n                  </span>\n                )}\n                <h1>{title}</h1>\n                <p>{description}</p>\n              </a>\n              {url && (\n                <p>\n                  <a target=\"_blank\" rel=\"noreferrer\" href={url}>\n                    {url}\n                  </a>\n                </p>\n              )}\n              {uid && (\n                <>\n                  <div>\n                    Agenda officiel{' '}\n                    <Switch\n                      className=\"rc-switch\"\n                      checkedChildren={<i className=\"fa fa-check\" aria-hidden=\"true\"></i>}\n                      unCheckedChildren={<i className=\"fa fa-times\" aria-hidden=\"true\"></i>}\n                      onChange={setOfficial}\n                      checked={!!official}\n                    />\n                  </div>\n                  <div>\n                    Agenda privé{' '}\n                    <Switch\n                      className=\"rc-switch\"\n                      checkedChildren={<i className=\"fa fa-check\" aria-hidden=\"true\"></i>}\n                      unCheckedChildren={<i className=\"fa fa-times\" aria-hidden=\"true\"></i>}\n                      onChange={setPrivate}\n                      checked={!!isPrivate}\n                    />\n                  </div>\n                  <div>Création: {createdAt} - Dernière mise à jour: {updatedAt}</div>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </header>\n    );\n  };\n\n  /**\n   * Onglet Features\n   */\n  const renderFeaturesTab = () => {\n    const credentials = _.get(agenda, 'config.credentials', {});\n    return (\n      <ul className=\"list-unstyled\">\n        {_.keys(credentials).map((c) => (\n          <li key={c} className=\"margin-v-sm\">\n            <Switch\n              className=\"rc-switch\"\n              checkedChildren={<i className=\"fa fa-check\" aria-hidden=\"true\"></i>}\n              unCheckedChildren={<i className=\"fa fa-times\" aria-hidden=\"true\"></i>}\n              onChange={(checked) => setAgenda(_.set({}, ['credentials', c], checked))}\n              checked={!!agenda.credentials?.[c]}\n            />{' '}\n            {credentials[c].description}\n          </li>\n        ))}\n      </ul>\n    );\n  };\n\n  return (\n    <div className=\"col-md-9\">\n      <div className=\"row\">\n        {renderAgendaHeader()}\n        \n        {/* Modal pour indiquer que l'opération est en cours - affiché uniquement après un clic sur un bouton */}\n        {modalVisible && (\n          <Modal\n            onClose={() => setModalVisible(false)}\n            contentLabel=\"Opération en cours\"\n          >\n            <div className=\"text-center\">\n              L'opération est en cours\n            </div>\n          </Modal>\n        )}\n\n        <ul className=\"nav nav-tabs\">\n          <li\n            role=\"presentation\"\n            className={tab === 'members' ? 'active' : ''}\n            onClick={() => handleTabChange('members')}\n          >\n            <a href=\"#\">Member</a>\n          </li>\n          <li\n            role=\"presentation\"\n            className={tab === 'features' ? 'active' : ''}\n            onClick={() => handleTabChange('features')}\n          >\n            <a href=\"#\">Features</a>\n          </li>\n        </ul>\n\n        {tab === 'members' && renderMembersTable()}\n        {tab === 'features' && renderFeaturesTab()}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]}