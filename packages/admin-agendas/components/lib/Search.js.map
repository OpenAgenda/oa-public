{"version":3,"file":"Search.js","names":["React","useRef","useEffect","useInView","Spinner","AgendaItem","jsxDEV","_jsxDEV","searchSpinnerConfig","width","length","radius","Search","_ref","query","agendas","loading","onSelectAgenda","onSearchChange","getSearchPage","searchRef","ref","infiniteRef","onChange","inView","className","children","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","title","placeholder","value","search","e","target","type","options","map","agenda","onSelect","uid"],"sources":["../src/Search.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { useInView } from 'react-intersection-observer';\nimport { Spinner } from '@openagenda/react-shared';\nimport AgendaItem from '@openagenda/admin-agendas/components/src/AgendaItem';\n\nconst searchSpinnerConfig = {\n  width: 1,\n  length: 3,\n  radius: 4\n};\n\nexport default function Search({\n  query,\n  agendas,\n  loading,\n  onSelectAgenda,\n  onSearchChange,\n  getSearchPage,\n}) {\n  const searchRef = useRef(null);\n\n  const { ref: infiniteRef } = useInView({\n    onChange: (inView) => {\n      if (inView && !loading) {\n        getSearchPage(true);\n      }\n    }\n  });\n\n  return (\n    <div className=\"col-md-3 admin-search\" ref={searchRef}>\n      <div className=\"row\">\n        <div className=\"header\">\n          <div className=\"form-group\">\n            <label className=\"sr-only\" htmlFor=\"agenda_search\">\n              Recherche d'agendas\n            </label>\n            <div className=\"input-icon-right\">\n              <input\n                title=\"je mange des urls et des uid aussi maintenant\"\n                className=\"form-control\"\n                placeholder=\"Rechercher\"\n                value={query?.search || ''}\n                onChange={(e) => onSearchChange('oas[search]', e.target.value)}\n              />\n              <button type=\"submit\" className=\"btn\">\n                {loading ? (\n                  <Spinner options={searchSpinnerConfig} />\n                ) : (\n                  <i className=\"fa fa-search\" aria-hidden=\"true\" />\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"row\">\n        <div className=\"body media-list margin-bottom-xs\">\n          {agendas?.length ? (\n            agendas.map((agenda) => (\n              <AgendaItem\n                key={agenda.uid}\n                agenda={agenda}\n                onSelect={onSelectAgenda}\n              />\n            ))\n          ) : (\n            <div className=\"empty\">\n              <p>Aucun agenda correspondant Ã  cette recherche</p>\n            </div>\n          )}\n          <div ref={infiniteRef} />\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]}