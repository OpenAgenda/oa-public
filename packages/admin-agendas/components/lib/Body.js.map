{"version":3,"file":"Body.js","names":["React","useState","useEffect","useCallback","debounce","qs","get","post","getSupportedLocale","Modal","AuthenticateAndConfirm","locales","IntlProvider","Details","Search","jsxDEV","_jsxDEV","getQuery","parse","window","location","search","ignoreQueryPrefix","updateHref","query","_q$oas","defaults","searchPage","membersPage","tab","q","_objectSpread","oas","qStr","stringify","addQueryPrefix","history","pushState","pathname","Body","props","searchRes","agendaRes","setAgendaRes","membersRes","loading","setLoading","setSearch","agendas","total","pageRange","agenda","setAgenda","members","setMembers","membersPageRange","setMembersPageRange","membersTotal","setMembersTotal","displayDeleteModal","setDisplayDeleteModal","searchAgendas","page","cb","err","data","console","error","prev","parseInt","onSelectAgenda","uid","agendaUid","agendaId","length","resetSearchPage","newQuery","arguments","undefined","onSearchChange","name","searchValue","getSearchPage","next","newPage","start","end","newPageRange","newAgendas","membersData","replace","errAgenda","agendaData","getMembersPage","saveAgenda","_Promise","resolve","reject","concat","result","displayConfirmDelete","locale","messages","fr","defaultLocale","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClose","title","method","message","res","onSuccess","href"],"sources":["../src/Body.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport debounce from 'lodash/debounce';\nimport qs from 'qs';\nimport get from '@openagenda/utils/get';\nimport post from '@openagenda/utils/post';\nimport { getSupportedLocale } from '@openagenda/intl';\nimport { Modal, AuthenticateAndConfirm, locales } from '@openagenda/react-shared';\nimport { IntlProvider } from 'react-intl';\nimport Details from '@openagenda/admin-agendas/components/src/Details';\nimport Search from './Search';\n\nfunction getQuery() {\n  return qs.parse(window.location.search, { ignoreQueryPrefix: true });\n}\n\nfunction updateHref(query) {\n  const defaults = {\n    searchPage: 1,\n    membersPage: 1,\n    tab: 'members'\n  };\n\n  const q = { ...defaults, ...query };\n\n  // Nettoyage des paramètres superflus\n  if (q.searchPage <= 1) delete q.searchPage;\n  if (q.oas?.search === '') delete q.oas.search;\n  if (q.membersPage <= 1) delete q.membersPage;\n  if (q.tab === 'members') delete q.tab;\n\n  const qStr = qs.stringify(q, { addQueryPrefix: true });\n  window.history.pushState(q, '', window.location.pathname + qStr);\n}\n\nexport default function Body(props) {\n  const {\n    searchRes,\n    agendaRes,\n    setAgendaRes,\n    membersRes\n  } = props;\n\n  /**\n   * État local\n   */\n  const [loading, setLoading] = useState(true);\n  const [search, setSearch] = useState({\n    query: {},\n    agendas: [],\n    total: 0,\n    pageRange: [1, 1]\n  });\n  const [agenda, setAgenda] = useState({});\n  const [members, setMembers] = useState([]);\n  const [membersPageRange, setMembersPageRange] = useState([1, 1]);\n  const [membersTotal, setMembersTotal] = useState(0);\n  const [displayDeleteModal, setDisplayDeleteModal] = useState(false);\n\n  /**\n   * Debounced search\n   */\n  const searchAgendas = useCallback(\n    debounce((query, page, cb) => {\n      setLoading(true);\n\n      get(searchRes, query, (err, data) => {\n        setLoading(false);\n\n        if (err) {\n          console.error('error', err);\n          return;\n        }\n\n        // Mise à jour des agendas\n        setSearch(prev => ({\n          ...prev,\n          agendas: data.agendas,\n          total: data.total,\n          pageRange: [parseInt(page, 10), parseInt(page, 10)]\n        }));\n\n        updateHref({ ...(getQuery() || {}), ...query });\n\n        // Si on n'a qu'un seul résultat, on sélectionne directement cet agenda\n        if (data.total === 1 && data.agendas[0]) {\n          onSelectAgenda(data.agendas[0].uid);\n        }\n\n        if (cb) cb();\n      });\n    }, 500),\n    [searchRes]\n  );\n\n  /**\n   * Au montage : on arrête de loader puis on charge la première page (si agendas vide)\n   */\n  useEffect(() => {\n    setLoading(false);\n\n    const q = {\n      searchPage: 1,\n      agendaUid: null,\n      agendaId: null,\n      membersPage: 1,\n      ...getQuery()\n    };\n\n    // Si aucune liste d'agendas, on déclenche une recherche initiale\n    if (!search.agendas.length) {\n      resetSearchPage(q.oas, q.searchPage, () => {\n        if (q.agendaUid) {\n          onSelectAgenda(q.agendaUid, q.membersPage);\n        }\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /**\n   * Fonctions utilitaires\n   */\n  function resetSearchPage(newQuery, page = 1, cb) {\n    const query = {\n      oas: newQuery,\n      searchPage: page\n    };\n\n    // On met simplement à jour le search.query\n    setSearch(prev => ({\n      ...prev,\n      query: newQuery\n    }));\n\n    // On lance la recherche \"debounced\"\n    searchAgendas(query, page, cb);\n  }\n\n  function onSearchChange(name, searchValue) {\n    // On ne se sert pas de `name` ici, mais on le laisse si besoin futur\n    resetSearchPage({ search: searchValue });\n  }\n\n  function getSearchPage(next) {\n    if (loading) return;\n\n    // On calcule la page suivante/précédente\n    const newPage = search.pageRange[next ? 1 : 0] + (next ? 1 : -1);\n    const query = {\n      oas: search.query,\n      searchPage: newPage\n    };\n\n    // Si on a déjà chargé tous les agendas, on ne fait rien\n    if (search.agendas.length >= search.total) return;\n\n    setLoading(true);\n\n    get(searchRes, query, (err, data) => {\n      setLoading(false);\n      if (err) {\n        console.error('error', err);\n        return;\n      }\n\n      setSearch(prev => {\n        // Mise à jour du range\n        const [start, end] = prev.pageRange;\n        const newPageRange = next\n          ? [start, end + 1]\n          : [start - 1, end];\n\n        // Ajout des nouvelles données\n        const newAgendas = next\n          ? [...prev.agendas, ...data.agendas]\n          : [...data.agendas, ...prev.agendas];\n\n        return {\n          ...prev,\n          agendas: newAgendas,\n          pageRange: newPageRange,\n          total: data.total // On remet éventuellement à jour le total\n        };\n      });\n\n      updateHref({ ...(getQuery() || {}), ...query });\n    });\n  }\n\n  function onSelectAgenda(uid, page = 1) {\n    const query = {\n      agendaUid: uid,\n      membersPage: page\n    };\n\n    get(membersRes, query, (err, membersData) => {\n      if (err) {\n        console.error('error', err);\n        return;\n      }\n\n      get(agendaRes.replace(':uid', uid), {}, (errAgenda, agendaData) => {\n        if (errAgenda) {\n          console.error('error', errAgenda);\n          return;\n        }\n\n        setAgenda(agendaData);\n        setMembers(membersData.members);\n        setMembersTotal(membersData.total);\n        setMembersPageRange([parseInt(page, 10), parseInt(page, 10)]);\n\n        updateHref({ ...(getQuery() || {}), ...query });\n      });\n    });\n  }\n\n  function getMembersPage(next) {\n    if (loading) return;\n\n    const newPage = membersPageRange[next ? 1 : 0] + (next ? 1 : -1);\n    const query = {\n      agendaUid: agenda.uid,\n      membersPage: newPage\n    };\n\n    // Si on a déjà chargé tous les membres, on ne fait rien\n    if (members.length >= membersTotal) return;\n\n    setLoading(true);\n\n    get(membersRes, query, (err, data) => {\n      setLoading(false);\n\n      if (err) {\n        console.error('error', err);\n        return;\n      }\n\n      setMembersTotal(data.total);\n      setMembersPageRange(prev => {\n        const [start, end] = prev;\n        return next ? [start, end + 1] : [start - 1, end];\n      });\n\n      setMembers(prev => {\n        return next\n          ? [...prev, ...data.members]\n          : [...data.members, ...prev];\n      });\n\n      updateHref({ ...(getQuery() || {}), ...query });\n    });\n  }\n\n  /**\n   * Sauvegarde de l'agenda (en POST)\n   */\n  function saveAgenda(data) {\n    return new Promise((resolve, reject) => {\n      post(`${setAgendaRes}/${agenda.uid}`, data, (err, result) => {\n        if (err) {\n          return reject(err);\n        }\n        setAgenda(result);\n        resolve(result);\n      });\n    });\n  }\n\n  function displayConfirmDelete() {\n    setDisplayDeleteModal(true);\n  }\n\n  return (\n    <IntlProvider\n      key=\"fr\"\n      locale=\"fr\"\n      messages={locales.fr}\n      defaultLocale={getSupportedLocale('fr')}\n    >\n      <div className=\"admin\">\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <Search\n              query={search.query}\n              agendas={search.agendas}\n              total={search.total}\n              pageRange={search.pageRange}\n              getSearchPage={getSearchPage}\n              onSelectAgenda={onSelectAgenda}\n              onSearchChange={onSearchChange}\n              loading={loading}\n            />\n            <Details\n              agenda={agenda}\n              members={members}\n              total={membersTotal}\n              pageRange={membersPageRange}\n              getMembersPage={getMembersPage}\n              setAgenda={saveAgenda}\n              displayConfirmDelete={displayConfirmDelete}\n              updateHref={updateHref}\n              getQuery={getQuery}\n            />\n\n            {displayDeleteModal && (\n              <Modal\n                onClose={() => setDisplayDeleteModal(false)}\n                title=\"Suppression d'agenda\"\n              >\n                <AuthenticateAndConfirm\n                  method=\"delete\"\n                  message=\"MdP StP.\"\n                  res={`/api/agendas/${agenda.uid}`}\n                  onSuccess={() => {\n                    window.location.href = '/admin/agendas';\n                  }}\n                />\n              </Modal>\n            )}\n          </div>\n        </div>\n      </div>\n    </IntlProvider>\n  );\n}\n"],"mappings":"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","ignoreList":[]}