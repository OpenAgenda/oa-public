{"version":3,"file":"RuleCheckbox.js","names":["React","useRef","Field","defineMessages","FormattedMessage","jsxDEV","_jsxDEV","stateMessages","id","defaultMessage","ruleMessages","receiveInvitation","receiveNotificationsSummary","receiveMemberMessage","receiveUserInboxMessage","receiveAgendaInboxMessage","receiveEvent","receiveMyEventChangeState","receiveMyEventUpdate","receiveMyEventAggregation","receiveEventChangeState","receiveMyEventCreation","receiveEventCreation","receiveEventUpdate","receiveEventAggregation","receiveEventAddition","receiveMyEventAddition","RuleLabel","memo","_ref","rule","values","actions","subject","state","_objectSpread","conditions","fileName","_jsxFileName","lineNumber","columnNumber","messageKey","concat","_upperFirst","prevProps","nextProps","_isEqual","RuleField","_ref2","input","meta","checkboxRef","current","indeterminate","data","className","children","htmlFor","key","type","ref","RuleCheckbox","_ref3","name","subscription","value","validateFields","component"],"sources":["../../src/client/RuleCheckbox.js"],"sourcesContent":["import React, { useRef } from 'react';\nimport _ from 'lodash';\nimport { Field } from 'react-final-form';\nimport { defineMessages, FormattedMessage } from 'react-intl';\n\nconst stateMessages = defineMessages({\n  '-1': {\n    id: 'Abilities.RulesCheckbox.states.refused',\n    defaultMessage: 'refused',\n  },\n  0: {\n    id: 'Abilities.RulesCheckbox.states.toControl',\n    defaultMessage: 'to control',\n  },\n  1: {\n    id: 'Abilities.RulesCheckbox.states.controlled',\n    defaultMessage: 'controlled',\n  },\n  2: {\n    id: 'Abilities.RulesCheckbox.states.published',\n    defaultMessage: 'published',\n  },\n});\n\nconst ruleMessages = defineMessages({\n  receiveInvitation: {\n    id: 'Abilities.RulesCheckbox.rules.receiveInvitation',\n    defaultMessage: 'Receive invitations',\n  },\n  receiveNotificationsSummary: {\n    id: 'Abilities.RulesCheckbox.rules.receiveNotificationsSummary',\n    defaultMessage: 'Receive summaries of notifications',\n  },\n  receiveMemberMessage: {\n    id: 'Abilities.RulesCheckbox.rules.receiveMemberMessage',\n    defaultMessage: 'Receive messages sent via the \"Write to them\" feature',\n  },\n  receiveUserInboxMessage: {\n    id: 'Abilities.RulesCheckbox.rules.receiveUserInboxMessage',\n    defaultMessage: 'Receive messages from my inbox',\n  },\n  receiveAgendaInboxMessage: {\n    id: 'Abilities.RulesCheckbox.rules.receiveAgendaInboxMessage',\n    defaultMessage: 'Receive messages from agenda inbox',\n  },\n  receiveEvent: {\n    id: 'Abilities.RulesCheckbox.rules.receiveEvent',\n    defaultMessage: 'Receive events sent by other users',\n  },\n  receiveMyEventChangeState: {\n    id: 'Abilities.RulesCheckbox.rules.receiveMyEventChangeState',\n    defaultMessage:\n      'Receive notifications when someone change state of my events',\n  },\n  receiveMyEventUpdate: {\n    id: 'Abilities.RulesCheckbox.rules.receiveMyEventUpdate',\n    defaultMessage: 'Receive notifications when someone update my events',\n  },\n  receiveMyEventAggregation: {\n    id: 'Abilities.RulesCheckbox.rules.receiveMyEventAggregation',\n    defaultMessage: 'Receive notifications when someone aggregate my events',\n  },\n  receiveEventChangeState: {\n    id: 'Abilities.RulesCheckbox.rules.receiveEventChangeState',\n    defaultMessage: 'Receive states changes for {state}',\n  },\n  receiveMyEventCreation: {\n    id: 'Abilities.RulesCheckbox.rules.receiveMyEventCreation',\n    defaultMessage: 'Receive event creation confirmations',\n  },\n  receiveEventCreation: {\n    id: 'Abilities.RulesCheckbox.rules.receiveEventCreation',\n    defaultMessage: 'Receive event creations',\n  },\n  receiveEventUpdate: {\n    id: 'Abilities.RulesCheckbox.rules.receiveEventUpdate',\n    defaultMessage: 'Receive event updates',\n  },\n  receiveEventAggregation: {\n    id: 'Abilities.RulesCheckbox.rules.receiveEventAggregation',\n    defaultMessage: 'Receive event aggregations',\n  },\n  receiveEventAddition: {\n    id: 'Abilities.RulesCheckbox.rules.receiveEventAddition',\n    defaultMessage: 'Receive event creations',\n  },\n  receiveMyEventAddition: {\n    id: 'Abilities.RulesCheckbox.rules.receiveMyEventAddition',\n    defaultMessage: 'Receive notifications when someone add my events',\n  },\n});\n\nconst RuleLabel = React.memo(\n  ({ rule }) => {\n    const values = {};\n\n    if (rule.actions === 'receive' && rule.subject === 'eventChangeState') {\n      values.state = (\n        <FormattedMessage {...stateMessages[rule.conditions.state]} />\n      );\n    }\n\n    const messageKey = `${rule.actions}${_.upperFirst(rule.subject)}`;\n\n    if (!ruleMessages[messageKey]) {\n      return messageKey;\n    }\n\n    return <FormattedMessage {...ruleMessages[messageKey]} values={values} />;\n  },\n  (prevProps, nextProps) => _.isEqual(prevProps.rule, nextProps.rule),\n);\n\nfunction RuleField({ rule, input, meta }) {\n  const checkboxRef = useRef(null);\n\n  if (checkboxRef.current) {\n    checkboxRef.current.indeterminate = meta.data && meta.data.indeterminate;\n  }\n\n  return (\n    <div className=\"checkbox\">\n      <label htmlFor={rule.key}>\n        <input type=\"checkbox\" id={rule.key} ref={checkboxRef} {...input} />{' '}\n        <RuleLabel rule={rule} />\n      </label>\n    </div>\n  );\n}\n\nfunction RuleCheckbox({ rule }) {\n  return (\n    <Field\n      key={rule.key}\n      name={rule.key}\n      type=\"checkbox\"\n      subscription={{ value: true, data: true }}\n      validateFields={[]}\n      component={RuleField}\n      rule={rule}\n    />\n  );\n}\n\nexport default React.memo(RuleCheckbox);\n"],"mappings":"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","ignoreList":[]}