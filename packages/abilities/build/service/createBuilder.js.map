{"version":3,"file":"createBuilder.js","names":["abilityPkg","AbilityBuilder","createBuilder","entityName","identifier","builder","extract","defineWrapper","func","_len","arguments","length","args","Array","_key","result","Object","assign","_last","rules","can","_wrap","bind","cannot"],"sources":["../../src/service/createBuilder.js"],"sourcesContent":["import _ from 'lodash';\nimport abilityPkg from '@casl/ability';\n\nconst { AbilityBuilder } = abilityPkg;\n\nexport default function createBuilder(entityName, identifier) {\n  const builder = AbilityBuilder.extract();\n\n  function defineWrapper(func, ...args) {\n    const result = func(...args);\n\n    Object.assign(_.last(this.rules), {\n      entityName,\n      identifier,\n    });\n\n    return result;\n  }\n\n  builder.can = _.wrap(builder.can.bind(builder), defineWrapper);\n  builder.cannot = _.wrap(builder.cannot.bind(builder), defineWrapper);\n\n  return builder;\n}\n"],"mappings":";;;;AACA,OAAOA,UAAU,MAAM,eAAe;AAEtC,MAAM;EAAEC;AAAe,CAAC,GAAGD,UAAU;AAErC,eAAe,SAASE,aAAaA,CAACC,UAAU,EAAEC,UAAU,EAAE;EAC5D,MAAMC,OAAO,GAAGJ,cAAc,CAACK,OAAO,CAAC,CAAC;EAExC,SAASC,aAAaA,CAACC,IAAI,EAAW;IAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAANC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,OAAAA,IAAA,WAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAJF,IAAI,CAAAE,IAAA,QAAAJ,SAAA,CAAAI,IAAA;IAAA;IAClC,MAAMC,MAAM,GAAGP,IAAI,CAAC,GAAGI,IAAI,CAAC;IAE5BI,MAAM,CAACC,MAAM,CAACC,KAAA,CAAO,IAAI,CAACC,KAAK,CAAC,EAAE;MAChChB,UAAU;MACVC;IACF,CAAC,CAAC;IAEF,OAAOW,MAAM;EACf;EAEAV,OAAO,CAACe,GAAG,GAAGC,KAAA,CAAOhB,OAAO,CAACe,GAAG,CAACE,IAAI,CAACjB,OAAO,CAAC,EAAEE,aAAa,CAAC;EAC9DF,OAAO,CAACkB,MAAM,GAAGF,KAAA,CAAOhB,OAAO,CAACkB,MAAM,CAACD,IAAI,CAACjB,OAAO,CAAC,EAAEE,aAAa,CAAC;EAEpE,OAAOF,OAAO;AAChB","ignoreList":[]}