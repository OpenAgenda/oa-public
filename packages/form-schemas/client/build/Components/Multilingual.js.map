{"version":3,"file":"Multilingual.js","names":["ih","useCallback","FieldCounter","Sub","jsxDEV","_jsxDEV","extractLanguageValue","value","l","multilingualizeValue","languages","_reduceInstanceProperty","call","multilingualValue","language","_objectSpread","MultilingualField","_ref","onChange","field","error","enabled","lang","FieldComponent","myOnChange","singleLanguageValue","multilingualizedValue","renderField","languageField","default","$set","_get","_isObject","children","v","fileName","_jsxFileName","lineNumber","columnNumber","max","label","sub","length","className","map","htmlFor","concat"],"sources":["../../src/Components/Multilingual.js"],"sourcesContent":["import _ from 'lodash';\nimport ih from 'immutability-helper';\nimport { useCallback } from 'react';\n\nimport FieldCounter from './FieldCounter.js';\nimport Sub from './Sub.js';\n\nfunction extractLanguageValue(value, l) {\n  if (!value) return;\n\n  if (typeof value === 'string') {\n    return value;\n  }\n\n  return value?.[l];\n}\n\nfunction multilingualizeValue(value, languages) {\n  if (!value) return {};\n\n  if (typeof value === 'string') {\n    return languages.reduce(\n      (multilingualValue, language) => ({\n        ...multilingualValue,\n        [language]: value,\n      }),\n      {},\n    );\n  }\n\n  return value;\n}\n\nconst MultilingualField = ({\n  onChange,\n  value,\n  field,\n  error,\n  enabled,\n  lang,\n  FieldComponent,\n}) => {\n  const myOnChange = useCallback(\n    (language, singleLanguageValue) => {\n      const multilingualizedValue = multilingualizeValue(\n        value,\n        field.languages,\n      );\n      onChange({\n        ...multilingualizedValue,\n        [language]: singleLanguageValue,\n      });\n    },\n    [onChange, field.languages, value],\n  );\n\n  const renderField = useCallback(\n    (l) => {\n      const languageField = ih(field, {\n        default: {\n          $set: _.get(\n            field,\n            ['default', l],\n            _.isObject(field.default) ? null : field.default,\n          ),\n        },\n      });\n\n      return (\n        <div>\n          <FieldComponent\n            lang={lang}\n            field={languageField}\n            enabled={enabled}\n            value={extractLanguageValue(value, l)}\n            onChange={(v) => myOnChange(l, v)}\n          />\n          {field.max ? (\n            <FieldCounter value={_.get(value, l)} max={field.max} />\n          ) : null}\n          <Sub label={field.sub} error={_.get(error, l)} />\n        </div>\n      );\n    },\n    [enabled, error, field, value, myOnChange, lang],\n  );\n\n  if (field.languages.length === 1) {\n    return renderField(field.languages[0]);\n  }\n\n  return (\n    <ul className=\"list-unstyled\">\n      {field.languages.map((l) => (\n        <li key={`${field.field}_${l}`}>\n          <div className=\"lang-input\">\n            <label htmlFor={`${field.field}.${l}`}>{l}</label>\n            {renderField(l)}\n          </div>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default MultilingualField;\n"],"mappings":"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","ignoreList":[]}