{"version":3,"file":"FileField.js","names":["Dropzone","Component","multilingualLabels","flattenLabels","extensionsToAccept","jsxDEV","_jsxDEV","FileField","constructor","props","onRemove","bind","onDrop","hasValue","onChange","acceptedFiles","_rejectedFiles","originalName","_get","render","field","lang","value","labels","name","extensions","className","children","disabled","enable","accept","multiple","_ref","getRootProps","getInputProps","_objectSpread","fileName","_jsxFileName","lineNumber","columnNumber","type","upload","acceptedExtensions","concat","join","onClick","title","remove"],"sources":["../../src/Components/FileField.js"],"sourcesContent":["import _ from 'lodash';\nimport Dropzone from '@openagenda/react-dropzone';\nimport { Component } from 'react';\n\nimport multilingualLabels from '@openagenda/labels/form-schemas/fileUpload.js';\nimport flattenLabels from '@openagenda/labels/flatten.js';\nimport extensionsToAccept from '../lib/extensionsToAccept.js';\n\nexport default class FileField extends Component {\n  constructor(props) {\n    super(props);\n    this.onRemove = this.onRemove.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.hasValue = this.hasValue.bind(this);\n  }\n\n  onRemove() {\n    const { onChange } = this.props;\n    onChange(null);\n  }\n\n  onDrop(acceptedFiles, _rejectedFiles) {\n    const { onChange } = this.props;\n    onChange(\n      {\n        originalName: _.get(acceptedFiles, '0.name'),\n      },\n      acceptedFiles,\n    );\n  }\n\n  hasValue() {\n    return !!_.get(this.props, 'value.originalName');\n  }\n\n  render() {\n    const { field, lang, value } = this.props;\n\n    const labels = flattenLabels(multilingualLabels, lang);\n\n    const {\n      field: name,\n      // placeholder,\n      extensions,\n      // store,\n    } = field;\n\n    return (\n      <div className=\"file-upload\">\n        <Dropzone\n          disabled={field.enable === false}\n          accept={extensionsToAccept(extensions)}\n          multiple={false}\n          name={name}\n          onDrop={this.onDrop}\n        >\n          {({ getRootProps, getInputProps }) => (\n            <div className=\"file-dropzone\" {...getRootProps()}>\n              <input {...getInputProps()} />\n              <div className=\"margin-top-lg margin-bottom-sm\">\n                <button type=\"button\" className=\"btn btn-primary margin-top-sm\">\n                  <label>{labels.upload}</label>\n                </button>\n                {this.hasValue() && (\n                  <div className=\"margin-v-xs\">\n                    <label className=\"control-label\">\n                      <i className=\"fa fa-check margin-right-xs\" />\n                      <span>{_.get(this.props, 'value.originalName')}</span>\n                    </label>\n                  </div>\n                )}\n              </div>\n              <span className=\"accepted-info\">\n                {labels.acceptedExtensions}:&nbsp; .\n                {[].concat(extensions).join(', .')}\n              </span>\n            </div>\n          )}\n        </Dropzone>\n        {value ? (\n          <button\n            type=\"button\"\n            onClick={this.onRemove}\n            className=\"btn btn-danger margin-left-xs remove-file\"\n            title={labels.remove}\n            aria-label={labels.remove}\n          >\n            <i className=\"fa fa-trash\" />\n          </button>\n        ) : null}\n      </div>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}