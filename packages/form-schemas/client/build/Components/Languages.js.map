{"version":3,"file":"Languages.js","names":["languages","Component","Select","flattenLabels","languageLabels","a11yButtonActionHandler","jsxDEV","_jsxDEV","languageCodesAndLabels","_sortInstanceProperty","_context","getAllLanguageCode","map","c","value","label","getLanguageInfo","nativeName","call","a","b","Languages","constructor","props","state","adding","changing","onAddSelectStart","bind","onChangeStart","onChange","onCancelChange","onRemove","onAdd","getRemainingLanguages","setState","length","l","filter","current","concat","_includesInstanceProperty","render","pickedLanguages","lang","labels","className","_get","children","role","onClick","onKeyPress","fileName","_jsxFileName","lineNumber","columnNumber","tabIndex","addLanguage","options","clearable","menuPosition","_first","cancelLanguageChange"],"sources":["../../src/Components/Languages.js"],"sourcesContent":["import _ from 'lodash';\n\nimport languages from 'languages';\nimport { Component } from 'react';\nimport Select from 'react-select';\n\nimport flattenLabels from '@openagenda/labels/flatten.js';\nimport languageLabels from '@openagenda/labels/event/form.js';\nimport { a11yButtonActionHandler } from '@openagenda/react-shared';\n\nconst languageCodesAndLabels = languages\n  .getAllLanguageCode()\n  .map((c) => ({ value: c, label: languages.getLanguageInfo(c).nativeName }))\n  .sort((a, b) => (a.label < b.label ? -1 : 1));\n\nexport default class Languages extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { adding: false, changing: false };\n\n    this.onAddSelectStart = this.onAddSelectStart.bind(this);\n    this.onChangeStart = this.onChangeStart.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.onCancelChange = this.onCancelChange.bind(this);\n    this.onRemove = this.onRemove.bind(this);\n    this.onAdd = this.onAdd.bind(this);\n    this.getRemainingLanguages = this.getRemainingLanguages.bind(this);\n  }\n\n  onAddSelectStart() {\n    this.setState({ adding: true });\n  }\n\n  onChangeStart() {\n    const { value } = this.props;\n    if (value.length !== 1) return;\n    this.setState({ changing: true });\n  }\n\n  onChange(l) {\n    const { onChange } = this.props;\n    onChange([l.value]);\n    this.setState({ changing: false });\n  }\n\n  onCancelChange() {\n    this.setState({ changing: false });\n  }\n\n  onRemove(l) {\n    const { value, onChange } = this.props;\n    onChange(value.filter((current) => current !== l));\n  }\n\n  onAdd(l) {\n    const { value, onChange } = this.props;\n    onChange(value.concat(l.value));\n\n    this.setState({ adding: false });\n  }\n\n  getRemainingLanguages() {\n    const { value } = this.props;\n    return languageCodesAndLabels.filter((l) => !value.includes(l.value));\n  }\n\n  render() {\n    const { value: pickedLanguages, lang } = this.props;\n    const { adding, changing } = this.state;\n\n    const labels = flattenLabels(languageLabels, lang);\n\n    const className = _.get(this.props, 'className', 'language-bar');\n\n    return (\n      <div className={className}>\n        {!changing ? (\n          <ul>\n            {pickedLanguages.map((l) => (\n              <li\n                key={`language-${l}`}\n                role=\"presentation\"\n                onClick={a11yButtonActionHandler(this.onChangeStart)}\n                onKeyPress={a11yButtonActionHandler(this.onChangeStart)}\n              >\n                <div className=\"language-item\">\n                  <span>{languages.getLanguageInfo(l).nativeName}</span>\n                  {pickedLanguages.length > 1 ? (\n                    <span\n                      className=\"remove\"\n                      role=\"button\"\n                      tabIndex=\"0\"\n                      onClick={a11yButtonActionHandler(() => this.onRemove(l))}\n                      onKeyPress={a11yButtonActionHandler(() =>\n                        this.onRemove(l))}\n                    >\n                      &#10005;\n                    </span>\n                  ) : null}\n                  {pickedLanguages.length === 1 ? (\n                    <span className=\"margin-right-xs\">\n                      <i className=\"fa fa-angle-down\" />\n                    </span>\n                  ) : null}\n                </div>\n              </li>\n            ))}\n          </ul>\n        ) : null}\n        {!adding && !changing ? (\n          <span className=\"language-add\">\n            {/* eslint-disable-next-line */}\n            <a onClick={this.onAddSelectStart}>{labels.addLanguage}</a>\n          </span>\n        ) : null}\n        {adding && (\n          <span className=\"language-add\">\n            <Select\n              options={this.getRemainingLanguages()}\n              onChange={this.onAdd}\n              clearable={false}\n              menuPosition=\"fixed\"\n            />\n          </span>\n        )}\n        {changing && (\n          <Select\n            value={_.first(\n              languageCodesAndLabels.filter(\n                (c) => _.first(pickedLanguages) === c.value,\n              ),\n            )}\n            options={this.getRemainingLanguages()}\n            onChange={this.onChange}\n            className=\"change-select margin-right-sm\"\n            clearable={false}\n          />\n        )}\n        {changing ? (\n          <span className=\"change-cancel\">\n            {/* eslint-disable-next-line */}\n            <a onClick={this.onCancelChange}>{labels.cancelLanguageChange}</a>\n          </span>\n        ) : null}\n      </div>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}