{"version":3,"file":"MarkdownField.js","names":["ih","Component","fromMarkdownToHTML","fromHTMLToMarkdown","SlateField","HTMLSerializer","fromBRToP","fromPToBR","jsxDEV","_jsxDEV","MarkdownField","shouldComponentUpdate","nextProps","_nextState","value","props","onChange","serialize","render","field","default","defaultValue","appliedValue","_objectSpread","$set","deserialize","bind","raw","parentValue","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["../../src/Components/MarkdownField.js"],"sourcesContent":["import ih from 'immutability-helper';\nimport { Component } from 'react';\nimport { fromMarkdownToHTML, fromHTMLToMarkdown } from '@openagenda/md';\n\nimport SlateField from './SlateField.js';\nimport HTMLSerializer from './HTMLSerializer.js';\nimport { fromBRToP, fromPToBR } from './breaksAndParagraphs.js';\n\nexport default class MarkdownField extends Component {\n  shouldComponentUpdate(nextProps, _nextState) {\n    const { value } = this.props;\n\n    return value !== nextProps.value;\n  }\n\n  onChange(value) {\n    const { onChange } = this.props;\n\n    onChange(fromHTMLToMarkdown(fromPToBR(HTMLSerializer.serialize(value))));\n  }\n\n  render() {\n    const {\n      value,\n      field: { default: defaultValue },\n    } = this.props;\n\n    const appliedValue = value === null && defaultValue ? defaultValue : value;\n\n    return (\n      <SlateField\n        {...ih(this.props, {\n          value: {\n            $set: HTMLSerializer.deserialize(\n              fromBRToP(fromMarkdownToHTML(appliedValue)),\n            ),\n          },\n          onChange: {\n            $set: this.onChange.bind(this),\n          },\n          raw: {\n            $set: true,\n          },\n        })}\n        parentValue={appliedValue}\n      />\n    );\n  }\n}\n"],"mappings":";;AAAA,OAAOA,EAAE,MAAM,qBAAqB;AACpC,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,kBAAkB,EAAEC,kBAAkB,QAAQ,gBAAgB;AAEvE,OAAOC,UAAU,MAAM,iBAAiB;AACxC,OAAOC,cAAc,MAAM,qBAAqB;AAChD,SAASC,SAAS,EAAEC,SAAS,QAAQ,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhE,eAAe,MAAMC,aAAa,SAAST,SAAS,CAAC;EACnDU,qBAAqBA,CAACC,SAAS,EAAEC,UAAU,EAAE;IAC3C,MAAM;MAAEC;IAAM,CAAC,GAAG,IAAI,CAACC,KAAK;IAE5B,OAAOD,KAAK,KAAKF,SAAS,CAACE,KAAK;EAClC;EAEAE,QAAQA,CAACF,KAAK,EAAE;IACd,MAAM;MAAEE;IAAS,CAAC,GAAG,IAAI,CAACD,KAAK;IAE/BC,QAAQ,CAACb,kBAAkB,CAACI,SAAS,CAACF,cAAc,CAACY,SAAS,CAACH,KAAK,CAAC,CAAC,CAAC,CAAC;EAC1E;EAEAI,MAAMA,CAAA,EAAG;IACP,MAAM;MACJJ,KAAK;MACLK,KAAK,EAAE;QAAEC,OAAO,EAAEC;MAAa;IACjC,CAAC,GAAG,IAAI,CAACN,KAAK;IAEd,MAAMO,YAAY,GAAGR,KAAK,KAAK,IAAI,IAAIO,YAAY,GAAGA,YAAY,GAAGP,KAAK;IAE1E,oBACEL,OAAA,CAACL,UAAU,EAAAmB,aAAA,CAAAA,aAAA,KACLvB,EAAE,CAAC,IAAI,CAACe,KAAK,EAAE;MACjBD,KAAK,EAAE;QACLU,IAAI,EAAEnB,cAAc,CAACoB,WAAW,CAC9BnB,SAAS,CAACJ,kBAAkB,CAACoB,YAAY,CAAC,CAC5C;MACF,CAAC;MACDN,QAAQ,EAAE;QACRQ,IAAI,EAAE,IAAI,CAACR,QAAQ,CAACU,IAAI,CAAC,IAAI;MAC/B,CAAC;MACDC,GAAG,EAAE;QACHH,IAAI,EAAE;MACR;IACF,CAAC,CAAC;MACFI,WAAW,EAAEN;IAAa;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3B,CAAC;EAEN;AACF","ignoreList":[]}