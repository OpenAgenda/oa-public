{"version":3,"file":"Field.js","names":["classNames","flattenFieldLabels","isFieldEnabled","isFieldOptional","hasHelp","FieldCounter","Help","Info","Sub","MultilingualField","TextField","HTMLField","MarkdownField","SlateField","RadioField","SingleSelectField","MultiSelectField","CheckboxField","BooleanField","DateField","FileField","ImageField","jsxDEV","_jsxDEV","FieldComponents","text","integer","number","textarea","link","email","phone","html","markdown","slate","radio","select","multiselect","checkbox","boolean","date","file","image","decoratedByFieldComponent","field","key","_context","_context2","_includesInstanceProperty","call","fieldType","selfHandled","length","getFieldComponent","props","customComponents","CustomComponent","Error","concat","Field","_context3","schemaField","disabled","value","onChange","error","labels","lang","className","relatedValues","role","isMultilingual","Array","isArray","languages","hasMaxCounter","max","FieldComponent","isEnabled","isOptional","enabledError","fieldComponentsProps","enabled","userRole","children","label","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","required","id","help","helpLink","content","helpContent","info","_objectSpread","sub"],"sources":["../../src/Components/Field.js"],"sourcesContent":["import classNames from 'classnames';\n\nimport flattenFieldLabels from '../lib/flatten.js';\nimport isFieldEnabled from '../lib/isFieldEnabled.js';\nimport isFieldOptional from '../lib/isFieldOptional.js';\nimport hasHelp from '../lib/hasHelp.js';\nimport FieldCounter from './FieldCounter.js';\nimport Help from './Help.js';\nimport Info from './Info.js';\nimport Sub from './Sub.js';\nimport MultilingualField from './Multilingual.js';\nimport TextField from './TextField.js';\nimport HTMLField from './HTMLField.js';\nimport MarkdownField from './MarkdownField.js';\nimport SlateField from './SlateField.js';\nimport RadioField from './RadioField.js';\nimport SingleSelectField from './SingleSelectField.js';\nimport MultiSelectField from './MultiSelectField.js';\nimport CheckboxField from './CheckboxField.js';\nimport BooleanField from './BooleanField.js';\nimport DateField from './DateField.js';\nimport FileField from './FileField.js';\nimport ImageField from './ImageField.js';\n\nconst FieldComponents = {\n  text: TextField,\n  integer: TextField,\n  number: TextField,\n  textarea: TextField,\n  link: TextField,\n  email: TextField,\n  phone: TextField,\n  html: HTMLField,\n  markdown: MarkdownField,\n  slate: SlateField,\n  radio: RadioField,\n  select: SingleSelectField,\n  multiselect: MultiSelectField,\n  checkbox: CheckboxField,\n  boolean: BooleanField,\n  date: DateField,\n  file: FileField,\n  image: ImageField,\n};\n\nconst decoratedByFieldComponent = (field, key) => {\n  if (['boolean'].includes(field.fieldType)) return true;\n  if (field.selfHandled.length === 0) return false;\n  return field.selfHandled.includes(key);\n};\n\nfunction getFieldComponent(props) {\n  const {\n    field: { fieldType, field },\n    customComponents = {},\n  } = props;\n\n  const CustomComponent = customComponents[fieldType];\n\n  if (CustomComponent) {\n    return CustomComponent;\n  }\n\n  if (FieldComponents[fieldType]) {\n    return FieldComponents[fieldType];\n  }\n\n  throw new Error(\n    `Field ${field} type has no associated component: ${fieldType}`,\n  );\n}\n\nexport default function Field(props) {\n  const {\n    field: schemaField,\n    disabled,\n    value,\n    onChange,\n    error,\n    labels,\n    lang,\n    className,\n    relatedValues,\n    role,\n  } = props;\n\n  const field = flattenFieldLabels(schemaField, lang);\n  const isMultilingual = Array.isArray(field.languages);\n\n  const hasMaxCounter = field.max\n    && !isMultilingual\n    && !['integer', 'number'].includes(field.fieldType);\n\n  // field is decorated with labels\n\n  const FieldComponent = getFieldComponent(props);\n\n  const isEnabled = isFieldEnabled(field, relatedValues, disabled);\n  const isOptional = isFieldOptional(field, relatedValues);\n\n  const enabledError = isEnabled && error;\n\n  const fieldComponentsProps = {\n    enabled: isEnabled,\n    lang,\n    field,\n    value,\n    error: enabledError,\n    onChange,\n    relatedValues,\n    labels,\n    userRole: role,\n    isOptional,\n  };\n\n  return (\n    <div\n      className={classNames({\n        [className]: true,\n        disabled: !isEnabled,\n        'has-error': !!enabledError,\n        'multilingual-input-field': isMultilingual,\n      })}\n      key={field.field}\n    >\n      {!decoratedByFieldComponent(field, 'label') && field.label ? (\n        <label\n          htmlFor={field.field}\n          className={classNames({\n            'control-label': true,\n            'margin-right-xs': !isOptional || hasHelp(field),\n          })}\n        >\n          {field.label}\n        </label>\n      ) : null}\n      {!decoratedByFieldComponent(field, 'label') && !isOptional ? (\n        <span\n          className={classNames({\n            'margin-right-xs': hasHelp(field),\n            error: !!enabledError,\n          })}\n        >\n          {`(${labels.required})`}\n        </span>\n      )\n        : ''}\n      {!decoratedByFieldComponent(field, 'help') && hasHelp(field) ? (\n        <Help\n          id={`help-${field.field}`}\n          label={field.help}\n          lang={lang}\n          link={field.helpLink}\n          content={field.helpContent}\n        />\n      ) : null}\n      {!decoratedByFieldComponent(field, 'info') ? (\n        <Info value={field.info} />\n      ) : null}\n      {isMultilingual ? (\n        <MultilingualField\n          {...fieldComponentsProps}\n          FieldComponent={FieldComponent}\n        />\n      ) : (\n        <FieldComponent {...fieldComponentsProps} />\n      )}\n      {hasMaxCounter ? <FieldCounter value={value} max={field.max} /> : null}\n      {!isMultilingual && !decoratedByFieldComponent(field, 'sub') ? (\n        <Sub label={field.sub} error={enabledError} FieldCounter />\n      ) : null}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]}