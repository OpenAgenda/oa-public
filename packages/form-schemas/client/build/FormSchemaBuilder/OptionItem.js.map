{"version":3,"file":"OptionItem.js","names":["useCallback","useSortable","makeLabelGetter","getPreferredLang","labels","OptionLabelsForm","jsxDEV","_jsxDEV","getLabel","OptionItem","_ref","field","lang","index","option","otherOptions","onUpdate","onEditCancel","isEdited","actionable","onEdit","onRemove","disableDnD","renderEdit","onSubmit","onCancel","languages","labelLanguages","fileName","_jsxFileName","lineNumber","columnNumber","attributes","listeners","setNodeRef","transform","transition","isDragging","over","id","value","disabled","style","concat","x","y","undefined","zIndex","child","_objectSpread","className","ref","children","htmlFor","label","type","onClick"],"sources":["../../src/FormSchemaBuilder/OptionItem.js"],"sourcesContent":["import { useCallback } from 'react';\nimport { useSortable } from '@dnd-kit/sortable';\nimport makeLabelGetter from '@openagenda/labels/makeLabelGetter.js';\n\nimport getPreferredLang from './lib/getPreferredLang.js';\nimport labels from './lib/labels.js';\nimport OptionLabelsForm from './OptionLabelsForm.js';\n\nconst getLabel = makeLabelGetter(labels);\n\nconst OptionItem = ({\n  field,\n  lang,\n  index,\n  option,\n  otherOptions,\n  onUpdate,\n  onEditCancel,\n  isEdited,\n  actionable,\n  onEdit,\n  onRemove,\n  disableDnD,\n}) => {\n  const renderEdit = useCallback(\n    () => (\n      <OptionLabelsForm\n        index={index}\n        option={option}\n        otherOptions={otherOptions}\n        onSubmit={onUpdate}\n        onCancel={onEditCancel}\n        lang={lang}\n        languages={field.labelLanguages}\n      />\n    ),\n    [\n      field.labelLanguages,\n      index,\n      lang,\n      onEditCancel,\n      onUpdate,\n      option,\n      otherOptions,\n    ],\n  );\n\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n    over,\n  } = useSortable({ id: option.value, disabled: disableDnD });\n\n  const style = {\n    transform: transform\n      ? `translate3d(${transform.x}px, ${transform.y}px, 0)`\n      : undefined,\n    transition,\n    zIndex: isDragging ? 100 : 'auto',\n  };\n\n  const child = (\n    <div\n      className=\"list-group-item draggable\"\n      ref={setNodeRef}\n      style={isDragging || over ? style : null}\n      {...attributes}\n      {...listeners}\n    >\n      <div className=\"list-group-item-content draggable\">\n        {isEdited\n          ? renderEdit()\n          : (\n            <div className=\"margin-left-sm\">\n              <label\n                htmlFor={`option-${option.id}`}\n                className=\"margin-v-xs text-left\"\n              >\n                {getPreferredLang(option.label, lang)}\n              </label>\n              <div className=\"form-item-actions padding-h-xs\">\n                <button\n                  type=\"button\"\n                  id={`option-${option.id}`}\n                  disabled={!actionable}\n                  onClick={() => onEdit(index)}\n                  className=\"btn btn-link\"\n                >\n                  {getLabel('optionEdit', lang)}\n                </button>\n                <button\n                  type=\"button\"\n                  disabled={!actionable}\n                  onClick={onRemove}\n                  className=\"btn btn-link\"\n                >\n                  <span className=\"text text-danger\">\n                    {getLabel('optionRemove', lang)}\n                  </span>\n                </button>\n              </div>\n            </div>\n          )}\n      </div>\n    </div>\n  );\n\n  return child;\n};\n\nexport default OptionItem;\n"],"mappings":";;AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,SAASC,WAAW,QAAQ,mBAAmB;AAC/C,OAAOC,eAAe,MAAM,uCAAuC;AAEnE,OAAOC,gBAAgB,MAAM,2BAA2B;AACxD,OAAOC,MAAM,MAAM,iBAAiB;AACpC,OAAOC,gBAAgB,MAAM,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErD,MAAMC,QAAQ,GAAGN,eAAe,CAACE,MAAM,CAAC;AAExC,MAAMK,UAAU,GAAGC,IAAA,IAab;EAAA,IAbc;IAClBC,KAAK;IACLC,IAAI;IACJC,KAAK;IACLC,MAAM;IACNC,YAAY;IACZC,QAAQ;IACRC,YAAY;IACZC,QAAQ;IACRC,UAAU;IACVC,MAAM;IACNC,QAAQ;IACRC;EACF,CAAC,GAAAZ,IAAA;EACC,MAAMa,UAAU,GAAGvB,WAAW,CAC5B,mBACEO,OAAA,CAACF,gBAAgB;IACfQ,KAAK,EAAEA,KAAM;IACbC,MAAM,EAAEA,MAAO;IACfC,YAAY,EAAEA,YAAa;IAC3BS,QAAQ,EAAER,QAAS;IACnBS,QAAQ,EAAER,YAAa;IACvBL,IAAI,EAAEA,IAAK;IACXc,SAAS,EAAEf,KAAK,CAACgB;EAAe;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACjC,CACF,EACD,CACEpB,KAAK,CAACgB,cAAc,EACpBd,KAAK,EACLD,IAAI,EACJK,YAAY,EACZD,QAAQ,EACRF,MAAM,EACNC,YAAY,CAEhB,CAAC;EAED,MAAM;IACJiB,UAAU;IACVC,SAAS;IACTC,UAAU;IACVC,SAAS;IACTC,UAAU;IACVC,UAAU;IACVC;EACF,CAAC,GAAGrC,WAAW,CAAC;IAAEsC,EAAE,EAAEzB,MAAM,CAAC0B,KAAK;IAAEC,QAAQ,EAAEnB;EAAW,CAAC,CAAC;EAE3D,MAAMoB,KAAK,GAAG;IACZP,SAAS,EAAEA,SAAS,kBAAAQ,MAAA,CACDR,SAAS,CAACS,CAAC,UAAAD,MAAA,CAAOR,SAAS,CAACU,CAAC,cAC5CC,SAAS;IACbV,UAAU;IACVW,MAAM,EAAEV,UAAU,GAAG,GAAG,GAAG;EAC7B,CAAC;EAED,MAAMW,KAAK,gBACTzC,OAAA,QAAA0C,aAAA,CAAAA,aAAA,CAAAA,aAAA;IACEC,SAAS,EAAC,2BAA2B;IACrCC,GAAG,EAAEjB,UAAW;IAChBQ,KAAK,EAAEL,UAAU,IAAIC,IAAI,GAAGI,KAAK,GAAG;EAAK,GACrCV,UAAU,GACVC,SAAS;IAAAmB,QAAA,eAEb7C,OAAA;MAAK2C,SAAS,EAAC,mCAAmC;MAAAE,QAAA,EAC/ClC,QAAQ,GACLK,UAAU,CAAC,CAAC,gBAEZhB,OAAA;QAAK2C,SAAS,EAAC,gBAAgB;QAAAE,QAAA,gBAC7B7C,OAAA;UACE8C,OAAO,YAAAV,MAAA,CAAY7B,MAAM,CAACyB,EAAE,CAAG;UAC/BW,SAAS,EAAC,uBAAuB;UAAAE,QAAA,EAEhCjD,gBAAgB,CAACW,MAAM,CAACwC,KAAK,EAAE1C,IAAI;QAAC;UAAAgB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC,CAAC,eACRxB,OAAA;UAAK2C,SAAS,EAAC,gCAAgC;UAAAE,QAAA,gBAC7C7C,OAAA;YACEgD,IAAI,EAAC,QAAQ;YACbhB,EAAE,YAAAI,MAAA,CAAY7B,MAAM,CAACyB,EAAE,CAAG;YAC1BE,QAAQ,EAAE,CAACtB,UAAW;YACtBqC,OAAO,EAAEA,CAAA,KAAMpC,MAAM,CAACP,KAAK,CAAE;YAC7BqC,SAAS,EAAC,cAAc;YAAAE,QAAA,EAEvB5C,QAAQ,CAAC,YAAY,EAAEI,IAAI;UAAC;YAAAgB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvB,CAAC,eACTxB,OAAA;YACEgD,IAAI,EAAC,QAAQ;YACbd,QAAQ,EAAE,CAACtB,UAAW;YACtBqC,OAAO,EAAEnC,QAAS;YAClB6B,SAAS,EAAC,cAAc;YAAAE,QAAA,eAExB7C,OAAA;cAAM2C,SAAS,EAAC,kBAAkB;cAAAE,QAAA,EAC/B5C,QAAQ,CAAC,cAAc,EAAEI,IAAI;YAAC;cAAAgB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3B;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IACN;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CACN;EAED,OAAOiB,KAAK;AACd,CAAC;AAED,eAAevC,UAAU","ignoreList":[]}