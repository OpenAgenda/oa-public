{"version":3,"file":"restrictLabelLanguages.js","names":["ih","labelKeys","extractFillerLabel","label","languages","length","restrictLabelLanguages","field","_context","arguments","undefined","restricted","_reduceInstanceProperty","filter","labelKey","call","updates","currentLabelLanguages","Object","keys","fillerLabel","_objectSpread","$set","labelValue","language","_includesInstanceProperty","options","map","o","applyToSchema","schema","_schema$fields","fields","f","assign"],"sources":["../../../src/FormSchemaBuilder/lib/restrictLabelLanguages.js"],"sourcesContent":["import ih from 'immutability-helper';\nimport labelKeys from './labelKeys.js';\n\nfunction extractFillerLabel(label, languages) {\n  if (languages.length) {\n    return label[languages[0]];\n  }\n\n  if (typeof label === 'string') {\n    return label;\n  }\n}\n\nfunction restrictLabelLanguages(field, languages = []) {\n  const restricted = ih(\n    field ?? {},\n    labelKeys\n      .filter((labelKey) => field?.[labelKey])\n      .reduce((updates, labelKey) => {\n        const currentLabelLanguages = typeof field[labelKey] === 'string'\n          ? []\n          : Object.keys(field[labelKey]);\n\n        const fillerLabel = extractFillerLabel(\n          field[labelKey],\n          currentLabelLanguages,\n        );\n\n        return {\n          ...updates,\n          [labelKey]: {\n            $set: languages.length\n              ? languages.reduce(\n                (labelValue, language) => ({\n                  ...labelValue,\n                  [language]: currentLabelLanguages.includes(language)\n                    ? field[labelKey][language]\n                    : fillerLabel,\n                }),\n                {},\n              )\n              : fillerLabel,\n          },\n        };\n      }, {}),\n  );\n\n  if (restricted.options) {\n    restricted.options = restricted.options.map((o) =>\n      restrictLabelLanguages(o, languages));\n  }\n\n  return restricted;\n}\n\nfunction applyToSchema(schema, languages = []) {\n  if ((!schema?.fields ?? []).length) {\n    return schema;\n  }\n\n  return ih(schema, {\n    fields: {\n      $set: schema.fields.map((f) => restrictLabelLanguages(f, languages)),\n    },\n  });\n}\n\nexport default Object.assign(restrictLabelLanguages, {\n  applyToSchema,\n});\n"],"mappings":";;;AAAA,OAAOA,EAAE,MAAM,qBAAqB;AACpC,OAAOC,SAAS,MAAM,gBAAgB;AAEtC,SAASC,kBAAkBA,CAACC,KAAK,EAAEC,SAAS,EAAE;EAC5C,IAAIA,SAAS,CAACC,MAAM,EAAE;IACpB,OAAOF,KAAK,CAACC,SAAS,CAAC,CAAC,CAAC,CAAC;EAC5B;EAEA,IAAI,OAAOD,KAAK,KAAK,QAAQ,EAAE;IAC7B,OAAOA,KAAK;EACd;AACF;AAEA,SAASG,sBAAsBA,CAACC,KAAK,EAAkB;EAAA,IAAAC,QAAA;EAAA,IAAhBJ,SAAS,GAAAK,SAAA,CAAAJ,MAAA,QAAAI,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,EAAE;EACnD,MAAME,UAAU,GAAGX,EAAE,CACnBO,KAAK,aAALA,KAAK,cAALA,KAAK,GAAI,CAAC,CAAC,EACXK,uBAAA,CAAAJ,QAAA,GAAAP,SAAS,CACNY,MAAM,CAAEC,QAAQ,IAAKP,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAGO,QAAQ,CAAC,CAAC,EAAAC,IAAA,CAAAP,QAAA,EAChC,CAACQ,OAAO,EAAEF,QAAQ,KAAK;IAC7B,MAAMG,qBAAqB,GAAG,OAAOV,KAAK,CAACO,QAAQ,CAAC,KAAK,QAAQ,GAC7D,EAAE,GACFI,MAAM,CAACC,IAAI,CAACZ,KAAK,CAACO,QAAQ,CAAC,CAAC;IAEhC,MAAMM,WAAW,GAAGlB,kBAAkB,CACpCK,KAAK,CAACO,QAAQ,CAAC,EACfG,qBACF,CAAC;IAED,OAAAI,aAAA,CAAAA,aAAA,KACKL,OAAO;MACV,CAACF,QAAQ,GAAG;QACVQ,IAAI,EAAElB,SAAS,CAACC,MAAM,GAClBO,uBAAA,CAAAR,SAAS,EAAAW,IAAA,CAATX,SAAS,EACT,CAACmB,UAAU,EAAEC,QAAQ,KAAAH,aAAA,CAAAA,aAAA,KAChBE,UAAU;UACb,CAACC,QAAQ,GAAGC,yBAAA,CAAAR,qBAAqB,EAAAF,IAAA,CAArBE,qBAAqB,EAAUO,QAAQ,CAAC,GAChDjB,KAAK,CAACO,QAAQ,CAAC,CAACU,QAAQ,CAAC,GACzBJ;QAAW,EACf,EACF,CAAC,CACH,CAAC,GACCA;MACN;IAAC;EAEL,CAAC,EAAE,CAAC,CAAC,CACT,CAAC;EAED,IAAIT,UAAU,CAACe,OAAO,EAAE;IACtBf,UAAU,CAACe,OAAO,GAAGf,UAAU,CAACe,OAAO,CAACC,GAAG,CAAEC,CAAC,IAC5CtB,sBAAsB,CAACsB,CAAC,EAAExB,SAAS,CAAC,CAAC;EACzC;EAEA,OAAOO,UAAU;AACnB;AAEA,SAASkB,aAAaA,CAACC,MAAM,EAAkB;EAAA,IAAAC,cAAA;EAAA,IAAhB3B,SAAS,GAAAK,SAAA,CAAAJ,MAAA,QAAAI,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,EAAE;EAC3C,IAAI,EAAAsB,cAAA,GAAC,EAACD,MAAM,aAANA,MAAM,eAANA,MAAM,CAAEE,MAAM,eAAAD,cAAA,cAAAA,cAAA,GAAI,EAAE,EAAE1B,MAAM,EAAE;IAClC,OAAOyB,MAAM;EACf;EAEA,OAAO9B,EAAE,CAAC8B,MAAM,EAAE;IAChBE,MAAM,EAAE;MACNV,IAAI,EAAEQ,MAAM,CAACE,MAAM,CAACL,GAAG,CAAEM,CAAC,IAAK3B,sBAAsB,CAAC2B,CAAC,EAAE7B,SAAS,CAAC;IACrE;EACF,CAAC,CAAC;AACJ;AAEA,eAAec,MAAM,CAACgB,MAAM,CAAC5B,sBAAsB,EAAE;EACnDuB;AACF,CAAC,CAAC","ignoreList":[]}