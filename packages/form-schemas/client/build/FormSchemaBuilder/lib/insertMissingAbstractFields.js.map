{"version":3,"file":"insertMissingAbstractFields.js","names":["ih","isSameFormItem","getFormItemSlug","insertMissingAbstractFields","schema","updatedMerge","fields","$set","map","f","_schema$fields","index","_findIndex","sf","field","slug","type","fieldType"],"sources":["../../../src/FormSchemaBuilder/lib/insertMissingAbstractFields.js"],"sourcesContent":["import _ from 'lodash';\nimport ih from 'immutability-helper';\n\nimport isSameFormItem from './isSameFormItem.js';\nimport getFormItemSlug from './getFormItemSlug.js';\n\nexport default function insertMissingAbstractFields(schema, updatedMerge) {\n  return ih(schema ?? { fields: [] }, {\n    fields: {\n      $set: updatedMerge.fields.map((f) => {\n        const index = _.findIndex(schema?.fields ?? [], (sf) =>\n          isSameFormItem(f, sf));\n\n        if (index === -1) {\n          return {\n            field: getFormItemSlug(f),\n            slug: getFormItemSlug(f),\n            type: 'abstract',\n            fieldType: 'abstract',\n          };\n        }\n\n        return schema.fields[index];\n      }),\n    },\n  });\n}\n"],"mappings":";AACA,OAAOA,EAAE,MAAM,qBAAqB;AAEpC,OAAOC,cAAc,MAAM,qBAAqB;AAChD,OAAOC,eAAe,MAAM,sBAAsB;AAElD,eAAe,SAASC,2BAA2BA,CAACC,MAAM,EAAEC,YAAY,EAAE;EACxE,OAAOL,EAAE,CAACI,MAAM,aAANA,MAAM,cAANA,MAAM,GAAI;IAAEE,MAAM,EAAE;EAAG,CAAC,EAAE;IAClCA,MAAM,EAAE;MACNC,IAAI,EAAEF,YAAY,CAACC,MAAM,CAACE,GAAG,CAAEC,CAAC,IAAK;QAAA,IAAAC,cAAA;QACnC,MAAMC,KAAK,GAAGC,UAAA,EAAAF,cAAA,GAAYN,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEE,MAAM,cAAAI,cAAA,cAAAA,cAAA,GAAI,EAAE,EAAGG,EAAE,IACjDZ,cAAc,CAACQ,CAAC,EAAEI,EAAE,CAAC,CAAC;QAExB,IAAIF,KAAK,KAAK,CAAC,CAAC,EAAE;UAChB,OAAO;YACLG,KAAK,EAAEZ,eAAe,CAACO,CAAC,CAAC;YACzBM,IAAI,EAAEb,eAAe,CAACO,CAAC,CAAC;YACxBO,IAAI,EAAE,UAAU;YAChBC,SAAS,EAAE;UACb,CAAC;QACH;QAEA,OAAOb,MAAM,CAACE,MAAM,CAACK,KAAK,CAAC;MAC7B,CAAC;IACH;EACF,CAAC,CAAC;AACJ","ignoreList":[]}