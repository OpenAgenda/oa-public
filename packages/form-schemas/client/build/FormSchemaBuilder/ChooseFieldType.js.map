{"version":3,"file":"ChooseFieldType.js","names":["useCallback","isInteger","makeLabelGetter","FormSchemaComponent","labels","jsxDEV","_jsxDEV","getLabel","fieldTypeChoices","id","value","label","textFieldType","textareaFieldType","markdownFieldType","info","markdownFieldTypeInfo","integerFieldType","linkFieldType","emailFieldType","phoneFieldType","booleanFieldType","booleanFieldTypeInfo","checkboxFieldType","checkboxFieldTypeInfo","multiselectFieldType","multiselectFieldTypeInfo","radioFieldType","radioFieldTypeInfo","selectFieldType","selectFieldTypeInfo","dateFieldType","dateFieldTypeInfo","sectionType","sectionTypeInfo","flatChoices","lang","map","c","_c$info","_c$info2","_objectSpread","en","getFieldType","valueOrId","find","choice","ChosenType","_ref","onReset","children","fileName","_jsxFileName","lineNumber","columnNumber","className","type","onClick","ChooseFieldType","_ref2","onChange","propsOnChange","fieldTypeChoice","_valuesInstanceProperty","fieldType","stateless","values","schema","fields","field","placeholder","optional","options","actionComponents","position","Component"],"sources":["../../src/FormSchemaBuilder/ChooseFieldType.js"],"sourcesContent":["import { useCallback } from 'react';\nimport isInteger from '@openagenda/utils/isInteger.js';\n\nimport makeLabelGetter from '@openagenda/labels/makeLabelGetter.js';\n\nimport FormSchemaComponent from '../index.js';\nimport labels from './lib/labels.js';\n\nconst getLabel = makeLabelGetter(labels);\n\nconst fieldTypeChoices = [\n  {\n    id: 1,\n    value: 'text',\n    label: labels.textFieldType,\n  },\n  {\n    id: 4,\n    value: 'textarea',\n    label: labels.textareaFieldType,\n  },\n  {\n    id: 5,\n    value: 'markdown',\n    label: labels.markdownFieldType,\n    info: labels.markdownFieldTypeInfo,\n  },\n  {\n    id: 6,\n    value: 'integer',\n    label: labels.integerFieldType,\n  },\n  {\n    id: 10,\n    value: 'link',\n    label: labels.linkFieldType,\n  },\n  {\n    id: 9,\n    value: 'email',\n    label: labels.emailFieldType,\n  },\n  {\n    id: 15,\n    value: 'phone',\n    label: labels.phoneFieldType,\n  },\n  {\n    id: 7,\n    value: 'boolean',\n    label: labels.booleanFieldType,\n    info: labels.booleanFieldTypeInfo,\n  },\n  {\n    id: 3,\n    value: 'checkbox',\n    label: labels.checkboxFieldType,\n    info: labels.checkboxFieldTypeInfo,\n  },\n  {\n    id: 12,\n    value: 'multiselect',\n    label: labels.multiselectFieldType,\n    info: labels.multiselectFieldTypeInfo,\n  },\n  {\n    id: 2,\n    value: 'radio',\n    label: labels.radioFieldType,\n    info: labels.radioFieldTypeInfo,\n  },\n  {\n    id: 11,\n    value: 'select',\n    label: labels.selectFieldType,\n    info: labels.selectFieldTypeInfo,\n  },\n  {\n    id: 13,\n    value: 'date',\n    label: labels.dateFieldType,\n    info: labels.dateFieldTypeInfo,\n  },\n  {\n    id: 14,\n    value: 'section',\n    label: labels.sectionType,\n    info: labels.sectionTypeInfo,\n  },\n];\n\nconst flatChoices = (lang) =>\n  fieldTypeChoices.map((c) => ({\n    ...c,\n    label: c.label[lang] || c.label.en,\n    info: c.info?.[lang] || c.info?.en,\n  }));\n\nconst getFieldType = (valueOrId) =>\n  fieldTypeChoices.find(\n    (choice) => choice[isInteger(valueOrId) ? 'id' : 'value'] === valueOrId,\n  );\n\nconst ChosenType = ({ lang, value, onReset }) => {\n  const { label, info } = getFieldType(value);\n\n  return (\n    <div>\n      <div>{label[lang]}</div>\n      {info ? <div className=\"text-muted\">{info[lang]}</div> : null}\n      <button\n        type=\"button\"\n        className=\"btn btn-link padding-all-z\"\n        onClick={onReset}\n      >\n        {getLabel('chooseOtherType', lang)}\n      </button>\n    </div>\n  );\n};\n\nexport default function ChooseFieldType({\n  value,\n  onChange: propsOnChange,\n  lang,\n}) {\n  const onChange = useCallback(\n    (choice) => {\n      if (!choice) {\n        propsOnChange(null);\n        return;\n      }\n      const fieldTypeChoice = getFieldType(choice.values.fieldType);\n      propsOnChange(fieldTypeChoice.value);\n    },\n    [propsOnChange],\n  );\n\n  if (value) {\n    return (\n      <ChosenType\n        onReset={() => onChange(null)}\n        value={value}\n        lang={lang}\n        onChange={onChange}\n      />\n    );\n  }\n\n  return (\n    <FormSchemaComponent\n      stateless\n      values={value ? { fieldType: getFieldType(value).id } : {}}\n      onChange={onChange}\n      schema={{\n        fields: [\n          {\n            field: 'fieldType',\n            placeholder: getLabel('chooseFieldTypePlaceholder', lang),\n            fieldType: 'select',\n            label: getLabel('chooseFieldType', lang),\n            optional: false,\n            options: flatChoices(lang),\n          },\n        ],\n      }}\n      actionComponents={[\n        {\n          position: 'bottom',\n          Component: () => null,\n        },\n      ]}\n    />\n  );\n}\n"],"mappings":"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","ignoreList":[]}