{"version":3,"file":"utils.js","names":["makeLabelGetter","getLocaleValue","labels","Fragment","_Fragment","jsxDEV","_jsxDEV","isFieldLinked","field","enableWith","optionalWith","isFieldEditable","_ref","isOwn","editableExtensions","Array","isArray","_includesInstanceProperty","call","isFieldMultilingual","_ref2","languages","isFieldOptional","_field$optional","optional","isFieldDisplayed","_field$display","display","getLabel","getDefaultValueLabel","lang","default","fieldType","map","value","option","options","find","obj","id","label","join","Object","values","defaultValue","specificValuesFromOptions","getLinkedField","arguments","length","undefined","schema","linkType","fields","el","getFieldTypeIcon","has","className","allowItemDisplayToggle","_context","isAccessUndefined","read","write","getFieldAccess","_field$write","_field$read","multilingual","administrator","moderator","contributor","writeFieldAccess","access","readFieldAccess","children","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["../../../src/FormSchemaBuilder/FieldPreview/utils.js"],"sourcesContent":["import makeLabelGetter from '@openagenda/labels/makeLabelGetter.js';\nimport { getLocaleValue } from '@openagenda/intl';\n\nimport labels from '../lib/labels.js';\n\nexport const isFieldLinked = (field) => {\n  if (field.enableWith || field.optionalWith) {\n    return true;\n  }\n};\n\nexport const isFieldEditable = (field, { isOwn, editableExtensions }) => {\n  if (isOwn) {\n    return true;\n  }\n\n  if (Array.isArray(editableExtensions)) {\n    return editableExtensions.includes(field.field);\n  }\n\n  return editableExtensions;\n};\n\nexport const isFieldMultilingual = ({ languages }) =>\n  !!Array.isArray(languages);\n\nexport const isFieldOptional = (field) => field?.optional ?? true;\n\nexport const isFieldDisplayed = (field) => field?.display ?? true;\n\nexport const getLabel = makeLabelGetter(labels);\n\nexport function getDefaultValueLabel(field, lang) {\n  if (typeof field.default === 'string') {\n    return getLocaleValue(field.default, lang);\n  }\n\n  if (typeof field.default === 'boolean') {\n    if (field.default === true) {\n      return getLabel('isSelected', lang);\n    }\n    return getLabel('notSelected', lang);\n  }\n  if (Array.isArray(field.default)) {\n    if (field.fieldType === 'checkbox') {\n      return field.default\n        .map((value) => {\n          const option = field.options.find((obj) => obj.id === value);\n          return getLocaleValue(option.label, lang);\n        })\n        .join(', ');\n    }\n  }\n  if (field.default !== null && typeof field.default === 'object') {\n    return Object.values(field.default).join(', ');\n  }\n\n  const defaultValue = field.default;\n\n  if (field.options) {\n    const specificValuesFromOptions = field.options.find(\n      (obj) => obj.id === defaultValue,\n    );\n    return getLocaleValue(specificValuesFromOptions.label, lang);\n  }\n\n  return defaultValue;\n}\n\nexport function getLinkedField(options = {}) {\n  const { field, schema } = options;\n\n  const { linkType = field.enableWith ? 'enableWith' : 'optionalWith' } = options;\n\n  if (!field[linkType]) {\n    return null;\n  }\n\n  if (typeof field[linkType] === 'string') {\n    return schema.fields.find((el) => el.field === field[linkType]);\n  }\n\n  return schema.fields.find((el) => el.field === field[linkType].field);\n}\n\nexport function getFieldTypeIcon(field) {\n  if (field.fieldType === 'languages') {\n    return {\n      has: false,\n    };\n  }\n\n  return {\n    has: true,\n    className: field.fieldType,\n  };\n}\n\nexport function allowItemDisplayToggle(field) {\n  if (!isFieldDisplayed(field)) {\n    return true;\n  }\n\n  if (isFieldOptional(field)) {\n    return true;\n  }\n\n  if (![undefined, null].includes(field.default)) {\n    return true;\n  }\n\n  return false;\n}\n\nexport const isAccessUndefined = (field) => !field.read && !field.write;\nexport function getFieldAccess(field, lang) {\n  const multilingual = {\n    administrator: getLabel('adminAccess', lang),\n    moderator: getLabel('moderatorAccess', lang),\n    contributor: getLabel('contributorAccess', lang),\n  };\n\n  const writeFieldAccess = field?.write\n    ?.map((access) => multilingual[access])\n    .join(', ');\n  const readFieldAccess = field?.read\n    ?.map((access) => multilingual[access])\n    .join(', ');\n\n  if (field.write && !field.read) {\n    return (\n      <>\n        {getLabel('writeAccess', lang)}: {writeFieldAccess}\n      </>\n    );\n  }\n  if (field.read && !field.write) {\n    return (\n      <>\n        {getLabel('readAccess', lang)}: {readFieldAccess}\n      </>\n    );\n  }\n  if (field.write && field.read) {\n    return (\n      <>\n        <span>\n          {getLabel('readAccess', lang)}: {readFieldAccess}\n        </span>\n        <span> / </span>\n        <span>\n          {getLabel('writeAccess', lang)}: {writeFieldAccess}\n        </span>\n      </>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}