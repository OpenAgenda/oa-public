{"version":3,"file":"ExportModal.js","names":["Component","sa","Form","Field","moment","formatDistanceToNow","fr","en","flattenLabels","Modal","jsxDEV","_jsxDEV","Fragment","_Fragment","locales","ExportModal","constructor","props","_this","this","_defineProperty","date","locale","send","then","body","setState","service","open","data","method","res","arguments","length","undefined","agendaUid","prefix","templateName","from","to","loading","request","concat","query","toISOString","split","shift","_ref","_Promise","resolve","labels","limitDates","state","onSubmit","queue","initialValues","templates","name","render","_ref2","handleSubmit","invalid","children","className","htmlFor","style","color","id","type","checked","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","format","value","parse","startOf","validate","values","isAfter","fromBeforeToError","_ref3","input","meta","display","_objectSpread","autoComplete","touched","error","endOf","isBefore","toAfterFromError","_ref4","template","map","component","disabled","generate","asPrimary","launch","renderGenerateForm","or","bind","renderQueueControl","componentDidMount","onClose","hasFile","file","isQueued","queued","svcState","_get","title","modalTitle","href","path","rel","download","lastUpdate","dateToString","createdAt","noFileAvailable","downloadInfo","modalLink","launchFromTemplate"],"sources":["../src/ExportModal.js"],"sourcesContent":["import _ from 'lodash';\nimport { Component } from 'react';\nimport sa from 'superagent';\nimport { Form, Field } from 'react-final-form';\nimport moment from 'moment';\nimport { formatDistanceToNow } from 'date-fns';\nimport fr from 'date-fns/locale/fr';\nimport en from 'date-fns/locale/en-US';\nimport flattenLabels from './utils/flattenLabels.js';\nimport Modal from './Modal.js';\n\nconst locales = { fr, en };\n\nexport default class ExportModal extends Component {\n  static defaultProps = {\n    labels: {\n      modalLink: {\n        en: 'Microsoft Word',\n        fr: 'Microsoft Word',\n      },\n      modalTitle: {\n        en: 'Word export',\n        fr: 'Export word',\n      },\n      download: {\n        en: 'Download the available file',\n        fr: 'Téléchargez le fichier disponible',\n      },\n      lastUpdate: {\n        en: 'Last update',\n        fr: 'Dernière mise à jour',\n      },\n      noFileAvailable: {\n        en: 'No file is available for download yet',\n        fr: \"Aucun fichier n'est encore disponible au téléchargement\",\n      },\n      queued: {\n        en: 'Your request has been queued and your file will be available shortly. Please check this menu again in a short while',\n        fr: 'Votre demande est en cours de traitement. Rechargez ce menu dans quelques instants.',\n      },\n      launch: {\n        en: 'Generate a new word file',\n        fr: 'Générez un nouveau fichier word',\n      },\n      launchFromTemplate: {\n        en: 'Generate a new word file from the template:',\n        fr: 'Générez un nouveau fichier word à partir du gabarit :',\n      },\n      downloadInfo: {\n        en: 'Update the table of content the first time you open the file with a right click on the table of content segment followed with a click on \"Update\"',\n        fr: 'Mettez à jour le sommaire lors de la première ouverture du fichier en cliquant-droit dessus puis en selectionnant \"Mettre à jour l\\'index\"',\n      },\n      or: {\n        en: 'Or',\n        fr: 'Ou',\n      },\n      from: {\n        en: 'from',\n        fr: 'du',\n      },\n      to: {\n        en: 'to',\n        fr: 'au',\n      },\n      template: {\n        en: 'Template:',\n        fr: 'Gabarit :',\n      },\n      generate: {\n        en: 'Generate',\n        fr: 'Générer',\n      },\n      toAfterFromError: {\n        en: 'The start date must be before the end date.',\n        fr: 'La date de début doit être avant la date de fin.',\n      },\n      fromBeforeToError: {\n        en: 'The end date must be after the start date.',\n        fr: 'La date de fin doit être après la date de début.',\n      },\n      limitDates: {\n        en: 'Limit dates',\n        fr: 'Limiter les dates',\n      },\n    },\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      open: false,\n      service: null,\n      loading: false,\n      labels: flattenLabels(props.labels, props.locale),\n      limitDates: false,\n    };\n\n    this.open = this.open.bind(this);\n    this.queue = this.queue.bind(this);\n    this.send = this.send.bind(this);\n    this.renderGenerateForm = this.renderGenerateForm.bind(this);\n    this.renderQueueControl = this.renderQueueControl.bind(this);\n  }\n\n  componentDidMount() {\n    this.open();\n  }\n\n  dateToString = (date) => {\n    const { locale } = this.props;\n\n    return formatDistanceToNow(date, { locale: locales[locale] });\n  };\n\n  open = () => {\n    this.send('get', '/state').then((body) => {\n      this.setState({ service: body, open: true });\n    });\n  };\n\n  queue = (data) => {\n    this.send('post', '/queue', data).then((body) => {\n      this.setState({ service: body });\n    });\n  };\n\n  send = (method, res, data = {}) => {\n    const { agendaUid, res: prefix } = this.props;\n    const { templateName, from, to } = data;\n\n    this.setState({ loading: true });\n\n    const request = sa[method](`${prefix}/${agendaUid}${res}`);\n\n    if (templateName) {\n      request.query({ templateName });\n    }\n\n    if (from) {\n      request.query({\n        from: from.toISOString().split('T').shift(),\n      });\n    }\n\n    if (to) {\n      request.query({\n        to: to.toISOString().split('T').shift(),\n      });\n    }\n\n    return request.then(\n      ({ body }) =>\n        new Promise((resolve) =>\n          this.setState({ loading: false }, () => resolve(body))),\n    );\n  };\n\n  renderGenerateForm = () => {\n    const { labels, service, limitDates } = this.state;\n\n    return (\n      <Form\n        onSubmit={this.queue}\n        initialValues={{\n          templateName:\n            service.templates && service.templates.length\n              ? service.templates[0].name\n              : undefined,\n        }}\n        render={({ handleSubmit, invalid }) => (\n          <form onSubmit={handleSubmit}>\n            <div className=\"checkbox\">\n              <label htmlFor=\"limitDates\" style={{ color: 'inherit' }}>\n                <input\n                  id=\"limitDates\"\n                  type=\"checkbox\"\n                  checked={limitDates}\n                  onChange={(e) =>\n                    this.setState({ limitDates: e.target.checked })}\n                />\n                {labels.limitDates}\n              </label>\n            </div>\n\n            {limitDates && (\n              <>\n                <Field\n                  name=\"from\"\n                  type=\"date\"\n                  format={(value) => value && value.format('YYYY-MM-DD')}\n                  parse={(value) => value && moment(value).startOf('day')}\n                  validate={(value, values) => {\n                    if (values.to && moment(value).isAfter(values.to)) {\n                      return labels.fromBeforeToError;\n                    }\n                  }}\n                >\n                  {({ input, meta }) => (\n                    <div className=\"form-group margin-all-sm\">\n                      {labels.from}{' '}\n                      <div style={{ display: 'inline-block' }}>\n                        <input\n                          {...input}\n                          className=\"form-control\"\n                          autoComplete=\"off\"\n                        />\n                      </div>\n                      {meta.touched && meta.error && (\n                        <div className=\"text-danger\">{meta.error}</div>\n                      )}\n                    </div>\n                  )}\n                </Field>\n\n                <Field\n                  name=\"to\"\n                  type=\"date\"\n                  format={(value) => value && value.format('YYYY-MM-DD')}\n                  parse={(value) => value && moment(value).endOf('day')}\n                  validate={(value, values) => {\n                    if (values.from && moment(value).isBefore(values.from)) {\n                      return labels.toAfterFromError;\n                    }\n                  }}\n                >\n                  {({ input, meta }) => (\n                    <div className=\"form-group margin-bottom-sm margin-h-sm\">\n                      {labels.to}{' '}\n                      <div style={{ display: 'inline-block' }}>\n                        <input\n                          {...input}\n                          className=\"form-control\"\n                          autoComplete=\"off\"\n                        />\n                      </div>\n                      {meta.touched && meta.error && (\n                        <div className=\"text-danger\">{meta.error}</div>\n                      )}\n                    </div>\n                  )}\n                </Field>\n              </>\n            )}\n\n            {service.templates && service.templates.length ? (\n              <>\n                <p className=\"margin-top-sm\">{labels.template}</p>\n\n                <div className=\"form-group\">\n                  {service.templates.map((template) => (\n                    <div className=\"radio\" key={template.name}>\n                      <label\n                        htmlFor=\"templateName\"\n                        style={{ color: 'inherit' }}\n                      >\n                        <Field\n                          id=\"templateName\"\n                          name=\"templateName\"\n                          component=\"input\"\n                          type=\"radio\"\n                          value={template.name}\n                        />{' '}\n                        {template.name}\n                      </label>\n                    </div>\n                  ))}\n                </div>\n              </>\n            ) : null}\n\n            <div>\n              <button\n                type=\"submit\"\n                className=\"btn btn-primary\"\n                disabled={invalid}\n              >\n                {labels.generate}\n              </button>\n            </div>\n          </form>\n        )}\n      />\n    );\n  };\n\n  renderQueueControl = (asPrimary = false) => {\n    const { labels } = this.state;\n\n    if (asPrimary) {\n      return (\n        <div className=\"text-center margin-v-md\">\n          <div>{labels.launch}</div>\n\n          {this.renderGenerateForm()}\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"text-center\">\n        <div className=\"margin-bottom-sm label-or\">{labels.or}</div>\n        <div>{labels.launch}</div>\n\n        {this.renderGenerateForm()}\n      </div>\n    );\n  };\n\n  render() {\n    const { onClose } = this.props;\n    const { open, service, labels } = this.state;\n\n    const hasFile = service && service.file.name;\n    const isQueued = service && service.queued;\n\n    const svcState = _.get(this.state, 'service', {});\n\n    if (!open) {\n      return null;\n    }\n\n    return (\n      <Modal title={labels.modalTitle} onClose={onClose}>\n        <div className=\"text-center margin-v-md\">\n          {hasFile ? (\n            <div>\n              <div>\n                <a\n                  className=\"btn btn-primary\"\n                  href={svcState.file.path}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {labels.download}\n                  <sup>(1)</sup>\n                </a>\n              </div>\n              <small>\n                {labels.lastUpdate}:{' '}\n                {this.dateToString(svcState.file.createdAt)}\n              </small>\n            </div>\n          ) : (\n            <p>{labels.noFileAvailable}</p>\n          )}\n        </div>\n        {isQueued ? <p>{labels.queued}</p> : this.renderQueueControl(!hasFile)}\n        {hasFile ? (\n          <div className=\"margin-top-md\">\n            <sup>(1)</sup> : <span>{labels.downloadInfo}</span>\n          </div>\n        ) : null}\n      </Modal>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}