{"version":3,"sources":["../../src/contexts/FiltersAndWidgetsContext.js","../../src/messages/map.js","../../src/components/fields/MapField/SearchHereControl.js","../../src/components/fields/MapField/Map.js","../../src/components/FiltersManager.js","../../src/api/getEvents.js","../../src/utils/minimizeAggregation.js","../../src/utils/filtersToAggregations.js","../../src/utils/getQuerySeparator.js","../../src/utils/dateRanges.js","../../src/utils/extractFiltersFromDom.js","../../src/utils/extractWidgetsFromDom.js","../../src/utils/withDefaultFilterConfig.js","../../src/messages/relative.js","../../src/messages/attendanceMode.js","../../src/messages/provenance.js","../../src/messages/featured.js","../../src/messages/state.js","../../src/messages/status.js","../../src/messages/boolean.js","../../src/messages/accessibilities.js","../../src/utils/getFilterTitle.js","../../src/messages/filterTitles.js","../../src/hooks/useActiveFilters.js","../../src/utils/staticRangesFirst.js","../../src/utils/customFirst.js","../../src/components/filters/DateRangeFilter.js","../../src/components/fields/DateRangePicker.js","../../src/utils/convertPhpDateFormatToDateFns.js","../../src/hooks/useLoadTimingsData.js","../../src/components/Title.js","../../src/hooks/useFilterTitle.js","../../src/components/Panel.js","../../src/components/ValueBadge.js","../../src/components/FilterPreviewer.js","../../src/utils/matchQuery.js","../../src/utils/matchFilter.js","../../src/hooks/useChoiceState.js","../../src/hooks/useFavoritesOnChange.js","../../src/utils/updateFormValues.js","../../src/hooks/useFavoriteState.js","../../src/hooks/useGetFilterOptions.js","../../src/hooks/useGetTotal.js","../../src/hooks/useLoadGeoData.js","../../src/hooks/index.js","../../src/components/Filters.js","../../src/components/filters/SimpleDateRangeFilter.js","../../src/components/fields/SimpleDateRangeField.js","../../src/components/filters/NumberRangeFilter.js","../../src/components/fields/NumberRangeField.js","../../src/components/filters/ChoiceFilter.js","../../src/components/fields/ChoiceField.js","../../src/messages/choiceFilter.js","../../src/components/filters/DefinedRangeFilter.js","../../src/components/fields/DefinedRangeField.js","../../src/components/filters/SearchFilter.js","../../src/components/fields/SearchInput.js","../../src/components/filters/MapFilter.js","../../src/components/fields/MapField/index.js","../../src/components/fields/MapField/LoadableMap.js","../../src/components/fields/MapField/mapStyle.js","../../src/components/filters/CustomFilter.js","../../src/utils/updateCustomFilter.js","../../src/components/filters/FavoritesFilter.js","../../src/components/filters/TimelineFilter.js","../../src/components/fields/TimelineField.js","../../src/components/ActiveFilters.js","../../src/components/FavoriteToggle.js","../../src/components/Total.js"],"sourcesContent":["import { createContext } from 'react';\n\nconst FiltersAndWidgetsContext = createContext({\n  filters: [],\n  widgets: [],\n  setFilters: () => {},\n  setWidgets: () => {},\n  filtersOptions: {},\n});\n\nexport default FiltersAndWidgetsContext;\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  searchHere: {\n    id: 'ReactFilters.messages.map.searchHere',\n    defaultMessage: 'Search here',\n  },\n});\n","import { css } from '@emotion/react';\nimport { useIntl } from 'react-intl';\nimport mapMessages from '../../../messages/map.js';\n\nexport default function SearchHereControl({ searchHere }) {\n  const intl = useIntl();\n\n  return (\n    <div\n      css={css`\n        position: absolute;\n        bottom: 20px;\n        left: 50%;\n        transform: translateX(-50%);\n        white-space: nowrap;\n        z-index: 400;\n      `}\n    >\n      <button\n        type=\"button\"\n        onClick={searchHere}\n        css={css`\n          outline: none;\n          overflow: hidden;\n          transition-duration: 0.2s;\n          cursor: pointer;\n          background: white;\n          height: 24px;\n          border-radius: 16px;\n          padding: 0px 12px;\n          box-shadow: rgba(0, 0, 0, 0.16) 0px 2px 8px 0px;\n          border: 0px;\n\n          &:hover {\n            background-color: #f3f3f3;\n          }\n\n          &:active {\n            background-color: #eaeaea;\n          }\n        `}\n      >\n        {intl.formatMessage(mapMessages.searchHere)}\n      </button>\n    </div>\n  );\n}\n","import React, {\n  useCallback,\n  useContext,\n  useImperativeHandle,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport cn from 'classnames';\nimport {\n  MapContainer,\n  Marker,\n  TileLayer,\n  useMapEvents,\n  useMap,\n} from 'react-leaflet';\nimport L from 'leaflet';\nimport { useIntl } from 'react-intl';\nimport '@openagenda/leaflet-gesture-handling';\nimport { useForm } from 'react-final-form';\nimport FiltersAndWidgetsContext from '../../../contexts/FiltersAndWidgetsContext.js';\nimport SearchHereControl from './SearchHereControl.js';\n\nconst padRatio = 0.2;\nconst unpadRatio = -(1 / ((1 + padRatio + padRatio) / padRatio));\n\nconst worldViewport = {\n  bottomRight: {\n    latitude: -90,\n    longitude: 180,\n  },\n  topLeft: {\n    latitude: 90,\n    longitude: -180,\n  },\n};\n\nfunction loadGestureHandlingLocale(gestureHandling, locale) {\n  import(`@openagenda/leaflet-gesture-handling/dist/locales/${locale}.js`)\n    .then((m) => {\n      const content = m.default || m;\n      const scrollWarning = gestureHandling._isMacUser()\n        ? content.scrollMac\n        : content.scroll;\n      gestureHandling._map._container.setAttribute(\n        'data-gesture-handling-touch-content',\n        content.touch,\n      );\n      gestureHandling._map._container.setAttribute(\n        'data-gesture-handling-scroll-content',\n        scrollWarning,\n      );\n      gestureHandling._touchWarning = content.touch;\n      gestureHandling._scrollWarning = scrollWarning;\n    })\n    .catch((e) => {\n      console.log(`Cannot load gestureHandling locale \"${locale}\"`, e);\n    });\n}\n\nfunction waitMapBounds(map, interval = 16) {\n  return new Promise((resolve, _reject) => {\n    const attemptGetBounds = () => {\n      try {\n        const bounds = map.getBounds();\n        if (bounds) {\n          resolve(bounds);\n        } else {\n          throw new Error('Bounds not available');\n        }\n      } catch (error) {\n        setTimeout(attemptGetBounds, interval);\n      }\n    };\n\n    setTimeout(() => attemptGetBounds());\n  });\n}\n\nfunction valueToViewport(value) {\n  const bounds = new L.LatLngBounds(\n    new L.LatLng(value.northEast.lat, value.northEast.lng),\n    new L.LatLng(value.southWest.lat, value.southWest.lng),\n  );\n\n  const southEast = bounds.getSouthEast();\n  const northWest = bounds.getNorthWest();\n\n  return {\n    bottomRight: {\n      latitude: southEast.lat,\n      longitude: southEast.lng,\n    },\n    topLeft: {\n      latitude: northWest.lat,\n      longitude: northWest.lng,\n    },\n  };\n}\n\nfunction viewportToBounds(viewport) {\n  return new L.LatLngBounds(\n    new L.LatLng(viewport.bottomRight.latitude, viewport.bottomRight.longitude),\n    new L.LatLng(viewport.topLeft.latitude, viewport.topLeft.longitude),\n  );\n}\n\nfunction isEqualBounds(a, b) {\n  return (\n    String(a?.northEast?.lat) === String(b?.northEast?.lat)\n    && String(a?.northEast?.lng) === String(b?.northEast?.lng)\n    && String(a?.southWest?.lat) === String(b?.southWest?.lat)\n    && String(a?.southWest?.lng) === String(b?.southWest?.lng)\n  );\n}\n\n/*\nReturns bounds created by extending or retracting the current bounds by a given ratio in each direction.\nFor example, a ratio of 0.5 extends the bounds by 50% in each direction.\nNegative values will retract the bounds.\nSkip the padding if the whole map is seen.\n*/\nfunction normalizeBounds(bounds, bufferRatio = 1) {\n  const sw = bounds.getSouthWest();\n  const ne = bounds.getNorthEast();\n  const height = Math.abs(sw.lat - ne.lat); // 85 * 2 is the whole map\n  const width = Math.abs(sw.lng - ne.lng); // 180 * 2 is the whole map\n  const heightBuffer = height * bufferRatio;\n  const widthBuffer = Math.min(width, 360) * bufferRatio;\n\n  // For positive pad\n  const south = height > 170 ? sw.lat : sw.lat - heightBuffer;\n  const west = width > 360 ? -180 : sw.lng - widthBuffer;\n  const north = height > 170 ? ne.lat : ne.lat + heightBuffer;\n  const east = width > 360 ? 180 : ne.lng + widthBuffer;\n\n  return new L.LatLngBounds(\n    new L.LatLng(south, west),\n    new L.LatLng(north, east),\n  );\n}\n\nfunction convertToKFormat(intl, number) {\n  if (number >= 1000) {\n    return `${intl.formatNumber((number / 1000).toFixed(1))}k`;\n  }\n\n  return number.toString();\n}\n\nfunction MarkerClusterIcon({ latitude, longitude, eventCount }) {\n  const intl = useIntl();\n  const map = useMap();\n  const position = useMemo(() => [latitude, longitude], [latitude, longitude]);\n  const icon = useMemo(\n    () =>\n      new L.DivIcon({\n        html: `<div style=\"pointer-events: none;\"><span>${convertToKFormat(intl, eventCount)}</span></div>`,\n        className: cn('marker-cluster leaflet-interactive', {\n          'marker-cluster-small': eventCount < 10,\n          'marker-cluster-medium': eventCount < 100,\n          'marker-cluster-large': eventCount >= 100,\n        }),\n        iconSize: new L.Point(40, 40),\n      }),\n    [eventCount],\n  );\n\n  return (\n    <Marker\n      position={position}\n      icon={icon}\n      eventHandlers={{\n        click: () => {\n          map.setView(position, Math.min(map.getZoom() + 1, map.getMaxZoom()));\n        },\n      }}\n    />\n  );\n}\n\nfunction OnMapMove({ onChange }) {\n  useMapEvents({\n    moveend() {\n      onChange();\n    },\n  });\n\n  return null;\n}\n\nconst Map = React.forwardRef(\n  (\n    {\n      input,\n      tileAttribution,\n      tileUrl,\n      loadGeoData,\n      initialViewport,\n      defaultViewport,\n      className,\n      searchHereControl: SearchHereControlComponent = SearchHereControl,\n    },\n    ref,\n  ) => {\n    const intl = useIntl();\n    const form = useForm();\n\n    const {\n      filtersOptions: { manualSubmit },\n    } = useContext(FiltersAndWidgetsContext);\n\n    const mapRef = useRef();\n    const programmaticMoveRef = useRef(false);\n\n    const [viewport] = useState(() =>\n      (input.value ? valueToViewport(input.value) : initialViewport));\n\n    const skipMoveRef = useRef(true);\n\n    const [data, setData] = useState(() => []);\n\n    const [displayedMarkers, setDisplayedMarkers] = useState(false);\n    const [bounds] = useState(() =>\n      viewportToBounds(viewport || defaultViewport || worldViewport).pad(\n        padRatio,\n      ));\n    useImperativeHandle(ref, () => ({\n      setData,\n      onQueryChange: (newViewport) => {\n        const map = mapRef.current;\n\n        function reloadData() {\n          waitMapBounds(map).then((bounds1) => {\n            const innerBounds = normalizeBounds(bounds1, unpadRatio);\n            const innerZoom = map.getBoundsZoom(bounds1);\n\n            loadGeoData(innerBounds, innerZoom)\n              .then((newData) => setData(newData?.reverse() ?? []))\n              .catch((err) => {\n                console.log('Failed to load geo data', err);\n              });\n          });\n        }\n\n        if (!skipMoveRef.current) {\n          map.once('moveend', () => reloadData());\n          programmaticMoveRef.current = true;\n          map.fitBounds(\n            viewportToBounds(\n              newViewport || defaultViewport || worldViewport,\n            ).pad(padRatio),\n          );\n        } else {\n          reloadData();\n        }\n        skipMoveRef.current = false;\n      },\n    }));\n\n    const onMapReady = useCallback(\n      ({ target: map }) => {\n        mapRef.current = map;\n\n        loadGestureHandlingLocale(map.gestureHandling, intl.locale);\n\n        // Remove flag\n        map.attributionControl.setPrefix(\n          '<a href=\"https://leafletjs.com\" title=\"A JavaScript library for interactive maps\">Leaflet</a>',\n        );\n\n        waitMapBounds(map).then((bounds1) => {\n          const innerBounds = normalizeBounds(bounds1, unpadRatio);\n          const innerZoom = map.getBoundsZoom(bounds1);\n\n          loadGeoData(innerBounds, innerZoom)\n            .then((newData) => {\n              setData(newData?.reverse() ?? []);\n              setDisplayedMarkers(true);\n            })\n            .catch((err) => {\n              console.log('Failed to load geo data', err);\n            })\n            .finally(() => {\n              skipMoveRef.current = false;\n            });\n        });\n      },\n      [bounds, loadGeoData],\n    );\n\n    const searchHere = useCallback(\n      (e) => {\n        e.preventDefault();\n\n        const map = mapRef.current;\n\n        if (!map) return;\n\n        skipMoveRef.current = true;\n\n        const innerBounds = normalizeBounds(map.getBounds(), unpadRatio);\n        const northEast = innerBounds.getNorthEast().wrap();\n        const southWest = innerBounds.getSouthWest().wrap();\n\n        input.onChange({\n          northEast: {\n            lat: String(northEast.lat),\n            lng: String(northEast.lng),\n          },\n          southWest: {\n            lat: String(southWest.lat),\n            lng: String(southWest.lng),\n          },\n        });\n\n        if (manualSubmit) {\n          form.submit();\n        }\n      },\n      [input, mapRef],\n    );\n\n    const [latestBounds, setLatestBounds] = useState(false);\n\n    const onChange = useCallback(() => {\n      const map = mapRef.current;\n\n      const bounds1 = map.getBounds();\n      const innerBounds = normalizeBounds(bounds1, unpadRatio);\n      const innerZoom = map.getBoundsZoom(bounds1);\n\n      setLatestBounds(innerBounds);\n\n      if (programmaticMoveRef.current) {\n        programmaticMoveRef.current = false;\n        return;\n      }\n\n      const { current: mapElem } = ref;\n      loadGeoData(innerBounds, innerZoom)\n        .then((data1) => mapElem.setData(data1?.reverse() ?? []))\n        .catch((err) => {\n          console.log('Failed to geo data', err);\n        });\n    }, [loadGeoData, ref]);\n\n    const disabledMapSearch = useMemo(\n      () =>\n        !latestBounds\n        || isEqualBounds(input.value, {\n          northEast: latestBounds.getNorthEast().wrap(),\n          southWest: latestBounds.getSouthWest().wrap(),\n        }),\n      [input.value, latestBounds],\n    );\n\n    const gestureHandlingOptions = useMemo(\n      () => ({\n        locale: intl.locale,\n      }),\n      [intl.locale],\n    );\n\n    return (\n      <>\n        <MapContainer\n          className={className}\n          bounds={bounds}\n          whenReady={onMapReady}\n          // scrollWheelZoom={false}\n          gestureHandling\n          gestureHandlingOptions={gestureHandlingOptions}\n          doubleClickZoom\n          worldCopyJump\n          // minZoom={1}\n        >\n          <TileLayer attribution={tileAttribution} url={tileUrl} />\n\n          {displayedMarkers\n            ? data.map((entry) => (\n              <MarkerClusterIcon\n                key={entry.key}\n                eventCount={entry.eventCount}\n                latitude={entry.latitude}\n                longitude={entry.longitude}\n              />\n            ))\n            : null}\n\n          <OnMapMove onChange={onChange} />\n        </MapContainer>\n\n        {!disabledMapSearch ? (\n          <SearchHereControlComponent searchHere={searchHere} />\n        ) : null}\n      </>\n    );\n  },\n);\n\nexport default Map;\n","import omit from 'lodash/omit.js';\nimport isEqual from 'lodash/isEqual.js';\nimport qs from 'qs';\nimport React, {\n  forwardRef,\n  useCallback,\n  useContext,\n  useEffect,\n  useImperativeHandle,\n  useState,\n} from 'react';\nimport { unstable_batchedUpdates as unstableBatchedUpdates } from 'react-dom';\nimport { useIntl } from 'react-intl';\nimport { useForm } from 'react-final-form';\nimport { useUIDSeed } from 'react-uid';\nimport { QueryClient, QueryClientProvider, useQuery } from 'react-query';\nimport { Portal } from '@openagenda/react-portal-ssr';\nimport useConstant from '@openagenda/react-shared/dist/hooks/useConstant.js';\nimport { getEvents } from '../api/index.js';\nimport {\n  filtersToAggregations,\n  extractFiltersFromDom,\n  extractWidgetsFromDom,\n  withDefaultFilterConfig,\n} from '../utils/index.js';\nimport {\n  useGetFilterOptions,\n  useGetTotal,\n  useLoadGeoData,\n} from '../hooks/index.js';\nimport FiltersAndWidgetsContext from '../contexts/FiltersAndWidgetsContext.js';\nimport Filters from './Filters.js';\nimport ActiveFilters from './ActiveFilters.js';\nimport FavoriteToggle from './FavoriteToggle.js';\nimport Total from './Total.js';\nimport ChoiceFilter from './filters/ChoiceFilter.js';\nimport DateRangeFilter from './filters/DateRangeFilter.js';\nimport SimpleDateRangeFilter from './filters/SimpleDateRangeFilter.js';\nimport DefinedRangeFilter from './filters/DefinedRangeFilter.js';\nimport NumberRangeFilter from './filters/NumberRangeFilter.js';\nimport SearchFilter from './filters/SearchFilter.js';\nimport MapFilter from './filters/MapFilter.js';\nimport CustomFilter from './filters/CustomFilter.js';\nimport FavoritesFilter from './filters/FavoritesFilter.js';\nimport TimelineFilter from './filters/TimelineFilter.js';\n\nconst FiltersManager = React.forwardRef(function FiltersManager(\n  {\n    aggregations: initialAggregations = {},\n    query: initialQuery = {},\n    total: initialTotal = 0,\n    defaultViewport,\n    filtersBase: initialFiltersBase,\n    agendaUid,\n    onLoad,\n\n    choiceComponent = ChoiceFilter,\n    dateRangeComponent = DateRangeFilter,\n    simpleDateRangeComponent = SimpleDateRangeFilter,\n    definedRangeComponent = DefinedRangeFilter,\n    numberRangeComponent = NumberRangeFilter,\n    searchComponent = SearchFilter,\n    mapComponent = MapFilter,\n    customComponent = CustomFilter,\n    favoritesComponent = FavoritesFilter,\n    timelineComponent = TimelineFilter,\n\n    ...rest\n  },\n  ref,\n) {\n  const intl = useIntl();\n  const form = useForm();\n  const widgetSeed = useUIDSeed();\n\n  const {\n    filters,\n    widgets,\n    setFilters,\n    setWidgets,\n    filtersOptions,\n    searchMethod,\n  } = useContext(FiltersAndWidgetsContext);\n\n  const [total, setTotal] = useState(() => initialTotal);\n  const [aggregations, setAggregations] = useState(() => initialAggregations);\n\n  const filtersBaseQuery = useQuery(\n    ['react-filters', 'filtersBase', agendaUid],\n    async () => {\n      const filtersToLoad = filters.filter(\n        (filter) => filter.type === 'choice' && !filter.options,\n      );\n\n      if (!filtersToLoad.length) {\n        return {};\n      }\n\n      return (\n        await getEvents(\n          null, // apiClient\n          filtersOptions.res,\n          { uid: agendaUid },\n          filters.filter(\n            (filter) => filter.type === 'choice' && !filter.options,\n          ),\n          { size: 0 },\n          null, // pageParam\n          false, // filtersBase\n          0,\n          searchMethod,\n        )\n      ).aggregations;\n    },\n    {\n      initialData: initialFiltersBase,\n      staleTime: 1000,\n      notifyOnChangeProps: ['data', 'isLoading', 'error'],\n    },\n  );\n\n  const getOptions = useGetFilterOptions(\n    intl,\n    filtersBaseQuery.data,\n    aggregations,\n  );\n  const getTotal = useGetTotal(aggregations);\n\n  const getQuery = useCallback(() => form.getSubmittedValues(), [form]);\n  const loadGeoData = useLoadGeoData(\n    null,\n    filtersOptions.res,\n    () => form.getSubmittedValues(),\n    { searchMethod },\n  );\n\n  useImperativeHandle(ref, () => ({\n    getFilters: () => filters,\n    getForm: () => form,\n    setAggregations,\n    setTotal,\n    updateFiltersAndWidgets: (values, result) => {\n      const widgetsOnPage = extractWidgetsFromDom();\n      const filtersOnPage = extractFiltersFromDom();\n\n      const newFilters = filtersOnPage.map((nextFilter) => {\n        const completedNext = withDefaultFilterConfig(\n          nextFilter,\n          intl,\n          filtersOptions,\n        );\n        const found = filters.find(\n          (v) =>\n            JSON.stringify(omit(v, 'elemRef'))\n            === JSON.stringify(omit(completedNext, 'elemRef')),\n        );\n\n        // Conserve if found & elem has not changed\n        return found && document.body.contains(found.elem)\n          ? found\n          : completedNext;\n      });\n\n      const newWidgets = widgetsOnPage.map((nextWidget) => {\n        const found = widgets.find(\n          (v) =>\n            JSON.stringify(omit(v, 'elemRef'))\n            === JSON.stringify(omit(nextWidget, 'elemRef')),\n        );\n\n        // Conserve if found & elem has not changed\n        return found && document.body.contains(found.elem) ? found : nextWidget;\n      });\n\n      // Because re-render filters separatly to widgets throws an error\n      unstableBatchedUpdates(() => {\n        if (!isEqual(filters, newFilters)) {\n          setFilters(newFilters);\n        }\n\n        if (!isEqual(widgets, newWidgets)) {\n          setWidgets(newWidgets);\n        }\n\n        setAggregations(result.aggregations || {});\n        setTotal(result.total || 0);\n      });\n\n      const mapFilter = filters.find((v) => v.type === 'map');\n      const mapElem = mapFilter?.elemRef?.current;\n      const viewport = result.aggregations?.viewport;\n\n      if (mapElem && viewport) {\n        mapElem.onQueryChange(viewport);\n      }\n\n      const timingsFilter = filters.find((v) => v.name === 'timings');\n      const timingsElem = timingsFilter?.elemRef?.current;\n\n      if (timingsElem) {\n        timingsElem.onQueryChange();\n      }\n    },\n    updateLocation: (values) => {\n      const queryStr = qs.stringify(values, {\n        addQueryPrefix: true,\n        skipNulls: true,\n      });\n\n      window.history.pushState(\n        {},\n        null,\n        `${window.location.pathname}${queryStr}`,\n      );\n    },\n  }));\n\n  useEffect(() => {\n    if (typeof onLoad === 'function') {\n      const aggs = filtersToAggregations(filters);\n\n      onLoad(initialQuery, aggs, form);\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const widgetElems = widgets.map((widget) => {\n    switch (widget.name) {\n      case 'total':\n        return (\n          <Portal key={widgetSeed(widget)} selector={widget.destSelector}>\n            <span>\n              <Total total={total} {...widget} />\n            </span>\n          </Portal>\n        );\n      case 'activeFilters':\n        return (\n          <Portal key={widgetSeed(widget)} selector={widget.destSelector}>\n            <span>\n              <ActiveFilters\n                agendaUid={agendaUid}\n                filters={filters}\n                getOptions={getOptions}\n              />\n            </span>\n          </Portal>\n        );\n      case 'favorite':\n        return (\n          <Portal key={widgetSeed(widget)} selector={widget.destSelector}>\n            <span>\n              <FavoriteToggle\n                agendaUid={agendaUid}\n                widget={widget}\n                {...widget}\n              />\n            </span>\n          </Portal>\n        );\n      default:\n        return null;\n    }\n  });\n\n  return (\n    <>\n      <Filters\n        withRef\n        filters={filters}\n        getOptions={getOptions}\n        getTotal={getTotal}\n        initialViewport={initialAggregations.viewport}\n        defaultViewport={defaultViewport}\n        getQuery={getQuery}\n        loadGeoData={loadGeoData}\n        agendaUid={agendaUid}\n        missingValue={filtersOptions.missingValue}\n        // filters\n        choiceComponent={choiceComponent}\n        dateRangeComponent={dateRangeComponent}\n        simpleDateRangeComponent={simpleDateRangeComponent}\n        definedRangeComponent={definedRangeComponent}\n        numberRangeComponent={numberRangeComponent}\n        searchComponent={searchComponent}\n        mapComponent={mapComponent}\n        customComponent={customComponent}\n        favoritesComponent={favoritesComponent}\n        timelineComponent={timelineComponent}\n        {...rest}\n      />\n      {widgetElems}\n    </>\n  );\n});\n\nconst Wrapper = forwardRef(function Wrapper(props, ref) {\n  const queryClient = useConstant(\n    () =>\n      new QueryClient({\n        defaultOptions: {\n          queries: {\n            refetchOnWindowFocus: false,\n          },\n        },\n      }),\n  );\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <FiltersManager ref={ref} {...props} />\n    </QueryClientProvider>\n  );\n});\n\nexport default Wrapper;\n","import qs from 'qs';\nimport filtersToAggregations from '../utils/filtersToAggregations.js';\nimport getQuerySeparator from '../utils/getQuerySeparator.js';\n\nexport default async function getEvents(\n  _apiClient,\n  jsonExportRes,\n  agenda,\n  filters,\n  query,\n  pageParam,\n  filtersBase,\n  pageSize = 20,\n  searchMethod = 'get',\n) {\n  const params = {\n    aggsSizeLimit: 1500,\n    aggs: filtersToAggregations(filters, filtersBase),\n    from: pageParam > 1 ? (pageParam - 1) * pageSize : undefined,\n    ...query,\n  };\n\n  const url = jsonExportRes\n    .replace(':slug', agenda.slug)\n    .replace(':uid', agenda.uid);\n\n  const p = searchMethod === 'get'\n    ? fetch(\n      `${url}${getQuerySeparator(url)}${qs.stringify(params, {\n        skipNulls: true,\n      })}`,\n    )\n    : fetch(url, {\n      method: 'post',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n  return p.then((r) => {\n    if (r.ok) return r.json();\n    throw new Error(\"Can't list events\");\n  });\n}\n","const shortKeys = [\n  {\n    short: 'm',\n    key: 'missing',\n  },\n  {\n    short: 's',\n    key: 'size',\n  },\n  {\n    short: 't',\n    key: 'type',\n  },\n  {\n    short: 'k',\n    key: 'key',\n  },\n  {\n    short: 'f',\n    key: 'field',\n  },\n];\n\nconst shortValues = [\n  {\n    key: 'type',\n    short: 'af',\n    value: 'additionalFields',\n  },\n];\n\nexport default function minimizeAggregation(aggregation) {\n  if (typeof aggregation === 'string') {\n    return aggregation;\n  }\n\n  return Object.keys(aggregation).reduce(\n    (carry, key) => ({\n      ...carry,\n      [shortKeys.find((shortKey) => shortKey.key === key)?.short ?? key]:\n        shortValues.find(\n          (shortValue) =>\n            shortValue.key === key && aggregation[key] === shortValue.value,\n        )?.short ?? aggregation[key],\n    }),\n    {},\n  );\n}\n","import minimizeAggregation from './minimizeAggregation.js';\n\nexport default function filtersToAggregations(filters, base = false) {\n  const usedFilters = base\n    ? filters.filter(\n      (filter) =>\n        filter.type === 'choice' && (!filter.options || filter.missingValue),\n    )\n    : filters;\n\n  const aggregations = usedFilters\n    .map((filter) => {\n      if (filter.aggregation === null) {\n        return false;\n      }\n\n      return {\n        key: filter.name,\n        type: filter.name,\n        missing: filter.missingValue,\n        ...filter.aggregation,\n      };\n    })\n    .filter((filter) => filter?.key);\n\n  const needViewport = usedFilters.some((filter) => filter.type === 'map');\n\n  if (needViewport) {\n    aggregations.unshift({\n      key: 'viewport',\n      type: 'viewport',\n    });\n  }\n\n  return aggregations.map(minimizeAggregation);\n}\n","export default function getQuerySeparator(url) {\n  try {\n    const urlObj = new URL(url, 'http://n');\n    return urlObj.search ? '&' : '?';\n  } catch (error) {\n    console.error('Invalid URL:', error);\n    return '?';\n  }\n}\n","import {\n  addDays,\n  startOfMonth,\n  endOfMonth,\n  startOfWeek,\n  endOfWeek,\n  startOfDay,\n  endOfDay,\n  isSameDay,\n  getISODay,\n} from 'date-fns';\nimport { defineMessages } from 'react-intl';\n\nconst messages = defineMessages({\n  today: {\n    id: 'ReactFilters.dateRanges.today',\n    defaultMessage: 'Today',\n  },\n  tomorrow: {\n    id: 'ReactFilters.dateRanges.tomorrow',\n    defaultMessage: 'Tomorrow',\n  },\n  thisWeekend: {\n    id: 'ReactFilters.dateRanges.thisWeekend',\n    defaultMessage: 'This week-end',\n  },\n  currentWeek: {\n    id: 'ReactFilters.dateRanges.currentWeek',\n    defaultMessage: 'Current week',\n  },\n  currentMonth: {\n    id: 'ReactFilters.dateRanges.currentMonth',\n    defaultMessage: 'Current month',\n  },\n});\n\nfunction getClosestDayAfter(dayOfWeek, fromDate = new Date()) {\n  const dayOfWeekMap = {\n    Mon: 1,\n    Tue: 2,\n    Wed: 3,\n    Thur: 4,\n    Fri: 5,\n    Sat: 6,\n    Sun: 7,\n  };\n  const offsetDays = dayOfWeekMap[dayOfWeek] - getISODay(fromDate);\n  return addDays(fromDate, offsetDays);\n}\n\nfunction isSelected(range, _timeZone) {\n  const definedRange = this.range();\n\n  return (\n    range\n    && (isSameDay(range.startDate, definedRange.startDate)\n      || range.startDate === definedRange.startDate)\n    && (isSameDay(range.endDate, definedRange.endDate)\n      || range.endDate === definedRange.endDate)\n  );\n}\n\nexport function createStaticRanges(ranges) {\n  return ranges.map((range) => ({ isSelected, ...range }));\n}\n\nexport default function dateRanges(intl, opts = {}) {\n  const { dateFnsLocale } = opts;\n\n  const nextSaturday = getClosestDayAfter('Sat');\n\n  const startOfWeekend = startOfDay(nextSaturday);\n  const endOfWeekend = endOfDay(addDays(nextSaturday, 1));\n  const now = new Date();\n\n  const defineds = {\n    startOfToday: startOfDay(now, { locale: dateFnsLocale }),\n    endOfToday: endOfDay(now, { locale: dateFnsLocale }),\n    startOfTomorrow: startOfDay(addDays(now, 1), { locale: dateFnsLocale }),\n    endOfTomorrow: endOfDay(addDays(now, 1), { locale: dateFnsLocale }),\n    startOfWeek: startOfWeek(now, { locale: dateFnsLocale }),\n    endOfWeek: endOfWeek(now, { locale: dateFnsLocale }),\n    startOfMonth: startOfMonth(now, { locale: dateFnsLocale }),\n    endOfMonth: endOfMonth(now, { locale: dateFnsLocale }),\n    startOfWeekend,\n    endOfWeekend,\n  };\n\n  const defaults = {\n    staticRanges: createStaticRanges([\n      {\n        id: 'today',\n        label: intl.formatMessage(messages.today),\n        range: () => ({\n          startDate: defineds.startOfToday,\n          endDate: defineds.endOfToday,\n        }),\n      },\n      {\n        id: 'tomorrow',\n        label: intl.formatMessage(messages.tomorrow),\n        range: () => ({\n          startDate: defineds.startOfTomorrow,\n          endDate: defineds.endOfTomorrow,\n        }),\n      },\n      {\n        id: 'thisWeekend',\n        label: intl.formatMessage(messages.thisWeekend),\n        range: () => ({\n          startDate: defineds.startOfWeekend,\n          endDate: defineds.endOfWeekend,\n        }),\n      },\n      {\n        id: 'currentWeek',\n        label: intl.formatMessage(messages.currentWeek),\n        range: () => ({\n          startDate: defineds.startOfWeek,\n          endDate: defineds.endOfWeek,\n        }),\n      },\n      {\n        id: 'currentMonth',\n        label: intl.formatMessage(messages.currentMonth),\n        range: () => ({\n          startDate: defineds.startOfMonth,\n          endDate: defineds.endOfMonth,\n        }),\n      },\n    ]),\n    inputRanges: [],\n  };\n\n  return {\n    staticRanges: opts.staticRanges\n      ? opts.staticRanges.reduce((accu, next) => {\n        if (typeof next === 'string') {\n          const result = defaults.staticRanges.find((w) => w.id === next);\n          if (result) accu.push(result);\n          else console.log(`Cannot found static range \"${next}\"`);\n        } else {\n          accu.push(next);\n        }\n        return accu;\n      }, [])\n      : defaults.staticRanges,\n    inputRanges: opts.inputRanges || defaults.inputRanges,\n  };\n}\n","import React from 'react';\n\nexport default function extractFiltersFromDom() {\n  const filterElems = document.querySelectorAll('[data-oa-filter]');\n\n  return Array.from(filterElems, (elem) => {\n    const paramsAttr = elem.getAttribute('data-oa-filter-params');\n    const dataSet = JSON.parse(paramsAttr);\n\n    dataSet.destSelector = `[data-oa-filter=\"${elem.getAttribute('data-oa-filter')}\"][data-oa-filter-params=\"${paramsAttr.replace(\n      /[\"\\\\]/g,\n      '\\\\$&',\n    )}\"]`;\n    dataSet.elem = elem;\n\n    if (dataSet.type === 'custom' || dataSet.type === 'favorites') {\n      dataSet.handlerElem = dataSet.handlerSelector\n        ? elem.querySelector(dataSet.handlerSelector)\n        : null;\n    } else {\n      dataSet.elemRef = React.createRef();\n    }\n\n    return dataSet;\n  });\n}\n","export default function extractWidgetsFromDom() {\n  const widgetElems = document.querySelectorAll('[data-oa-widget]');\n\n  return Array.from(widgetElems, (elem) => {\n    const paramsAttr = elem.getAttribute('data-oa-widget-params');\n    const dataSet = JSON.parse(paramsAttr);\n\n    dataSet.destSelector = `[data-oa-widget=\"${elem.getAttribute('data-oa-widget')}\"][data-oa-widget-params=\"${paramsAttr.replace(\n      /[\"\\\\]/g,\n      '\\\\$&',\n    )}\"]`;\n    dataSet.elem = elem;\n\n    if (dataSet.name === 'favorite') {\n      dataSet.handlerElem = dataSet.handlerSelector\n        ? elem.querySelector(dataSet.handlerSelector)\n        : null;\n      dataSet.activeTargetElem = dataSet.activeTargetSelector\n        ? elem.querySelector(dataSet.activeTargetSelector)\n        : null;\n    }\n\n    return dataSet;\n  });\n}\n","import defaults from 'lodash/defaults.js';\nimport { getLocaleValue } from '@openagenda/intl';\nimport relativeOptions from '../messages/relative.js';\nimport attendanceModeOptions from '../messages/attendanceMode.js';\nimport provenanceMessages from '../messages/provenance.js';\nimport featuredMessages from '../messages/featured.js';\nimport stateMessages from '../messages/state.js';\nimport statusMessages from '../messages/status.js';\nimport booleanMessages from '../messages/boolean.js';\nimport accessibilitiesMessages from '../messages/accessibilities.js';\nimport dateRanges from './dateRanges.js';\n\nfunction assignDateRanges(filter, intl, dataFnsLocale) {\n  if (filter.type === 'definedRange') {\n    Object.assign(\n      filter,\n      dateRanges(intl, {\n        dataFnsLocale,\n        staticRanges: filter.staticRanges,\n        inputRanges: filter.inputRanges,\n      }),\n    );\n  }\n}\n\nexport default function withDefaultFilterConfig(filter, intl, opts = {}) {\n  const { missingValue, dataFnsLocale } = opts;\n\n  switch (filter.name) {\n    case 'viewport':\n      defaults(filter, {\n        type: 'none',\n      });\n      break;\n    case 'geo':\n      defaults(filter, {\n        type: 'map',\n        aggregation: null,\n        // props for MapFilter\n        tileAttribution:\n          '&copy; <a href=\"https://osm.org/copyright\">OpenStreetMap</a> contributors',\n        tileUrl:\n          opts.mapTiles ?? 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n      });\n      break;\n    case 'addMethod':\n      defaults(filter, {\n        type: 'choice',\n        options: [\n          {\n            label: intl.formatMessage(provenanceMessages.contribution),\n            value: 'contribution',\n          },\n          {\n            label: intl.formatMessage(provenanceMessages.aggregation),\n            value: 'aggregation',\n          },\n          {\n            label: intl.formatMessage(provenanceMessages.share),\n            value: 'share',\n          },\n        ],\n        aggregation: {\n          type: 'addMethods',\n        },\n      });\n      break;\n    case 'accessibility':\n      defaults(filter, {\n        type: 'choice',\n        options: [\n          {\n            label: intl.formatMessage(accessibilitiesMessages.hi),\n            value: 'hi',\n          },\n          {\n            label: intl.formatMessage(accessibilitiesMessages.vi),\n            value: 'vi',\n          },\n          {\n            label: intl.formatMessage(accessibilitiesMessages.pi),\n            value: 'pi',\n          },\n          {\n            label: intl.formatMessage(accessibilitiesMessages.mi),\n            value: 'mi',\n          },\n          {\n            label: intl.formatMessage(accessibilitiesMessages.ii),\n            value: 'ii',\n          },\n        ],\n        aggregation: {\n          type: 'accessibilities',\n        },\n      });\n      break;\n    case 'languages':\n      defaults(filter, {\n        type: 'choice',\n        options: null,\n      });\n      break;\n    case 'memberUid':\n      defaults(filter, {\n        type: 'choice',\n        options: null, // from the aggregation\n        labelKey: 'member.name',\n        aggregation: {\n          type: 'members',\n        },\n      });\n      break;\n    case 'timings':\n      defaults(filter, {\n        type: 'dateRange',\n        aggregation: null,\n      });\n      assignDateRanges(filter, intl, dataFnsLocale);\n      break;\n    case 'createdAt':\n      defaults(filter, {\n        type: 'dateRange',\n        aggregation: null,\n      });\n      assignDateRanges(filter, intl, dataFnsLocale);\n      break;\n    case 'updatedAt':\n      defaults(filter, {\n        type: 'dateRange',\n        aggregation: null,\n      });\n      assignDateRanges(filter, intl, dataFnsLocale);\n      break;\n    case 'state':\n      defaults(filter, {\n        type: 'choice',\n        options: [\n          {\n            label: intl.formatMessage(stateMessages.refused),\n            value: '-1',\n          },\n          {\n            label: intl.formatMessage(stateMessages.toModerate),\n            value: '0',\n          },\n          {\n            label: intl.formatMessage(stateMessages.controlled),\n            value: '1',\n          },\n          {\n            label: intl.formatMessage(stateMessages.published),\n            value: '2',\n          },\n        ],\n        aggregation: {\n          type: 'states',\n        },\n      });\n      break;\n    case 'search':\n      defaults(filter, {\n        type: 'search',\n        aggregation: null,\n      });\n      break;\n    case 'locationUid':\n      defaults(filter, {\n        type: 'choice',\n        options: null, // from the aggregation\n        labelKey: 'location.name',\n        aggregation: {\n          type: 'locations',\n        },\n      });\n      break;\n    case 'sourceAgendaUid':\n      defaults(filter, {\n        type: 'choice',\n        options: null, // from the aggregation\n        labelKey: 'agenda.title',\n        aggregation: {\n          type: 'sourceAgendas',\n        },\n      });\n      break;\n    case 'originAgendaUid':\n      defaults(filter, {\n        type: 'choice',\n        options: null, // from the aggregation\n        labelKey: 'agenda.title',\n        aggregation: {\n          type: 'originAgendas',\n        },\n      });\n      break;\n    case 'featured':\n      defaults(filter, {\n        type: 'choice',\n        options: [\n          {\n            label: intl.formatMessage(featuredMessages.featured),\n            value: 'true',\n          },\n        ],\n        aggregation: null,\n      });\n      break;\n    case 'relative':\n      defaults(filter, {\n        type: 'choice',\n        options: [\n          {\n            label: intl.formatMessage(relativeOptions.passed),\n            value: 'passed',\n          },\n          {\n            label: intl.formatMessage(relativeOptions.current),\n            value: 'current',\n          },\n          {\n            label: intl.formatMessage(relativeOptions.upcoming),\n            value: 'upcoming',\n          },\n        ],\n      });\n      break;\n    case 'attendanceMode':\n      defaults(filter, {\n        type: 'choice',\n        aggregation: {\n          type: 'attendanceModes',\n        },\n        options: [\n          {\n            label: intl.formatMessage(attendanceModeOptions.offline),\n            value: '1',\n          },\n          {\n            label: intl.formatMessage(attendanceModeOptions.online),\n            value: '2',\n          },\n          {\n            label: intl.formatMessage(attendanceModeOptions.mixed),\n            value: '3',\n          },\n        ],\n      });\n      break;\n    case 'region':\n      defaults(filter, {\n        type: 'choice',\n        options: null, // from the aggregation\n        missingValue,\n        aggregation: {\n          type: 'regions',\n        },\n      });\n      break;\n    case 'department':\n      defaults(filter, {\n        type: 'choice',\n        options: null, // from the aggregation\n        missingValue,\n        aggregation: {\n          type: 'departments',\n        },\n      });\n      break;\n    case 'city':\n      defaults(filter, {\n        type: 'choice',\n        options: null, // from the aggregation\n        missingValue,\n        aggregation: {\n          type: 'cities',\n        },\n      });\n      break;\n    case 'countryCode':\n      defaults(filter, {\n        type: 'choice',\n        options: null, // from the aggregation\n        missingValue,\n        aggregation: {\n          type: 'countryCodes',\n        },\n      });\n      break;\n    case 'adminLevel3':\n      defaults(filter, {\n        type: 'choice',\n        options: null, // from the aggregation\n        missingValue,\n        aggregation: {\n          type: 'adminLevels3',\n        },\n      });\n      break;\n    case 'district':\n      defaults(filter, {\n        type: 'choice',\n        options: null, // from the aggregation\n        missingValue,\n        aggregation: {\n          type: 'districts',\n        },\n      });\n      break;\n    case 'keyword':\n      defaults(filter, {\n        type: 'choice',\n        options: null, // from the aggregation\n        aggregation: {\n          type: 'keywords',\n        },\n      });\n      break;\n    case 'status':\n      defaults(filter, {\n        type: 'choice',\n        options: [\n          {\n            label: intl.formatMessage(statusMessages.programmed),\n            value: '1',\n          },\n          {\n            label: intl.formatMessage(statusMessages.rescheduled),\n            value: '2',\n          },\n          {\n            label: intl.formatMessage(statusMessages.movedOnline),\n            value: '3',\n          },\n          {\n            label: intl.formatMessage(statusMessages.postponed),\n            value: '4',\n          },\n          {\n            label: intl.formatMessage(statusMessages.full),\n            value: '5',\n          },\n          {\n            label: intl.formatMessage(statusMessages.cancelled),\n            value: '6',\n          },\n        ],\n        aggregation: {\n          type: 'status',\n        },\n      });\n      break;\n    case 'favorites':\n      defaults(filter, {\n        type: 'favorites',\n        aggregation: null,\n      });\n      break;\n    default:\n      break;\n  }\n\n  const { fieldSchema } = filter;\n\n  // additional boolean field\n  if (fieldSchema?.fieldType === 'boolean') {\n    defaults(filter, {\n      name: fieldSchema.field,\n      type: 'choice',\n      fieldSchema,\n      options: [\n        {\n          label: intl.formatMessage(booleanMessages.selected),\n          value: 'true',\n        },\n        {\n          label: intl.formatMessage(booleanMessages.notSelected),\n          value: 'false',\n        },\n      ],\n      missingValue,\n      aggregation: {\n        type: 'additionalFields',\n        field: fieldSchema.field,\n      },\n    });\n\n    // additional number field\n  } else if (['number', 'integer'].includes(fieldSchema?.fieldType)) {\n    defaults(filter, {\n      type: 'numberRange',\n      name: fieldSchema.field,\n      fieldSchema,\n      aggregation: null,\n    });\n\n    // additional optioned field\n  } else if (fieldSchema) {\n    defaults(filter, {\n      name: fieldSchema.field,\n      type: 'choice',\n      fieldSchema,\n      options: !filter.aggregationOnly\n        ? fieldSchema.options.map((option) => ({\n          ...option,\n          label: getLocaleValue(option.label, intl.locale),\n          value: String(option.id),\n        }))\n        : null,\n      missingValue,\n      aggregation: {\n        type: 'additionalFields',\n        field: fieldSchema.field,\n      },\n      labelKey: 'label',\n    });\n  }\n\n  return filter;\n}\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  passed: {\n    id: 'ReactFilters.messages.relative.passed',\n    defaultMessage: 'Passed',\n  },\n  current: {\n    id: 'ReactFilters.messages.relative.current',\n    defaultMessage: 'Current',\n  },\n  upcoming: {\n    id: 'ReactFilters.messages.relative.upcoming',\n    defaultMessage: 'Upcoming',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  offline: {\n    id: 'ReactFilters.messages.attendanceMode.offline',\n    defaultMessage: 'In situ',\n  },\n  online: {\n    id: 'ReactFilters.messages.attendanceMode.online',\n    defaultMessage: 'Online',\n  },\n  mixed: {\n    id: 'ReactFilters.messages.attendanceMode.mixed',\n    defaultMessage: 'Mixed',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  contribution: {\n    id: 'ReactFilters.messages.provenance.contribution',\n    defaultMessage: 'Contribution',\n  },\n  aggregation: {\n    id: 'ReactFilters.messages.provenance.aggregation',\n    defaultMessage: 'Aggregation',\n  },\n  share: {\n    id: 'ReactFilters.messages.provenance.share',\n    defaultMessage: 'Share',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  featured: {\n    id: 'ReactFilters.messages.featured.featured',\n    defaultMessage: 'Featured',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  refused: {\n    id: 'ReactFilters.messages.state.refused',\n    defaultMessage: 'Refused',\n  },\n  toModerate: {\n    id: 'ReactFilters.messages.state.toModerate',\n    defaultMessage: 'To moderate',\n  },\n  controlled: {\n    id: 'ReactFilters.messages.state.controlled',\n    defaultMessage: 'Controlled',\n  },\n  published: {\n    id: 'ReactFilters.messages.state.published',\n    defaultMessage: 'Published',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  programmed: {\n    id: 'ReactFilters.messages.status.programmed', // 1\n    defaultMessage: 'Programmed',\n  },\n  rescheduled: {\n    id: 'ReactFilters.messages.status.rescheduled', // 2\n    defaultMessage: 'Rescheduled',\n  },\n  movedOnline: {\n    id: 'ReactFilters.messages.status.movedOnline', // 3\n    defaultMessage: 'Moved online',\n  },\n  postponed: {\n    id: 'ReactFilters.messages.status.postponed', // 4\n    defaultMessage: 'Postponed',\n  },\n  full: {\n    id: 'ReactFilters.messages.status.full', // 5\n    defaultMessage: 'Fully booked',\n  },\n  cancelled: {\n    id: 'ReactFilters.messages.status.cancelled', // 6\n    defaultMessage: 'Cancelled',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  selected: {\n    id: 'ReactFilters.messages.boolean.selected',\n    defaultMessage: 'Selected',\n  },\n  notSelected: {\n    id: 'ReactFilters.messages.boolean.notSelected',\n    defaultMessage: 'Not selected',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  hi: {\n    id: 'ReactFilters.messages.accessiblities.hi',\n    defaultMessage: 'Hearing impairment',\n  },\n  vi: {\n    id: 'ReactFilters.messages.accessiblities.vi',\n    defaultMessage: 'Visual impairment',\n  },\n  pi: {\n    id: 'ReactFilters.messages.accessiblities.pi',\n    defaultMessage: 'Psychic impairment',\n  },\n  mi: {\n    id: 'ReactFilters.messages.accessiblities.mi',\n    defaultMessage: 'Motor impairment',\n  },\n  ii: {\n    id: 'ReactFilters.messages.accessiblities.ii',\n    defaultMessage: 'Intellectual impairment',\n  },\n});\n","import { getLocaleValue } from '@openagenda/intl';\nimport defaultMessages from '../messages/filterTitles.js';\n\nexport default function getFilterTitle(\n  intl,\n  providedMessages,\n  messageKey,\n  fieldSchema,\n) {\n  const messages = providedMessages ?? defaultMessages;\n\n  if (fieldSchema?.label) {\n    return getLocaleValue(fieldSchema.label, intl.locale);\n  }\n\n  if (messages[messageKey]) {\n    return intl.formatMessage(messages[messageKey]);\n  }\n\n  return messageKey;\n}\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  geo: {\n    id: 'ReactFilters.messages.filterTitles.geo',\n    defaultMessage: 'Map',\n  },\n  search: {\n    id: 'ReactFilters.messages.filterTitles.search',\n    defaultMessage: 'Search',\n  },\n  addMethod: {\n    id: 'ReactFilters.messages.filterTitles.addMethod',\n    defaultMessage: 'Provenance',\n  },\n  memberUid: {\n    id: 'ReactFilters.messages.filterTitles.memberUid',\n    defaultMessage: 'Member',\n  },\n  locationUid: {\n    id: 'ReactFilters.messages.filterTitles.locationUid',\n    defaultMessage: 'Location',\n  },\n  sourceAgendaUid: {\n    id: 'ReactFilters.messages.filterTitles.sourceAgendaUid',\n    defaultMessage: 'Source agenda',\n  },\n  originAgendaUid: {\n    id: 'ReactFilters.messages.filterTitles.originAgendaUid',\n    defaultMessage: 'Origin agenda',\n  },\n  featured: {\n    id: 'ReactFilters.messages.filterTitles.featured',\n    defaultMessage: 'Featured',\n  },\n  relative: {\n    id: 'ReactFilters.messages.filterTitles.relative',\n    defaultMessage: 'Passed / current / upcoming',\n  },\n  region: {\n    id: 'ReactFilters.messages.filterTitles.region',\n    defaultMessage: 'Region',\n  },\n  department: {\n    id: 'ReactFilters.messages.filterTitles.department',\n    defaultMessage: 'Department',\n  },\n  countryCode: {\n    id: 'ReactFilters.messages.filterTitles.countryCode',\n    defaultMessage: 'Country',\n  },\n  city: {\n    id: 'ReactFilters.messages.filterTitles.city',\n    defaultMessage: 'City',\n  },\n  adminLevel3: {\n    id: 'ReactFilters.messages.filterTitles.adminLevel3',\n    defaultMessage: 'Administrative level 3',\n  },\n  timings: {\n    id: 'ReactFilters.messages.filterTitles.timings',\n    defaultMessage: 'Date',\n  },\n  createdAt: {\n    id: 'ReactFilters.messages.filterTitles.createdAt',\n    defaultMessage: 'Creation date',\n  },\n  updatedAt: {\n    id: 'ReactFilters.messages.filterTitles.updatedAt',\n    defaultMessage: 'Date of update',\n  },\n  keyword: {\n    id: 'ReactFilters.messages.filterTitles.keyword',\n    defaultMessage: 'Keywords',\n  },\n  state: {\n    id: 'ReactFilters.messages.filterTitles.state',\n    defaultMessage: 'State',\n  },\n  attendanceMode: {\n    id: 'ReactFilters.messages.filterTitles.attendanceMode',\n    defaultMessage: 'Attendance mode',\n  },\n  status: {\n    id: 'ReactFilters.messages.filterTitles.status',\n    defaultMessage: 'Status',\n  },\n  district: {\n    id: 'ReactFilters.messages.filterTitles.district',\n    defaultMessage: 'District',\n  },\n  accessibility: {\n    id: 'ReactFilters.messages.filterTitles.accessibility',\n    defaultMessage: 'Accessibility',\n  },\n  languages: {\n    id: 'ReactFilters.messages.filterTitles.languages',\n    defaultMessage: 'Languages',\n  },\n});\n","import { useFormState } from 'react-final-form';\nimport { useMemo } from 'react';\nimport staticRangesFirst from '../utils/staticRangesFirst.js';\nimport customFirst from '../utils/customFirst.js';\nimport matchFilter from '../utils/matchFilter.js';\n\nexport default function useActiveFilters(filters) {\n  const { values } = useFormState({ subscription: { values: true } });\n\n  const sortedFilters = useMemo(\n    () =>\n      filters\n        .map(({ destSelector, ...filter }) => filter)\n        .sort(staticRangesFirst)\n        .sort(customFirst),\n    [filters],\n  );\n\n  return useMemo(\n    () =>\n      Object.entries(values).reduce((accu, entry) => {\n        const matchingFilter = sortedFilters.find((filter) =>\n          matchFilter(filter, values, entry));\n\n        if (matchingFilter && !accu.includes(matchingFilter)) {\n          accu.push(matchingFilter);\n        }\n\n        return accu;\n      }, []),\n    [sortedFilters, values],\n  );\n}\n","export default function staticRangesFirst(a, b) {\n  if (a.staticRanges && !b.staticRanges) {\n    return -1;\n  }\n  if (!a.staticRanges && b.staticRanges) {\n    return 1;\n  }\n\n  return 0;\n}\n","export default function customFirst(a, b) {\n  if (a.type === 'custom' && b.type !== 'custom') {\n    return -1;\n  }\n  if (a.type !== 'custom' && b.type === 'custom') {\n    return 1;\n  }\n\n  return 0;\n}\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Field, useField } from 'react-final-form';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { parseISO, endOfDay, isSameDay } from 'date-fns';\nimport { utcToZonedTime, getTimezoneOffset } from 'date-fns-tz';\nimport DateRangePicker from '../fields/DateRangePicker.js';\nimport Title from '../Title.js';\nimport Panel from '../Panel.js';\nimport FilterPreviewer from '../FilterPreviewer.js';\n\nconst messages = defineMessages({\n  dateRange: {\n    id: 'ReactFilters.DateRangeFilter.dateRange',\n    defaultMessage: 'From {startDate} to {endDate}',\n  },\n  startDate: {\n    id: 'ReactFilters.DateRangeFilter.startDate',\n    defaultMessage: 'Start',\n  },\n  endDate: {\n    id: 'ReactFilters.DateRangeFilter.endDate',\n    defaultMessage: 'End',\n  },\n  until: {\n    id: 'ReactFilters.DateRangeFilter.until',\n    defaultMessage: 'Until {date}',\n  },\n  from: {\n    id: 'ReactFilters.DateRangeFilter.from',\n    defaultMessage: 'From {date}',\n  },\n});\n\nconst subscription = { value: true };\n\nfunction formatDateValue(value) {\n  if (!value || value === '') {\n    return null;\n  }\n\n  return typeof value === 'string' ? parseISO(value) : value;\n}\n\n// For display (store -> form)\nexport function formatValue(value) {\n  if (value === undefined) {\n    return [\n      {\n        startDate: null,\n        endDate: null,\n        key: 'selection',\n      },\n    ];\n  }\n\n  const currentTz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n  const tzDiff = getTimezoneOffset(value.tz, value.gte)\n    - getTimezoneOffset(currentTz, value.gte);\n\n  if (Array.isArray(value)) {\n    return value.map((v) => {\n      const startDate = formatDateValue(v.gte);\n      const endDate = formatDateValue(v.lte);\n\n      return {\n        ...v,\n        startDate:\n          tzDiff && startDate ? utcToZonedTime(startDate, v.tz) : startDate,\n        endDate: tzDiff && endDate ? utcToZonedTime(endDate, v.tz) : endDate,\n      };\n    });\n  }\n\n  if (typeof value === 'object') {\n    const startDate = formatDateValue(value.gte);\n    const endDate = formatDateValue(value.lte);\n\n    return [\n      {\n        startDate:\n          tzDiff && startDate ? utcToZonedTime(startDate, value.tz) : startDate,\n        endDate:\n          tzDiff && endDate ? utcToZonedTime(endDate, value.tz) : endDate,\n        key: 'selection',\n      },\n    ];\n  }\n\n  return value;\n}\n\n// For save (form -> store)\nfunction parseValue(value) {\n  if (!value) {\n    return value;\n  }\n\n  const [selection] = value;\n\n  if (selection.startDate === null && selection.endDate === null) {\n    return undefined;\n  }\n\n  const gte = selection.startDate?.toISOString() ?? null;\n  const lte = (\n    selection.endDate ? endOfDay(selection.endDate) : selection.endDate\n  ).toISOString();\n\n  const result = {};\n  if (gte) result.gte = gte;\n  if (lte) result.lte = lte;\n\n  result.tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n  return result;\n}\n\nexport function Preview({\n  name,\n  staticRanges = [],\n  component = FilterPreviewer,\n  disabled,\n  ...rest\n}) {\n  const intl = useIntl();\n  const { input } = useField(name, { subscription });\n  const { tz } = input.value;\n  const value = formatValue(input.value)[0];\n\n  const selectedStaticRange = useMemo(\n    () => value && staticRanges.find((v) => v.isSelected(value, tz)),\n    [value, staticRanges, tz],\n  );\n\n  const singleDay = useMemo(\n    () =>\n      value?.startDate\n      && value?.endDate\n      && isSameDay(value.startDate, value.endDate),\n    [value],\n  );\n\n  const onRemove = useCallback(\n    (e) => {\n      e.stopPropagation();\n\n      if (disabled) {\n        return;\n      }\n\n      input.onChange(undefined);\n    },\n    [input, disabled],\n  );\n\n  let label;\n\n  if (!value?.startDate && !value?.endDate) {\n    return null;\n  }\n\n  const formatDate = (v) => intl.formatDate(v /* , { timeZone: tz } */);\n\n  if (selectedStaticRange) {\n    label = selectedStaticRange.label;\n  } else if (value.startDate === null) {\n    label = intl.formatMessage(messages.until, {\n      date: formatDate(value.endDate),\n    });\n  } else if (value.endDate === null) {\n    label = intl.formatMessage(messages.from, {\n      date: formatDate(value.startDate),\n    });\n  } else {\n    label = singleDay\n      ? formatDate(value.startDate)\n      : intl.formatMessage(messages.dateRange, {\n        startDate: formatDate(value.startDate),\n        endDate: formatDate(value.endDate),\n      });\n  }\n\n  return React.createElement(component, {\n    name,\n    staticRanges,\n    label,\n    onRemove,\n    disabled,\n    ...rest,\n  });\n}\n\nconst DateRangeFilter = React.forwardRef(function DateRangeFilter(\n  {\n    name,\n    staticRanges,\n    inputRanges,\n    rangeColor,\n    className,\n    dateFormatStyle,\n    dateFormat,\n    minDate,\n    maxDate,\n    shownDate,\n    getQuery,\n  },\n  ref,\n) {\n  const intl = useIntl();\n\n  return (\n    <Field\n      ref={ref}\n      name={name}\n      subscription={subscription}\n      parse={parseValue}\n      format={formatValue}\n      component={DateRangePicker}\n      staticRanges={staticRanges}\n      inputRanges={inputRanges}\n      startDatePlaceholder={intl.formatMessage(messages.startDate)}\n      endDatePlaceholder={intl.formatMessage(messages.endDate)}\n      rangeColor={rangeColor}\n      className={className}\n      dateFormatStyle={dateFormatStyle}\n      dateFormat={dateFormat}\n      minDate={minDate}\n      maxDate={maxDate}\n      shownDate={shownDate}\n      getQuery={getQuery}\n    />\n  );\n});\n\nconst Collapsable = React.forwardRef(function Collapsable(\n  { name, filter, component, disabled, staticRanges, inputRanges, ...rest },\n  ref,\n) {\n  const [collapsed, setCollapsed] = useState(true);\n\n  return (\n    <Panel\n      header={(\n        <Title\n          name={name}\n          filter={filter}\n          component={Preview}\n          staticRanges={staticRanges}\n          disabled={disabled}\n        />\n      )}\n      collapsed={collapsed}\n      setCollapsed={setCollapsed}\n    >\n      <DateRangeFilter\n        ref={ref}\n        name={name}\n        filter={filter}\n        component={component}\n        staticRanges={staticRanges}\n        inputRanges={inputRanges}\n        disabled={disabled}\n        collapsed={collapsed}\n        {...rest}\n      />\n    </Panel>\n  );\n});\n\nconst exported = React.memo(DateRangeFilter);\n\n// React.memo lose statics\nexported.Preview = Preview;\nexported.Collapsable = Collapsable;\n\nexport default exported;\n","import isEqual from 'lodash/isEqual.js';\nimport isDate from 'lodash/isDate.js';\nimport React, {\n  useCallback,\n  useMemo,\n  useState,\n  useContext,\n  useEffect,\n  useRef,\n  useImperativeHandle,\n} from 'react';\nimport { useIntl } from 'react-intl';\nimport useIsomorphicLayoutEffectModule from 'react-use/lib/useIsomorphicLayoutEffect.js';\nimport useLatestModule from 'react-use/lib/useLatest.js';\nimport usePreviousModule from 'react-use/lib/usePrevious.js';\nimport cn from 'classnames';\nimport { startOfMonth, endOfMonth, isSameDay, format } from 'date-fns';\nimport dateFnsLocaleEN from 'date-fns/locale/en-US/index.js';\nimport { DateRange, DefinedRange } from '@openagenda/react-date-range';\nimport { getFallbackChain } from '@openagenda/intl';\nimport FiltersAndWidgetsContext from '../../contexts/FiltersAndWidgetsContext.js';\nimport convertPhpDateFormatToDateFns from '../../utils/convertPhpDateFormatToDateFns.js';\nimport useLoadTimingsData from '../../hooks/useLoadTimingsData.js';\n\nconst useIsomorphicLayoutEffect = useIsomorphicLayoutEffectModule.default || useIsomorphicLayoutEffectModule;\nconst useLatest = useLatestModule.default || useLatestModule;\nconst usePrevious = usePreviousModule.default || usePreviousModule;\n\nconst dateDisplayFormats = {\n  en: 'MMM d, yyyy', // Jan 1, 2024\n  fr: 'd MMM yyyy', // 1 janv. 2024\n  de: 'd. MMM yyyy', // 1. Jan. 2024\n  it: 'd MMM yyyy', // 1 gen 2024\n  es: 'd MMM yyyy', // 1 ene 2024\n};\n\nconst defaultGetInitialValue = () => [\n  {\n    startDate: null,\n    endDate: -1,\n    key: 'selection',\n  },\n];\n\nfunction normalizeValue(value) {\n  if (!value?.length) {\n    return value;\n  }\n\n  return value.map((v) => ({\n    startDate: isDate(v.startDate) ? v.startDate.getTime() : v.startDate,\n    endDate: isDate(v.endDate) ? v.endDate.getTime() : v.endDate,\n    key: v.key,\n  }));\n}\n\nfunction getDateDisplayFormat(dateFormatStyle, dateFormat, locale) {\n  if (dateFormat) {\n    return dateFormatStyle === 'php'\n      ? convertPhpDateFormatToDateFns(dateFormat)\n      : dateFormat;\n  }\n\n  const fallbackChain = getFallbackChain(locale);\n\n  for (const fallback of fallbackChain) {\n    if (dateDisplayFormats[fallback]) {\n      return dateDisplayFormats[fallback];\n    }\n  }\n\n  return dateDisplayFormats[Object.keys(dateDisplayFormats).shift()];\n}\n\nfunction focusedDateToTimingsQuery(focusedDate) {\n  return {\n    gte: startOfMonth(focusedDate),\n    lte: endOfMonth(focusedDate),\n    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n  };\n}\n\nfunction DateRangePicker(\n  {\n    input,\n    meta,\n    staticRanges = [],\n    inputRanges = [],\n    rangeColor = '#41acdd',\n    disabled,\n    className,\n    dateFormatStyle,\n    dateFormat,\n    minDate,\n    maxDate,\n    shownDate,\n    getQuery,\n    ...otherProps\n  },\n  ref,\n) {\n  const intl = useIntl();\n\n  const dateRangeRef = useRef(null);\n\n  const [data, setData] = useState(() => []);\n\n  const {\n    filtersOptions: { dateFnsLocale, searchMethod, res },\n  } = useContext(FiltersAndWidgetsContext);\n\n  const [ranges, setRanges] = useState(\n    () => input.value ?? defaultGetInitialValue(),\n  );\n  const [dragStatus, setDragStatus] = useState(false);\n  const [focusedRange, setFocusedRange] = useState([0, 0]);\n\n  const latestRanges = useLatest(ranges);\n  const latestFocusedRange = useLatest(focusedRange);\n  const previousValue = usePrevious(input.value);\n\n  const { onChange } = input;\n\n  // Update state for re-calculate rdrNoSelection\n  const onSelectPreviewChange = useCallback(\n    (value) => {\n      const dateRange = dateRangeRef.current;\n\n      setDragStatus(dateRangeRef.current?.calendar.state.drag.status);\n      dateRange.updatePreview(value ? dateRange.calcNewSelection(value) : null);\n    },\n    [dateRangeRef],\n  );\n\n  const onDefinedPreviewChange = useCallback(\n    (value) => {\n      const dateRange = dateRangeRef.current;\n\n      return dateRange.updatePreview(\n        value\n          ? dateRange.calcNewSelection(value, typeof value === 'string')\n          : null,\n      );\n    },\n    [dateRangeRef],\n  );\n\n  const onTemporaryChange = useCallback(\n    (item) => {\n      const value = [item?.selection ? item.selection : item.range1];\n\n      setRanges(value);\n\n      if (\n        latestFocusedRange.current[0] === 0\n        && latestFocusedRange.current[1] === 0\n        && value[0].startDate.getTime() !== value[0].endDate.getTime()\n      ) {\n        onChange(value);\n      }\n\n      if (\n        latestFocusedRange.current[0] === 0\n        && latestFocusedRange.current[1] === 1\n      ) {\n        onChange(value);\n      }\n    },\n    [latestFocusedRange, onChange],\n  );\n\n  const onDefinedRangeChange = useCallback(\n    (item) => {\n      const value = [item?.selection ? item.selection : item.range1];\n\n      setRanges(value);\n      onChange(value);\n    },\n    [onChange],\n  );\n\n  const disabledDay = useCallback(() => disabled, [disabled]);\n\n  const rdrNoSelection = useMemo(() => {\n    const range = ranges?.[0];\n    const hasRange = range && range.endDate !== null;\n\n    return !hasRange && !dragStatus;\n  }, [ranges, dragStatus]);\n\n  const [focusedDate, setFocusedDate] = useState(null);\n\n  const loadTimingsData = useLoadTimingsData(res, getQuery, { searchMethod });\n\n  // If value change then update internal ranges\n  useIsomorphicLayoutEffect(() => {\n    if (\n      previousValue\n      && !isEqual(normalizeValue(input.value), normalizeValue(previousValue))\n      && !isEqual(\n        normalizeValue(input.value),\n        normalizeValue(latestRanges.current),\n      )\n    ) {\n      setRanges(input.value);\n    }\n  }, [input.value, previousValue, latestRanges, dateRangeRef, shownDate]);\n\n  const onShownDateChange = async (newFocusedDate) => {\n    if (input.name !== 'timings') {\n      return;\n    }\n\n    setFocusedDate(newFocusedDate);\n  };\n\n  // set focusedDate from calendar state\n  useIsomorphicLayoutEffect(() => {\n    if (input.name !== 'timings' || !dateRangeRef.current) {\n      return;\n    }\n\n    const newFocused = dateRangeRef.current.calendar?.state?.focusedDate;\n\n    if (focusedDate !== newFocused) {\n      setFocusedDate(newFocused);\n    }\n  }, [dateRangeRef, focusedDate, input.name]);\n\n  useEffect(() => {\n    if (!focusedDate) {\n      return;\n    }\n\n    loadTimingsData(\n      {\n        timings: focusedDateToTimingsQuery(focusedDate),\n      },\n      {\n        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      },\n    )\n      .then((newData) => setData(newData ?? []))\n      .catch((err) => {\n        console.log('Failed to load timings data', err);\n      });\n  }, [focusedDate]);\n\n  useImperativeHandle(ref, () => ({\n    onQueryChange: () => {\n      if (focusedDate !== dateRangeRef.current.calendar?.state?.focusedDate) {\n        // will trigger the effect with loadTimingsData\n        setFocusedDate(dateRangeRef.current.calendar?.state?.focusedDate);\n      } else {\n        // same date but query can be changed\n        loadTimingsData(\n          {\n            timings: focusedDateToTimingsQuery(\n              dateRangeRef.current.calendar?.state?.focusedDate,\n            ),\n          },\n          {\n            timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n          },\n        )\n          .then((newData) => setData(newData ?? []))\n          .catch((err) => {\n            console.log('Failed to load timings data', err);\n          });\n      }\n    },\n  }));\n\n  const dayContentRenderer = useCallback(\n    (day) => {\n      const isActive = data.find(\n        (d) => isSameDay(new Date(d.key), day) && d.timingCount > 0,\n      );\n      return (\n        <span\n          className={isActive ? 'rdrDayWithTimings' : 'rdrDayWithoutTimings'}\n        >\n          {format(day, 'd')}\n        </span>\n      );\n    },\n    [data],\n  );\n\n  const dateRangePickerProps = {\n    showSelectionPreview: true,\n    showMonthName: false,\n    moveRangeOnFirstSelection: false,\n    months: 1,\n    ranges,\n    direction: 'horizontal',\n    locale: dateFnsLocale || dateFnsLocaleEN,\n    staticRanges,\n    inputRanges,\n    focusedRange,\n    onRangeFocusChange: setFocusedRange,\n    rangeColors: [rangeColor],\n    minDate: minDate ? new Date(minDate) : undefined,\n    maxDate: maxDate ? new Date(maxDate) : undefined,\n    shownDate: shownDate ? new Date(shownDate) : undefined,\n    onShownDateChange,\n    dayContentRenderer,\n    ...otherProps,\n  };\n\n  return (\n    <div\n      className={cn('rdrDateRangePickerWrapper', className, { rdrNoSelection })}\n    >\n      <DateRange\n        onPreviewChange={onSelectPreviewChange}\n        onRangeFocusChange={setFocusedRange}\n        {...dateRangePickerProps}\n        onChange={onTemporaryChange}\n        ref={dateRangeRef}\n        className={undefined}\n        disabledDay={disabledDay}\n        dateDisplayFormat={getDateDisplayFormat(\n          dateFormatStyle,\n          dateFormat,\n          intl.locale,\n        )}\n      />\n      {staticRanges.length ? (\n        <DefinedRange\n          onPreviewChange={onDefinedPreviewChange}\n          {...dateRangePickerProps}\n          range={ranges[focusedRange[0]]}\n          onChange={onDefinedRangeChange}\n          className={undefined}\n        />\n      ) : null}\n    </div>\n  );\n}\n\nexport default React.forwardRef(DateRangePicker);\n","export default function convertPhpDateFormatToDateFns(phpFormat) {\n  const formatMapping = {\n    // Days\n    d: 'dd', // Day of the month, 2 digits with leading zeros (01 to 31)\n    D: 'EEE', // A textual representation of a day (Mon through Sun)\n    j: 'd', // Day of the month without leading zeros (1 to 31)\n    l: 'EEEE', // A full textual representation of the day of the week (Sunday through Saturday)\n    N: 'i', // ISO-8601 numeric representation of the day of the week (1 for Monday through 7 for Sunday)\n    S: 'o', // English ordinal suffix for the day of the month, 2 characters (st, nd, rd or th)\n    w: 'e', // Numeric representation of the day of the week (0 for Sunday through 6 for Saturday)\n    z: 'D', // The day of the year (starting from 0) (0 through 365)\n\n    // Weeks\n    W: 'I', // ISO-8601 week number of year, weeks starting on Monday\n\n    // Months\n    F: 'MMMM', // A full textual representation of a month (January through December)\n    m: 'MM', // Numeric representation of a month, with leading zeros (01 to 12)\n    M: 'MMM', // A short textual representation of a month (Jan through Dec)\n    n: 'M', // Numeric representation of a month, without leading zeros (1 to 12)\n    t: '', // Number of days in the given month (28 through 31) (no direct equivalent in date-fns)\n\n    // Years\n    L: '', // Whether it's a leap year (1 if it is a leap year, 0 otherwise) (no direct equivalent in date-fns)\n    o: 'RRRR', // ISO-8601 week-numbering year (4 digits)\n    Y: 'yyyy', // A full numeric representation of a year, 4 digits\n    y: 'yy', // A two digit representation of a year\n\n    // Time\n    a: 'aaa', // Lowercase Ante meridiem and Post meridiem (am or pm)\n    A: 'a', // Uppercase Ante meridiem and Post meridiem (AM or PM)\n    B: '', // Swatch Internet time (000 through 999) (no direct equivalent in date-fns)\n    g: 'h', // 12-hour format of an hour without leading zeros (1 through 12)\n    G: 'H', // 24-hour format of an hour without leading zeros (0 through 23)\n    h: 'hh', // 12-hour format of an hour with leading zeros (01 through 12)\n    H: 'HH', // 24-hour format of an hour with leading zeros (00 through 23)\n    i: 'mm', // Minutes with leading zeros (00 to 59)\n    s: 'ss', // Seconds with leading zeros (00 through 59)\n    u: 'SSS', // Microseconds (added as milliseconds in date-fns)\n\n    // Timezone\n    e: 'zzz', // Timezone identifier (e.g., America/Los_Angeles) (not directly supported, use zzz for generic support)\n    T: 'zz', // Timezone abbreviation (e.g., MST)\n    Z: 'X', // Timezone offset in seconds (e.g., -43200 to 43200)\n  };\n\n  let dateFnsFormat = '';\n  let inLiteral = false;\n\n  for (let i = 0; i < phpFormat.length; i++) {\n    const char = phpFormat[i];\n\n    if (char === '\\\\') {\n      if (!inLiteral) {\n        dateFnsFormat += \"'\";\n        inLiteral = true;\n      }\n      i += 1; // Skip the backslash\n      dateFnsFormat += phpFormat[i] || '';\n      continue;\n    }\n\n    if (inLiteral) {\n      dateFnsFormat += \"'\";\n      inLiteral = false;\n    }\n\n    if (formatMapping[char] !== undefined) {\n      dateFnsFormat += formatMapping[char];\n    } else {\n      dateFnsFormat += char;\n    }\n  }\n\n  if (inLiteral) {\n    dateFnsFormat += \"'\";\n  }\n\n  return dateFnsFormat;\n}\n","import { useCallback } from 'react';\nimport qs from 'qs';\nimport getQuerySeparator from '../utils/getQuerySeparator.js';\n\nexport default function useLoadTimingsData(res, queryOrFn, options = {}) {\n  const { searchMethod = 'get' } = options;\n\n  return useCallback(\n    async (additionalQuery = {}, { interval, timezone } = {}) => {\n      const query = typeof queryOrFn === 'function' ? queryOrFn() : queryOrFn;\n\n      const params = {\n        // oaq: { passed: 1 },\n        size: 0,\n        ...query,\n        ...additionalQuery,\n        aggregations: [\n          {\n            type: 'timings',\n            // size: 2000,\n            interval,\n            timezone,\n          },\n        ],\n      };\n\n      const result = await (\n        searchMethod === 'get'\n          ? fetch(\n            `${res}${getQuerySeparator(res)}${qs.stringify(params, {\n              skipNulls: true,\n            })}`,\n          )\n          : fetch(res, {\n            method: 'post',\n            body: JSON.stringify(params),\n            headers: {\n              'Content-Type': 'application/json',\n            },\n          })\n      ).then((r) => {\n        if (r.ok) return r.json();\n        throw new Error(\"Can't load timings data\");\n      });\n\n      return result.aggregations.timings;\n    },\n    [res, queryOrFn, searchMethod],\n  );\n}\n","import React from 'react';\nimport { useField } from 'react-final-form';\nimport useFilterTitle from '../hooks/useFilterTitle.js';\n\nconst subscription = { value: true };\n\nexport default function Title({ name, filter, component, ...rest }) {\n  const title = useFilterTitle(name, filter.fieldSchema);\n  const field = useField(name, { subscription });\n\n  const { input } = field;\n\n  if (\n    !input.value?.length\n    && !(typeof input.value === 'object' && input.value !== null)\n  ) {\n    return <div>{title}</div>;\n  }\n\n  if (!component) {\n    return null;\n  }\n\n  return (\n    <div className=\"flex-auto\">\n      <span className=\"padding-right-xs\">{title}</span>\n      {React.createElement(component, {\n        name,\n        filter,\n        className: 'oa-filter-value-preview',\n        withTitle: false,\n        ...rest,\n      })}\n    </div>\n  );\n}\n","import { useMemo } from 'react';\nimport { useIntl } from 'react-intl';\nimport { getFilterTitle } from '../utils/index.js';\n\nexport default function useFilterTitle(messageKey, fieldSchema, messages) {\n  const intl = useIntl();\n\n  return useMemo(\n    () => getFilterTitle(intl, messages, messageKey, fieldSchema),\n    [intl, messages, messageKey, fieldSchema],\n  );\n}\n","import { useMemo, useState } from 'react';\nimport cn from 'classnames';\nimport a11yButtonActionHandler from '@openagenda/react-shared/dist/utils/a11yButtonActionHandler.js';\n\nexport default function Panel({\n  collapsed = true,\n  setCollapsed,\n  header,\n  children,\n}) {\n  // default state when used without setCollapsed\n  const internalState = useState(collapsed);\n\n  const value = typeof setCollapsed === 'function' ? collapsed : internalState[0];\n  const updater = typeof setCollapsed === 'function' ? setCollapsed : internalState[1];\n\n  const toggleCollapsed = useMemo(\n    () =>\n      a11yButtonActionHandler((e) => {\n        e.preventDefault();\n\n        updater((v) => !v);\n      }),\n    [updater],\n  );\n\n  return (\n    <div\n      className={cn('oa-collapse-item', { 'oa-collapse-item-active': !value })}\n    >\n      <div\n        className=\"oa-collapse-header\"\n        role=\"tab\"\n        tabIndex=\"0\"\n        aria-expanded={!value}\n        onClick={toggleCollapsed}\n        onKeyPress={toggleCollapsed}\n      >\n        {header}\n        <span className=\"oa-collapse-arrow\">\n          <i\n            className={cn('fa fa-lg', {\n              'fa-angle-up': !value,\n              'fa-angle-down': value,\n            })}\n            aria-hidden=\"true\"\n          />\n        </span>\n      </div>\n      <div\n        className={cn('oa-collapse-content', {\n          'oa-collapse-content-active': !value,\n          'oa-collapse-content-inactive': value,\n        })}\n        role=\"tabpanel\"\n      >\n        <div className=\"oa-collapse-content-box\">{children}</div>\n      </div>\n    </div>\n  );\n}\n","import classNames from 'classnames';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { css } from '@emotion/react';\nimport { getLocaleValue } from '@openagenda/intl';\n\nconst messages = defineMessages({\n  removeFilter: {\n    id: 'ReactFilters.ValueBadge.removeFilter',\n    defaultMessage: 'Remove filter',\n  },\n  removeFilterWithTitle: {\n    id: 'ReactFilters.ValueBadge.removeFilterWithTitle',\n    defaultMessage: 'Remove filter ({title})',\n  },\n});\n\nexport default function ValueBadge({ label, title, onRemove, disabled }) {\n  const intl = useIntl();\n\n  const titleLabel = title?.length\n    ? intl.formatMessage(messages.removeFilterWithTitle, { title })\n    : intl.formatMessage(messages.removeFilter);\n\n  return (\n    <button\n      type=\"button\"\n      title={titleLabel}\n      className={classNames('btn badge badge-pill badge-info margin-right-xs', {\n        disabled,\n      })}\n      css={css`\n        line-height: 18px;\n        padding-top: 0;\n        padding-bottom: 0;\n\n        :hover {\n          color: #da4453;\n          border-color: #d43f3a;\n        }\n      `}\n      // disabled={disabled}\n      onClick={onRemove}\n    >\n      {getLocaleValue(label, intl.locale)}\n      &nbsp;\n      <i className=\"fa fa-times\" aria-hidden=\"true\" />\n    </button>\n  );\n}\n","import useFilterTitle from '../hooks/useFilterTitle.js';\nimport ValueBadge from './ValueBadge.js';\n\nexport default function FilterPreviewer({\n  withTitle = true,\n  name,\n  filter,\n  label,\n  valueOptions,\n  onRemove,\n  disabled,\n  className,\n}) {\n  const title = useFilterTitle(name, filter.fieldSchema);\n\n  // multi\n  if (valueOptions?.length) {\n    return (\n      <>\n        {valueOptions.map((option) => (\n          <span key={option.value} className={className}>\n            <ValueBadge\n              label={option.label}\n              onRemove={onRemove(option)}\n              disabled={disabled}\n              title={withTitle ? title : null}\n            />\n          </span>\n        ))}\n      </>\n    );\n  }\n\n  // single\n  if (label) {\n    return (\n      <span className={className}>\n        <ValueBadge\n          label={label}\n          onRemove={onRemove}\n          disabled={disabled}\n          title={withTitle ? title : null}\n        />\n      </span>\n    );\n  }\n\n  return null;\n}\n","import isMatch from 'lodash/isMatch.js';\nimport omitBy from 'lodash/omitBy.js';\nimport isEmpty from 'lodash/isEmpty.js';\n\nexport default function matchQuery(a, b) {\n  return isMatch(omitBy(a, isEmpty), omitBy(b, isEmpty));\n}\n","import { formatValue as formatDateRangeValue } from '../components/filters/DateRangeFilter.js';\nimport matchQuery from './matchQuery.js';\n\nexport default function matchFilter(filter, values, entry) {\n  const [key, value] = entry;\n\n  // Matching custom\n  if (filter.type === 'custom' && filter.activeFilterLabel) {\n    return key in filter.query && matchQuery(values, filter.query);\n  }\n\n  // Matching favorites\n  if (filter.type === 'favorites' && filter.activeFilterLabel) {\n    return !!values.favorites;\n  }\n\n  // Matching staticRanges\n  if (filter.type === 'definedRange' && filter.name === key) {\n    const formattedValue = formatDateRangeValue(value)[0];\n    return !!filter.staticRanges.find((v) => v.isSelected(formattedValue));\n  }\n\n  // Same name\n  return filter.name === key;\n}\n","import { useCallback, useMemo, useState } from 'react';\nimport useIsomorphicLayoutEffectModule from 'react-use/lib/useIsomorphicLayoutEffect.js';\nimport usePreviousModule from 'react-use/lib/usePrevious.js';\nimport { useIntl } from 'react-intl';\nimport Fuse from 'fuse.js';\nimport useConstant from '@openagenda/react-shared/dist/hooks/useConstant.js';\n\nconst useIsomorphicLayoutEffect = useIsomorphicLayoutEffectModule.default || useIsomorphicLayoutEffectModule;\nconst usePrevious = usePreviousModule.default || usePreviousModule;\n\nfunction getCollator(locale, defaultLocale) {\n  try {\n    return new Intl.Collator(locale, {\n      sensitivity: 'base',\n      usage: 'sort',\n    });\n  } catch {\n    return new Intl.Collator(defaultLocale, {\n      sensitivity: 'base',\n      usage: 'sort',\n    });\n  }\n}\n\nfunction filterOptions({ options, fuse, searchValue, sort, collator }) {\n  if (searchValue === '') {\n    if (sort === 'alphabetical') {\n      return [...options].sort((a, b) => collator.compare(a.label, b.label));\n    }\n\n    return options;\n  }\n\n  return fuse.search(searchValue).map((v) => v.item);\n}\n\nexport default function useChoiceState({\n  filter,\n  getOptions,\n  pageSize,\n  collapsed = false,\n  sort = null,\n}) {\n  const intl = useIntl();\n  const [countOptions, setCountOptions] = useState(pageSize);\n  const options = useMemo(() => getOptions(filter), [filter, getOptions]);\n\n  const fuse = useConstant(\n    () =>\n      new Fuse(options, {\n        threshold: 0.3,\n        ignoreLocation: true,\n        keys: ['label'],\n      }),\n  );\n\n  const collator = useMemo(\n    () => getCollator(intl.locale, intl.defaultLocale),\n    [intl.defaultLocale, intl.locale],\n  );\n\n  const [searchValue, setSearchValue] = useState('');\n  const previousSearchValue = usePrevious(searchValue);\n  const [foundOptions, setFoundOptions] = useState(\n    filterOptions({\n      options,\n      fuse,\n      searchValue,\n      sort,\n      collator,\n    }),\n  );\n\n  const moreOptions = useCallback(\n    () => setCountOptions((v) => v + pageSize),\n    [pageSize],\n  );\n  const lessOptions = useCallback(() => setCountOptions(pageSize), [pageSize]);\n\n  const previousCollpased = usePrevious(collapsed);\n\n  useIsomorphicLayoutEffect(() => {\n    if (previousCollpased && !collapsed) {\n      lessOptions();\n    }\n  }, [collapsed, lessOptions, previousCollpased]);\n\n  const hasMoreOptions = countOptions < foundOptions.length;\n\n  const onSearchChange = useCallback((e) => setSearchValue(e.target.value), []);\n\n  // Update fuse docs if options change\n  useIsomorphicLayoutEffect(() => {\n    if (options !== fuse._docs) {\n      fuse.setCollection(options);\n\n      const newOptions = filterOptions({\n        options,\n        fuse,\n        searchValue,\n        sort,\n        collator,\n      });\n\n      setFoundOptions(newOptions);\n    }\n  }, [fuse, searchValue, options, sort, collator]);\n\n  // Update search results if search change\n  useIsomorphicLayoutEffect(() => {\n    if (\n      previousSearchValue !== undefined\n      && searchValue !== previousSearchValue\n    ) {\n      const newOptions = filterOptions({\n        options,\n        fuse,\n        searchValue,\n        sort,\n        collator,\n      });\n\n      // if (newOptions.length <= pageSize || searchValue === '') {\n      //   lessOptions();\n      // }\n\n      setFoundOptions(newOptions);\n    }\n  }, [fuse, searchValue, options, previousSearchValue, sort, collator]);\n\n  return {\n    options,\n    searchValue,\n    onSearchChange,\n    foundOptions,\n    countOptions,\n    hasMoreOptions,\n    moreOptions,\n    lessOptions,\n  };\n}\n","import { useCallback } from 'react';\nimport { useForm } from 'react-final-form';\nimport matchQuery from '../utils/matchQuery.js';\nimport updateFormValues from '../utils/updateFormValues.js';\n\nexport default function useFavoritesOnChange(eventUids, { isExclusive } = {}) {\n  const form = useForm();\n\n  return useCallback(\n    (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      const query = form.getState().values;\n\n      const matchingQuery = {\n        uid: eventUids?.length ? eventUids.map(String) : ['-1'],\n        favorites: '1',\n      };\n\n      const isMatchQuery = matchQuery(query, matchingQuery);\n\n      const newQuery = isExclusive && !isMatchQuery\n        ? form.getRegisteredFields().reduce((accu, next) => {\n          if (next in matchingQuery) {\n            accu[next] = matchingQuery[next];\n            return accu;\n          }\n\n          accu[next] = undefined;\n\n          return accu;\n        }, {})\n        : matchingQuery;\n\n      // Without favorites in store\n      if (!newQuery.uid?.length) {\n        newQuery.uid = ['-1'];\n      }\n\n      updateFormValues(form, newQuery, !isMatchQuery);\n    },\n    [isExclusive, form, eventUids],\n  );\n}\n","export default function updateFormValues(form, query, active = true) {\n  form.batch(() => {\n    for (const key in query) {\n      if (Object.prototype.hasOwnProperty.call(query, key)) {\n        if (active) {\n          form.change(key, query[key]);\n        } else {\n          form.change(key, undefined);\n        }\n      }\n    }\n  });\n}\n","import { useCallback } from 'react';\nimport { createLocalStorageStateHook } from 'use-local-storage-state';\n\nconst useFavoriteLocalStorageState = createLocalStorageStateHook('favorite-events');\n\nexport default function useFavoriteState(agendaUid) {\n  const [value, setValue] = useFavoriteLocalStorageState();\n\n  const setAgendaValue = useCallback(\n    (fnOrValue) => {\n      if (typeof fnOrValue === 'function') {\n        setValue((prev) => ({\n          ...prev,\n          [agendaUid]: fnOrValue(prev?.[agendaUid]),\n        }));\n      } else {\n        setValue((prev) => ({\n          ...prev,\n          [agendaUid]: fnOrValue,\n        }));\n      }\n    },\n    [setValue, agendaUid],\n  );\n\n  return [value?.[agendaUid], setAgendaValue];\n}\n","import get from 'lodash/get.js';\nimport { useCallback } from 'react';\nimport { defineMessages } from 'react-intl';\nimport { getLocaleValue } from '@openagenda/intl';\n\nconst messages = defineMessages({\n  emptyOption: {\n    id: 'ReactFilters.useGetFilterOptions.emptyOption',\n    defaultMessage: '(Without value)',\n  },\n});\n\nexport default function useGetFilterOptions(intl, filtersBase, aggregations) {\n  return useCallback(\n    (filter) => {\n      const missingLabel = intl.formatMessage(messages.emptyOption);\n\n      if (filter.options) {\n        const missingOption = filter.missingValue\n          ? filtersBase?.[filter.name]?.find((v) => {\n            const dataKey = 'id' in v ? 'id' : 'key';\n            return v[dataKey] === filter.missingValue;\n          })\n          : null;\n\n        return missingOption\n          ? [\n            {\n              label: missingLabel,\n              key: filter.missingValue,\n              value: filter.missingValue,\n            },\n          ].concat(filter.options)\n          : filter.options;\n      }\n\n      if (!filtersBase?.[filter.name]) return [];\n\n      const baseAgg = [...filtersBase[filter.name]];\n\n      const aggregation = aggregations[filter.name];\n\n      if (aggregation) {\n        aggregation.forEach((entry) => {\n          const dataKey = 'id' in entry ? 'id' : 'key';\n          const found = baseAgg.find((v) => v[dataKey] === entry[dataKey]);\n          if (!found) baseAgg.push(entry);\n        });\n      }\n\n      const labelKey = filter.labelKey || 'key';\n\n      return baseAgg.map((entry) => {\n        const dataKey = 'id' in entry ? 'id' : 'key';\n        const labelValue = get(entry, labelKey);\n\n        return {\n          ...entry,\n          label:\n            labelValue === filter.missingValue\n              ? missingLabel\n              : getLocaleValue(labelValue, intl.locale),\n          value: String(entry[dataKey]),\n        };\n      });\n    },\n    [intl, aggregations, filtersBase],\n  );\n}\n","import { useCallback } from 'react';\n\nexport default function useGetTotal(aggregations) {\n  return useCallback(\n    (filter, option) => {\n      const aggregation = aggregations[filter.name];\n\n      if (!aggregation) return null;\n\n      const dataKey = 'id' in option ? 'id' : 'key';\n      const optionKey = 'id' in option ? 'id' : 'value';\n\n      const optionValue = aggregation.find(\n        (v) => String(v[dataKey]) === String(option[optionKey]),\n      );\n\n      if (optionValue) {\n        return optionValue.eventCount || 0;\n      }\n\n      return 0;\n    },\n    [aggregations],\n  );\n}\n","import { useCallback } from 'react';\nimport qs from 'qs';\nimport getQuerySeparator from '../utils/getQuerySeparator.js';\n\nexport default function useLoadGeoData(\n  _apiClient,\n  res,\n  queryOrFn,\n  options = {},\n) {\n  const { searchMethod = 'get' } = options;\n\n  return useCallback(\n    async (bounds, zoom) => {\n      const query = typeof queryOrFn === 'function' ? queryOrFn() : queryOrFn;\n      const northEast = bounds.getNorthEast().wrap();\n      const southWest = bounds.getSouthWest().wrap();\n\n      const params = {\n        // oaq: { passed: 1 },\n        size: 0,\n        ...query,\n        aggregations: [\n          {\n            type: 'geohash',\n            size: 2000,\n            zoom: Math.max(zoom, 1),\n            radius: zoom === 0 ? 80 : 40,\n          },\n        ],\n        geo: {\n          northEast,\n          southWest,\n        },\n      };\n\n      const result = await (\n        searchMethod === 'get'\n          ? fetch(\n            `${res}${getQuerySeparator(res)}${qs.stringify(params, {\n              skipNulls: true,\n            })}`,\n          )\n          : fetch(res, {\n            method: 'post',\n            body: JSON.stringify(params),\n            headers: {\n              'Content-Type': 'application/json',\n            },\n          })\n      ).then((r) => {\n        if (r.ok) return r.json();\n        throw new Error(\"Can't load geo data\");\n      });\n\n      return result.aggregations.geohash;\n    },\n    [res, queryOrFn, searchMethod],\n  );\n}\n","export { default as useActiveFilters } from './useActiveFilters.js';\nexport { default as useChoiceState } from './useChoiceState.js';\nexport { default as useFavoritesOnChange } from './useFavoritesOnChange.js';\nexport { default as useFavoriteState } from './useFavoriteState.js';\nexport { default as useFilters } from './useFilters.js';\nexport { default as useFilterTitle } from './useFilterTitle.js';\nexport { default as useGetFilterOptions } from './useGetFilterOptions.js';\nexport { default as useGetTotal } from './useGetTotal.js';\nexport { default as useLoadGeoData } from './useLoadGeoData.js';\nexport { default as useLoadTimingsData } from './useLoadTimingsData.js';\n\nexport { useField, useForm } from 'react-final-form';\n","import React from 'react';\nimport { useUIDSeed } from 'react-uid';\nimport { Portal } from '@openagenda/react-portal-ssr';\n\nfunction Noop() {\n  return null;\n}\n\nfunction Filters({\n  filters,\n  withRef = false,\n  choiceComponent: ChoiceComponent = Noop,\n  dateRangeComponent: DateRangeComponent = Noop,\n  simpleDateRangeComponent: SimpleDateRangeComponent = Noop,\n  definedRangeComponent: DefinedRangeComponent = Noop,\n  numberRangeComponent: NumberRangeComponent = Noop,\n  mapComponent: MapComponent = Noop,\n  searchComponent: SearchComponent = Noop,\n  customComponent: CustomComponent = Noop,\n  favoritesComponent: FavoritesComponent = Noop,\n  timelineComponent: TimelineComponent = Noop,\n  choiceProps = null,\n  dateRangeProps = null,\n  numberRangeProps = null,\n  definedRangeProps = null,\n  mapProps = null,\n  searchProps = null,\n  customProps = null,\n  favoritesProps = null,\n  timelineProps = null,\n  ...additionnalProps\n}) {\n  const seed = useUIDSeed();\n\n  return (\n    <>\n      {filters.map((filter) => {\n        let elem;\n\n        switch (filter.type) {\n          case 'dateRange':\n            elem = (\n              <DateRangeComponent\n                key={seed(filter)}\n                ref={withRef ? filter.elemRef : null}\n                filter={filter}\n                {...filter}\n                {...dateRangeProps}\n                {...additionnalProps}\n              />\n            );\n            break;\n          case 'simpleDateRange':\n            elem = (\n              <SimpleDateRangeComponent\n                key={seed(filter)}\n                ref={withRef ? filter.elemRef : null}\n                filter={filter}\n                {...filter}\n                {...dateRangeProps}\n                {...additionnalProps}\n              />\n            );\n            break;\n          case 'definedRange':\n            elem = (\n              <DefinedRangeComponent\n                key={seed(filter)}\n                ref={withRef ? filter.elemRef : null}\n                filter={filter}\n                {...filter}\n                {...definedRangeProps}\n                {...additionnalProps}\n              />\n            );\n            break;\n          case 'numberRange': {\n            elem = (\n              <NumberRangeComponent\n                key={seed(filter)}\n                ref={withRef ? filter.elemRef : null}\n                filter={filter}\n                {...filter}\n                {...numberRangeProps}\n                {...additionnalProps}\n              />\n            );\n            break;\n          }\n          case 'choice':\n            elem = (\n              <ChoiceComponent\n                key={seed(filter)}\n                ref={withRef ? filter.elemRef : null}\n                filter={filter}\n                {...filter}\n                {...choiceProps}\n                {...additionnalProps}\n              />\n            );\n            break;\n          case 'map':\n            elem = (\n              <MapComponent\n                key={seed(filter)}\n                ref={withRef ? filter.elemRef : null}\n                filter={filter}\n                {...filter}\n                {...mapProps}\n                {...additionnalProps}\n              />\n            );\n            break;\n          case 'search':\n            elem = (\n              <SearchComponent\n                key={seed(filter)}\n                ref={withRef ? filter.elemRef : null}\n                filter={filter}\n                {...filter}\n                {...searchProps}\n                {...additionnalProps}\n              />\n            );\n            break;\n          case 'custom':\n            elem = (\n              <CustomComponent\n                key={seed(filter)}\n                ref={withRef ? filter.elemRef : null}\n                filter={filter}\n                {...filter}\n                {...customProps}\n                {...additionnalProps}\n              />\n            );\n            break;\n          case 'favorites':\n            elem = (\n              <FavoritesComponent\n                key={seed(filter)}\n                ref={withRef ? filter.elemRef : null}\n                filter={filter}\n                {...filter}\n                {...favoritesProps}\n                {...additionnalProps}\n              />\n            );\n            break;\n          case 'timeline':\n            elem = (\n              <TimelineComponent\n                key={seed(filter)}\n                ref={withRef ? filter.elemRef : null}\n                filter={filter}\n                {...filter}\n                {...timelineProps}\n                {...additionnalProps}\n              />\n            );\n            break;\n          default:\n            elem = null;\n            break;\n        }\n\n        if (filter.destSelector) {\n          return (\n            <Portal key={seed(filter)} selector={filter.destSelector}>\n              {elem}\n            </Portal>\n          );\n        }\n\n        return elem;\n      })}\n    </>\n  );\n}\n\nexport default React.memo(Filters);\n","import React, { useState } from 'react';\nimport { Field } from 'react-final-form';\nimport { endOfDay, startOfDay, format } from 'date-fns';\nimport { getTimezoneOffset, utcToZonedTime } from 'date-fns-tz';\n// import NumberRangeField from '../fields/NumberRangeField';\nimport Panel from '../Panel.js';\nimport Title from '../Title.js';\nimport SimpleDateRangeField from '../fields/SimpleDateRangeField.js';\nimport { Preview } from './DateRangeFilter.js';\n\nconst subscription = { value: true };\n\nfunction formatDateValue(value, tz) {\n  if (!value) return value;\n\n  const currentTz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n  const tzDiff = getTimezoneOffset(tz, value) - getTimezoneOffset(currentTz, value);\n\n  let date = new Date(value);\n\n  if (tzDiff) {\n    date = utcToZonedTime(date, tz);\n  }\n\n  return date;\n}\n\n// For display (store -> form)\nfunction formatValue(value) {\n  if (!value) {\n    return undefined;\n  }\n\n  const gte = formatDateValue(value.gte, value.tz);\n  const lte = formatDateValue(value.lte, value.tz);\n\n  return {\n    gte: gte ? format(gte, 'yyyy-MM-dd') : null,\n    lte: lte ? format(lte, 'yyyy-MM-dd') : null,\n  };\n}\n\n// For save (form -> store)\nfunction parseValue(value) {\n  if (!value) {\n    return value;\n  }\n\n  const gte = value.gte ? startOfDay(new Date(value.gte)).toISOString() : null;\n  const lte = value.lte ? endOfDay(new Date(value.lte)).toISOString() : null;\n\n  const result = {};\n  if (gte) result.gte = gte;\n  if (lte) result.lte = lte;\n\n  if (gte || lte) result.tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n  return result;\n}\n\nconst SimpleDateRangeFilter = React.forwardRef(function SimpleDateRangeFilter(\n  { name },\n  ref,\n) {\n  return (\n    <Field\n      ref={ref}\n      name={name}\n      subscription={subscription}\n      format={formatValue}\n      parse={parseValue}\n      component={SimpleDateRangeField}\n    />\n  );\n});\n\nconst Collapsable = React.forwardRef(function Collapsable(\n  { name, filter, component, disabled, staticRanges, inputRanges, ...rest },\n  ref,\n) {\n  const [collapsed, setCollapsed] = useState(true);\n\n  return (\n    <Panel\n      header={(\n        <Title\n          name={name}\n          filter={filter}\n          component={Preview}\n          disabled={disabled}\n        />\n      )}\n      collapsed={collapsed}\n      setCollapsed={setCollapsed}\n    >\n      <SimpleDateRangeFilter\n        ref={ref}\n        name={name}\n        filter={filter}\n        component={component}\n        disabled={disabled}\n        collapsed={collapsed}\n        {...rest}\n      />\n    </Panel>\n  );\n});\n\nconst exported = React.memo(SimpleDateRangeFilter);\n\nexported.Preview = Preview;\nexported.Collapsable = Collapsable;\n\nexport default exported;\n","import React, { useCallback } from 'react';\nimport { defineMessages, useIntl } from 'react-intl';\n\nconst messages = defineMessages({\n  startDate: {\n    id: 'ReactFilters.fields.SimpleRangeField.startDate',\n    defaultMessage: 'Start date',\n  },\n  endDate: {\n    id: 'ReactFilters.fields.SimpleRangeField.endDate',\n    defaultMessage: 'End date',\n  },\n});\n\n// TODO minDate && maxDate from props\n\nfunction SimpleDateRangeField({ input }, _ref) {\n  const intl = useIntl();\n\n  const { value, onChange } = input;\n\n  const onInputChange = useCallback(\n    (k, v) => {\n      if (k === 'gte') {\n        onChange({\n          ...value,\n          gte: v,\n        });\n      } else {\n        onChange({\n          ...value,\n          lte: v,\n        });\n      }\n    },\n    [onChange, value],\n  );\n\n  return (\n    <div>\n      <label>\n        {intl.formatMessage(messages.startDate)}\n        <input\n          value={value?.gte || ''}\n          type=\"date\"\n          className=\"form-control\"\n          onChange={(e) => onInputChange('gte', e.target.value)}\n          max={value?.lte}\n        />\n      </label>\n\n      <label>\n        {intl.formatMessage(messages.endDate)}\n        <input\n          value={value?.lte || ''}\n          type=\"date\"\n          className=\"form-control\"\n          onChange={(e) => onInputChange('lte', e.target.value)}\n          min={value?.gte}\n        />\n      </label>\n    </div>\n  );\n}\n\nexport default React.forwardRef(SimpleDateRangeField);\n","import React, { useState, useCallback } from 'react';\nimport { Field, useField } from 'react-final-form';\nimport NumberRangeField from '../fields/NumberRangeField.js';\nimport Panel from '../Panel.js';\nimport Title from '../Title.js';\nimport FilterPreviewer from '../FilterPreviewer.js';\n\nconst subscription = { value: true };\n\nconst isDefined = (v) => ![undefined, null, ''].includes(v);\n\nfunction formatPreviewLabel(value) {\n  if (!isDefined(value.gte) && isDefined(value.lte)) {\n    return `≤ ${value.lte}`;\n  }\n\n  if (isDefined(value.gte) && !isDefined(value.lte)) {\n    return `≥ ${value.gte}`;\n  }\n\n  if (isDefined(value.gte) && isDefined(value.lte)) {\n    return `${value.gte} ≤ ${value.lte}`;\n  }\n}\n\nfunction parseValue(value) {\n  const definedLte = isDefined(value?.lte);\n  const definedGte = isDefined(value?.gte);\n\n  if (!definedLte && !definedGte) {\n    return undefined;\n  }\n\n  const result = {};\n\n  if (definedLte) result.lte = value.lte;\n  if (definedGte) result.gte = value.gte;\n\n  return result;\n}\n\nfunction Preview({ name, component = FilterPreviewer, disabled, ...rest }) {\n  const { input } = useField(name, { subscription });\n\n  const onRemove = useCallback(\n    (e) => {\n      e.stopPropagation();\n\n      if (disabled) {\n        return;\n      }\n\n      input.onChange(undefined);\n    },\n    [input, disabled],\n  );\n\n  if (!input.value?.gte && !input.value?.lte) {\n    return null;\n  }\n\n  return React.createElement(component, {\n    name,\n    label: formatPreviewLabel(input.value),\n    onRemove,\n    disabled,\n    ...rest,\n  });\n}\n\nconst NumberRangeFilter = React.forwardRef(function NumberRangeFilter(\n  { name },\n  ref,\n) {\n  return (\n    <Field\n      ref={ref}\n      name={name}\n      subscription={subscription}\n      parse={parseValue}\n      component={NumberRangeField}\n    />\n  );\n});\n\nconst Collapsable = React.forwardRef(function Collapsable(\n  { name, filter, component, disabled, ...rest },\n  ref,\n) {\n  const [collapsed, setCollapsed] = useState(true);\n\n  return (\n    <Panel\n      header={(\n        <Title\n          name={name}\n          filter={filter}\n          component={Preview}\n          disabled={disabled}\n        />\n      )}\n      collapsed={collapsed}\n      setCollapsed={setCollapsed}\n    >\n      <NumberRangeFilter\n        ref={ref}\n        name={name}\n        filter={filter}\n        component={component}\n        disabled={disabled}\n        collapsed={collapsed}\n        {...rest}\n      />\n    </Panel>\n  );\n});\n\nconst exported = React.memo(NumberRangeFilter);\n\nexported.Preview = Preview;\nexported.Collapsable = Collapsable;\n\nexport default exported;\n","import React, { useCallback, useState, useEffect } from 'react';\n\nimport { defineMessages, useIntl } from 'react-intl';\nimport { useDebounce } from 'use-debounce';\n\nconst messages = defineMessages({\n  min: {\n    id: 'ReactFilters.fields.NumberRangeField.gte',\n    defaultMessage: 'Min',\n  },\n  max: {\n    id: 'ReactFilters.fields.NumberRangeField.lte',\n    defaultMessage: 'Max',\n  },\n});\n\nfunction NumberRangeField({ input }, _ref) {\n  const m = useIntl().formatMessage;\n\n  const { value, onChange } = input;\n\n  const [gteString, setGTEString] = useState(value?.gte);\n  const [lteString, setLTEString] = useState(value?.lte);\n\n  const [debouncedGTE] = useDebounce(gteString, 500);\n  const [debouncedLTE] = useDebounce(lteString, 500);\n\n  const onInputChange = useCallback((k, v) => {\n    if (k === 'gte') {\n      setGTEString(v);\n    } else {\n      setLTEString(v);\n    }\n  }, []);\n\n  useEffect(() => {\n    setGTEString(value?.gte ?? '');\n    setLTEString(value?.lte ?? '');\n  }, [value]);\n\n  useEffect(() => {\n    onChange({\n      lte: debouncedLTE,\n      gte: debouncedGTE,\n    });\n  }, [debouncedGTE, debouncedLTE, onChange]);\n\n  return (\n    <div className=\"row\">\n      <div className=\"col-xs-6\">\n        <label className=\"sr-only\" htmlFor={`number-range-${input.name}-gte`}>\n          {m(messages.min)}\n        </label>\n        <input\n          value={gteString}\n          type=\"number\"\n          className=\"form-control\"\n          id={`number-range-${input.name}-gte`}\n          placeholder={m(messages.min)}\n          onChange={(e) => onInputChange('gte', e.target.value)}\n        />\n      </div>\n      <div className=\"form-group col-xs-6\">\n        <label className=\"sr-only\" htmlFor={`number-range-${input.name}-lte`}>\n          {m(messages.max)}\n        </label>\n        <input\n          value={lteString}\n          type=\"number\"\n          className=\"form-control\"\n          id={`number-range-${input.name}-lte`}\n          placeholder={m(messages.max)}\n          onChange={(e) => onInputChange('lte', e.target.value)}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default React.forwardRef(NumberRangeField);\n","import React, {\n  useCallback,\n  useMemo,\n  useState,\n  useRef,\n  useEffect,\n} from 'react';\nimport { Field, useField } from 'react-final-form';\nimport { useUIDSeed } from 'react-uid';\nimport { useIntl } from 'react-intl';\nimport usePreviousModule from 'react-use/lib/usePrevious.js';\nimport { css } from '@emotion/react';\nimport ChoiceField from '../fields/ChoiceField.js';\nimport Title from '../Title.js';\nimport Panel from '../Panel.js';\nimport FilterPreviewer from '../FilterPreviewer.js';\nimport useChoiceState from '../../hooks/useChoiceState.js';\nimport messages from '../../messages/choiceFilter.js';\n\nconst usePrevious = usePreviousModule.default || usePreviousModule;\n\nconst subscription = { value: true };\n\nfunction parseValue(value) {\n  if (Array.isArray(value) && !value.length) {\n    return undefined;\n  }\n\n  return value;\n}\n\nfunction formatValue(value) {\n  // if (value !== undefined) {\n  //   return [].concat(value);\n  // }\n\n  return value;\n}\n\nfunction Preview({\n  name,\n  filter,\n  getOptions,\n  component = FilterPreviewer,\n  disabled,\n  ...rest\n}) {\n  const intl = useIntl();\n  const { input } = useField(name, { subscription });\n  const options = useMemo(() => getOptions(filter), [filter, getOptions]);\n\n  const valueOptions = useMemo(() => {\n    if ([undefined, null, ''].includes(input?.value)) {\n      return [];\n    }\n\n    if (!options.length) {\n      return [];\n    }\n\n    return [].concat(input.value).map(\n      (v) =>\n        options.find((option) => option.value === v) ?? {\n          value: v,\n          label: intl.formatMessage(messages.unrecognizedOption, { value: v }),\n        },\n    );\n  }, [input.value, options, intl]);\n\n  const onRemove = useCallback(\n    (option) => (e) => {\n      e.stopPropagation();\n\n      if (disabled) {\n        return;\n      }\n\n      // radio value is not an array\n      if (!Array.isArray(input.value)) {\n        input.onChange(undefined);\n        return;\n      }\n\n      const newValue = input.value.filter((v) => v !== option.value);\n\n      input.onChange(newValue.length ? newValue : undefined);\n    },\n    [input, disabled],\n  );\n\n  if (!valueOptions?.length) {\n    return null;\n  }\n\n  return React.createElement(component, {\n    name,\n    filter,\n    getOptions,\n    valueOptions,\n    onRemove,\n    disabled,\n    ...rest,\n  });\n}\n\nconst ChoiceFilter = React.forwardRef(function ChoiceFilter(\n  {\n    name,\n    filter,\n    getTotal,\n    searchPlaceholder,\n    searchAriaLabel,\n    getOptions,\n    disabled,\n    collapsed,\n    inputType = 'checkbox',\n    pageSize = 10,\n    searchMinSize = 2 * pageSize,\n    sort,\n    tag,\n    preventDefault,\n  },\n  _ref,\n) {\n  const intl = useIntl();\n  const seed = useUIDSeed();\n\n  const {\n    options,\n    searchValue,\n    onSearchChange,\n    foundOptions,\n    countOptions,\n    hasMoreOptions,\n    moreOptions,\n    lessOptions,\n  } = useChoiceState({\n    filter,\n    getOptions,\n    collapsed,\n    pageSize,\n    sort,\n  });\n\n  // Focus on new option\n  const newOptionRef = useRef(null);\n  const previousCountOptions = usePrevious(countOptions);\n  useEffect(() => {\n    if (\n      newOptionRef.current\n      && countOptions !== previousCountOptions\n      && countOptions - pageSize === previousCountOptions\n    ) {\n      newOptionRef.current.focus();\n    }\n  }, [countOptions, previousCountOptions]);\n\n  return (\n    <>\n      {options.length > searchMinSize ? (\n        <input\n          className=\"form-control input-sm margin-top-xs\"\n          value={searchValue}\n          onChange={onSearchChange}\n          placeholder={\n            searchPlaceholder || intl.formatMessage(messages.searchPlaceholder)\n          }\n          aria-label={searchAriaLabel}\n          title={searchAriaLabel}\n          css={css`\n            width: 50%;\n          `}\n        />\n      ) : null}\n\n      {foundOptions.length === 0 ? (\n        <div className=\"text-muted margin-v-xs\">\n          {intl.formatMessage(messages.noResult)}\n        </div>\n      ) : null}\n\n      {foundOptions.map((option, index) =>\n        (index < countOptions ? (\n          <Field\n            key={seed(option)}\n            name={name}\n            subscription={subscription}\n            parse={parseValue}\n            format={formatValue}\n            component={ChoiceField}\n            type={inputType}\n            value={option.value}\n            option={option}\n            filter={filter}\n            getTotal={getTotal}\n            disabled={disabled}\n            tag={tag}\n            preventDefault={preventDefault}\n            ref={index === countOptions - pageSize ? newOptionRef : null}\n          />\n        ) : null))}\n\n      {hasMoreOptions ? (\n        <button\n          type=\"button\"\n          className=\"btn btn-link btn-link-inline\"\n          onClick={moreOptions}\n        >\n          {intl.formatMessage(messages.moreOptions)}\n        </button>\n      ) : null}\n\n      {!hasMoreOptions && countOptions > pageSize ? (\n        <button\n          type=\"button\"\n          className=\"btn btn-link btn-link-inline\"\n          onClick={lessOptions}\n        >\n          {intl.formatMessage(messages.lessOptions)}\n        </button>\n      ) : null}\n    </>\n  );\n});\n\nconst Collapsable = React.forwardRef(function Collapsable(\n  { name, filter, component, getTotal, getOptions, disabled, ...rest },\n  ref,\n) {\n  const [collapsed, setCollapsed] = useState(filter.defaultCollapsed ?? true);\n\n  return (\n    <Panel\n      header={(\n        <Title\n          name={name}\n          filter={filter}\n          component={Preview}\n          getOptions={getOptions}\n          disabled={disabled}\n        />\n      )}\n      collapsed={collapsed}\n      setCollapsed={setCollapsed}\n    >\n      <ChoiceFilter\n        ref={ref}\n        name={name}\n        filter={filter}\n        component={component}\n        getTotal={getTotal}\n        getOptions={getOptions}\n        disabled={disabled}\n        collapsed={collapsed}\n        {...rest}\n      />\n    </Panel>\n  );\n});\n\nconst exported = React.memo(ChoiceFilter);\n\n// React.memo lose statics\nexported.Preview = Preview;\nexported.Collapsable = Collapsable;\n\nexport default exported;\n","import React, { useMemo, useRef } from 'react';\nimport { useUIDSeed } from 'react-uid';\nimport { useIntl } from 'react-intl';\nimport cn from 'classnames';\nimport { getLocaleValue } from '@openagenda/intl';\nimport a11yButtonActionHandler from '@openagenda/react-shared/dist/utils/a11yButtonActionHandler.js';\n\nfunction useOnChoiceChange(input, preventDefault) {\n  const inputRef = useRef();\n\n  const onChange = useMemo(\n    () =>\n      a11yButtonActionHandler((e) => {\n        if (e.target === inputRef.current) {\n          return;\n        }\n\n        if (preventDefault) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n\n        if (e.currentTarget.getAttribute('aria-disabled') === 'true') {\n          return;\n        }\n\n        if (e.currentTarget.getAttribute('aria-checked') === 'true') {\n          input.onChange({\n            target: {\n              type: input.type,\n              value: input.value,\n              checked: false,\n            },\n          });\n          return;\n        }\n\n        input.onChange({\n          target: {\n            type: input.type,\n            value: input.value,\n            checked: true,\n          },\n        });\n      }),\n    [input.onChange, input.type, input.value, preventDefault],\n  );\n\n  return {\n    inputRef,\n    onChange,\n  };\n}\n\nconst ChoiceField = React.forwardRef(function ChoiceField(\n  {\n    input,\n    getTotal,\n    filter,\n    option,\n    disabled,\n    tag: Tag = 'div',\n    preventDefault = true,\n  },\n  ref,\n) {\n  const intl = useIntl();\n  const seed = useUIDSeed();\n  const total = useMemo(\n    () => getTotal?.(filter, option),\n    [filter, getTotal, option],\n  );\n\n  const { inputRef, onChange } = useOnChoiceChange(input, preventDefault);\n\n  // option, onChange, input, total, disabled\n\n  return (\n    <Tag\n      className={cn(input.type, {\n        disabled,\n        active: input.checked,\n        inactive: !input.checked,\n      })}\n    >\n      <span\n        ref={ref}\n        className=\"oa-choice-option-label\"\n        role=\"checkbox\"\n        tabIndex=\"0\"\n        aria-checked={input.checked}\n        aria-disabled={disabled}\n        onClick={onChange}\n        onKeyPress={onChange}\n      >\n        <input\n          ref={inputRef}\n          tabIndex=\"-1\"\n          type={input.type}\n          id={seed(input)}\n          disabled={disabled}\n          {...input}\n        />\n        {getLocaleValue(option.label, intl.locale) || <>&nbsp;</>}\n        {Number.isInteger(total) && total !== 0 ? (\n          <span className=\"oa-filter-total\">{total}</span>\n        ) : null}\n      </span>\n    </Tag>\n  );\n});\n\nexport default ChoiceField;\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  noResult: {\n    id: 'ReactFilters.messages.choiceFilter.noResult',\n    defaultMessage: 'No result',\n  },\n  searchPlaceholder: {\n    id: 'ReactFilters.messages.choiceFilter.searchPlaceholder',\n    defaultMessage: 'Search',\n  },\n  moreOptions: {\n    id: 'ReactFilters.messages.choiceFilter.moreOptions',\n    defaultMessage: 'More options',\n  },\n  lessOptions: {\n    id: 'ReactFilters.messages.choiceFilter.lessOptions',\n    defaultMessage: 'Less options',\n  },\n  unrecognizedOption: {\n    id: 'ReactFilters.messages.choiceFilter.unrecognizedOption',\n    defaultMessage: 'Unknown filter value ({value})',\n  },\n});\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Field, useField } from 'react-final-form';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { parseISO, endOfDay, isSameDay } from 'date-fns';\nimport DefinedRangePicker from '../fields/DefinedRangeField.js';\nimport Title from '../Title.js';\nimport Panel from '../Panel.js';\nimport FilterPreviewer from '../FilterPreviewer.js';\n\nconst messages = defineMessages({\n  singleDate: {\n    id: 'ReactFilters.DefinedRangeFilter.singleDate',\n    defaultMessage: '{date}',\n  },\n  dateRange: {\n    id: 'ReactFilters.DefinedRangeFilter.dateRange',\n    defaultMessage: 'From {startDate} to {endDate}',\n  },\n  startDate: {\n    id: 'ReactFilters.DefinedRangeFilter.startDate',\n    defaultMessage: 'Start',\n  },\n  endDate: {\n    id: 'ReactFilters.DefinedRangeFilter.endDate',\n    defaultMessage: 'End',\n  },\n  until: {\n    id: 'ReactFilters.DefinedRangeFilter.until',\n    defaultMessage: 'Until {date}',\n  },\n  from: {\n    id: 'ReactFilters.DefinedRangeFilter.from',\n    defaultMessage: 'From {date}',\n  },\n});\n\nconst subscription = { value: true };\n\n// For display (store -> form)\nfunction formatValue(value) {\n  if (value === undefined) {\n    return [\n      {\n        startDate: null,\n        endDate: null,\n        key: 'selection',\n      },\n    ];\n  }\n\n  if (Array.isArray(value)) {\n    return value.map((v) => ({\n      ...v,\n      startDate: typeof v.gte === 'string' ? parseISO(v.gte) : v.gte,\n      endDate: typeof v.lte === 'string' ? parseISO(v.lte) : v.lte,\n    }));\n  }\n\n  if (typeof value === 'object') {\n    return [\n      {\n        startDate:\n          typeof value.gte === 'string' ? parseISO(value.gte) : value.gte,\n        endDate:\n          typeof value.lte === 'string' ? parseISO(value.lte) : value.lte,\n        key: 'selection',\n      },\n    ];\n  }\n\n  return value;\n}\n\n// For save (form -> store)\nfunction parseValue(value) {\n  if (!value) {\n    return value;\n  }\n\n  const [selection] = value;\n\n  if (selection.startDate === null && selection.endDate === null) {\n    return undefined;\n  }\n\n  return {\n    gte: selection.startDate.toISOString(),\n    lte: (selection.endDate\n      ? endOfDay(selection.endDate)\n      : selection.endDate\n    ).toISOString(),\n    tz: Intl.DateTimeFormat().resolvedOptions().timeZone,\n  };\n}\n\nfunction Preview({\n  name,\n  staticRanges = [],\n  component = FilterPreviewer,\n  disabled,\n  ...rest\n}) {\n  const intl = useIntl();\n  const { input } = useField(name, {\n    subscription,\n    parse: parseValue,\n    format: formatValue,\n  });\n  const value = input.value?.[0];\n\n  const selectedStaticRange = useMemo(\n    () => value && staticRanges.find((v) => v.isSelected(value)),\n    [value, staticRanges],\n  );\n\n  const singleDay = useMemo(\n    () =>\n      value?.startDate\n      && value?.endDate\n      && isSameDay(value.startDate, value.endDate),\n    [value],\n  );\n\n  const onRemove = useCallback(\n    (e) => {\n      e.stopPropagation();\n\n      if (disabled) {\n        return;\n      }\n\n      input.onChange(undefined);\n    },\n    [input, disabled],\n  );\n\n  let label;\n\n  if (!value?.startDate && !value?.endDate) {\n    return null;\n  }\n\n  if (selectedStaticRange) {\n    label = selectedStaticRange.label;\n  } else if (value.startDate === null) {\n    label = intl.formatMessage(messages.until, { date: value.endDate });\n  } else if (value.endDate === null) {\n    label = intl.formatMessage(messages.from, { date: value.startDate });\n  } else {\n    label = singleDay\n      ? intl.formatMessage(messages.singleDate, { date: value.startDate })\n      : intl.formatMessage(messages.dateRange, {\n        startDate: value.startDate,\n        endDate: value.endDate,\n      });\n  }\n\n  return React.createElement(component, {\n    name,\n    staticRanges,\n    label,\n    onRemove,\n    disabled,\n    ...rest,\n  });\n}\n\nconst DefinedRangeFilter = React.forwardRef(function DefinedRangeFilter(\n  { name, staticRanges, inputRanges },\n  ref,\n) {\n  return (\n    <Field\n      ref={ref}\n      name={name}\n      subscription={subscription}\n      parse={parseValue}\n      format={formatValue}\n      component={DefinedRangePicker}\n      staticRanges={staticRanges}\n      inputRanges={inputRanges}\n    />\n  );\n});\n\nconst Collapsable = React.forwardRef(function Collapsable(\n  { name, filter, component, disabled, staticRanges, inputRanges, ...rest },\n  ref,\n) {\n  const [collapsed, setCollapsed] = useState(true);\n\n  return (\n    <Panel\n      header={(\n        <Title\n          name={name}\n          filter={filter}\n          component={Preview}\n          staticRanges={staticRanges}\n          disabled={disabled}\n        />\n      )}\n      collapsed={collapsed}\n      setCollapsed={setCollapsed}\n    >\n      <DefinedRangeFilter\n        ref={ref}\n        name={name}\n        filter={filter}\n        component={component}\n        staticRanges={staticRanges}\n        inputRanges={inputRanges}\n        disabled={disabled}\n        collapsed={collapsed}\n        {...rest}\n      />\n    </Panel>\n  );\n});\n\nconst exported = React.memo(DefinedRangeFilter);\n\n// React.memo lose statics\nexported.Preview = Preview;\nexported.Collapsable = Collapsable;\n\nexport default exported;\n","import isEqual from 'lodash/isEqual.js';\nimport isDate from 'lodash/isDate.js';\nimport React, { useCallback, useState } from 'react';\nimport { DefinedRange } from '@openagenda/react-date-range';\nimport useIsomorphicLayoutEffectModule from 'react-use/lib/useIsomorphicLayoutEffect.js';\nimport useLatestModule from 'react-use/lib/useLatest.js';\nimport usePreviousModule from 'react-use/lib/usePrevious.js';\n\nconst useIsomorphicLayoutEffect = useIsomorphicLayoutEffectModule.default || useIsomorphicLayoutEffectModule;\nconst useLatest = useLatestModule.default || useLatestModule;\nconst usePrevious = usePreviousModule.default || usePreviousModule;\n\nconst defaultGetInitialValue = () => [\n  {\n    startDate: null,\n    endDate: -1,\n    key: 'selection',\n  },\n];\n\nfunction normalizeValue(value) {\n  if (!value?.length) {\n    return value;\n  }\n\n  return value.map((v) => ({\n    startDate: isDate(v.startDate) ? v.startDate.getTime() : v.startDate,\n    endDate: isDate(v.endDate) ? v.endDate.getTime() : v.endDate,\n    key: v.key,\n  }));\n}\n\nfunction DefinedRangeField(\n  {\n    input,\n    meta,\n    staticRanges = [],\n    inputRanges = [],\n    rangeColor = '#41acdd',\n    disabled,\n    ...otherProps\n  },\n  _ref,\n) {\n  const [ranges, setRanges] = useState(\n    () => input.value ?? defaultGetInitialValue(),\n  );\n\n  const latestRanges = useLatest(ranges);\n  const previousValue = usePrevious(input.value);\n\n  const { onChange } = input;\n\n  const onDefinedRangeChange = useCallback(\n    (item) => {\n      const value = [item?.selection ? item.selection : item.range1];\n\n      setRanges(value);\n      onChange(value);\n    },\n    [onChange],\n  );\n\n  // If value change then update internal ranges\n  useIsomorphicLayoutEffect(() => {\n    if (\n      previousValue\n      && !isEqual(normalizeValue(input.value), normalizeValue(previousValue))\n      && !isEqual(\n        normalizeValue(input.value),\n        normalizeValue(latestRanges.current),\n      )\n    ) {\n      setRanges(input.value);\n    }\n  }, [input.value, previousValue, latestRanges]);\n\n  const definedRangePickerProps = {\n    ranges,\n    staticRanges,\n    inputRanges,\n    rangeColors: [rangeColor],\n    ...otherProps,\n  };\n\n  return (\n    <div className=\"rdrDateRangePickerWrapper\">\n      <DefinedRange\n        {...definedRangePickerProps}\n        onChange={onDefinedRangeChange}\n        className={undefined}\n      />\n    </div>\n  );\n}\n\nexport default React.forwardRef(DefinedRangeField);\n","import React, { useCallback } from 'react';\nimport { Field, useField } from 'react-final-form';\nimport { useUIDSeed } from 'react-uid';\nimport { defineMessages, useIntl } from 'react-intl';\nimport FilterPreviewer from '../FilterPreviewer.js';\nimport SearchInput from '../fields/SearchInput.js';\n\nconst subscription = { value: true };\n\nconst messages = defineMessages({\n  placeholder: {\n    id: 'ReactFilters.filters.searchFilter.placeholder',\n    defaultMessage: 'Search',\n  },\n  previewLabel: {\n    id: 'ReactFilters.filters.searchFilter.previewLabel',\n    defaultMessage: 'Search',\n  },\n});\n\nfunction Preview({\n  name,\n  filter,\n  component = FilterPreviewer,\n  disabled,\n  ...rest\n}) {\n  const { input } = useField(name, { subscription });\n\n  const onRemove = useCallback(\n    (e) => {\n      e.stopPropagation();\n\n      if (disabled) {\n        return;\n      }\n\n      input.onChange(undefined);\n    },\n    [input, disabled],\n  );\n\n  if (!input.value || input.value === '') {\n    return null;\n  }\n\n  return React.createElement(component, {\n    name,\n    filter,\n    label: input.value,\n    onRemove,\n    disabled,\n    ...rest,\n  });\n}\n\nconst SearchFilter = React.forwardRef(function SearchFilter(\n  { name, filter, component = SearchInput, placeholder = null, ...rest },\n  _ref,\n) {\n  const seed = useUIDSeed();\n  const intl = useIntl();\n\n  return (\n    <Field\n      key={seed(filter)}\n      name={name}\n      subscription={subscription}\n      component={component}\n      type=\"text\"\n      filter={filter}\n      placeholder={placeholder || intl.formatMessage(messages.placeholder)}\n      {...rest}\n    />\n  );\n});\n\nconst exported = React.memo(SearchFilter);\n\n// React.memo lose statics\nexported.Preview = Preview;\n\nexport default exported;\n","import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport { useForm } from 'react-final-form';\nimport { useDebouncedCallback } from 'use-debounce';\nimport { defineMessages, useIntl } from 'react-intl';\nimport FiltersAndWidgetsContext from '../../contexts/FiltersAndWidgetsContext.js';\n\nconst messages = defineMessages({\n  ariaLabel: {\n    id: 'ReactFilters.components.fields.SearchInput.ariaLabel',\n    defaultMessage: 'Search',\n  },\n});\n\nfunction Input({ input, placeholder, ariaLabel, onButtonClick, manualSubmit }) {\n  const intl = useIntl();\n\n  return (\n    <div className=\"input-group mb-3\">\n      <input\n        className=\"form-control\"\n        autoComplete=\"off\"\n        placeholder={placeholder}\n        aria-label={ariaLabel}\n        title={ariaLabel}\n        {...input}\n      />\n      {!manualSubmit ? (\n        <div className=\"input-group-append\">\n          <button\n            type=\"submit\"\n            className=\"btn btn-outline-secondary\"\n            onClick={onButtonClick}\n            aria-label={intl.formatMessage(messages.ariaLabel)}\n          >\n            <i className=\"fa fa-search\" aria-hidden=\"true\" />\n          </button>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport default function SearchInput({\n  inputComponent = Input,\n  input,\n  onChange, // user onChange\n  manualSearch,\n  ...rest\n}) {\n  const form = useForm();\n  const [tmpValue, setTmpValue] = useState(input.value);\n\n  const {\n    filtersOptions: { manualSubmit },\n  } = useContext(FiltersAndWidgetsContext);\n\n  const debouncedOnChange = useDebouncedCallback((e) => {\n    if (manualSearch) {\n      return;\n    }\n\n    input.onChange(e);\n    if (typeof onChange === 'function') {\n      onChange(e.target.value);\n    }\n  }, 400);\n\n  const inputOnChange = useCallback(\n    (e) => {\n      e.persist();\n\n      setTmpValue(e.target.value);\n      debouncedOnChange(e);\n      // direct call with manualSubmit\n      if (manualSubmit) {\n        debouncedOnChange.flush();\n      }\n    },\n    [debouncedOnChange],\n  );\n\n  const onButtonClick = useCallback(\n    (e) => {\n      e.preventDefault();\n      if (manualSearch) {\n        input.onChange(tmpValue);\n        if (typeof onChange === 'function') {\n          onChange(tmpValue);\n        }\n      }\n      return form.submit();\n    },\n    [form, input, manualSearch, onChange, tmpValue],\n  );\n\n  const wrappedInput = useMemo(\n    () => ({\n      ...input,\n      value: tmpValue,\n      onChange: inputOnChange,\n    }),\n    [input, inputOnChange, tmpValue],\n  );\n\n  useEffect(() => {\n    setTmpValue(input.value);\n  }, [input.value]);\n\n  return React.createElement(inputComponent, {\n    input: wrappedInput,\n    onButtonClick,\n    manualSubmit,\n    ...rest,\n  });\n}\n","import React, { useCallback, useState } from 'react';\nimport { Field, useField } from 'react-final-form';\nimport { defineMessages, useIntl } from 'react-intl';\nimport MapField from '../fields/MapField/index.js';\nimport Title from '../Title.js';\nimport Panel from '../Panel.js';\nimport FilterPreviewer from '../FilterPreviewer.js';\n\nconst subscription = { value: true };\n\nconst messages = defineMessages({\n  previewLabel: {\n    id: 'ReactFilters.filters.MapFilter.previewLabel',\n    defaultMessage: 'Map',\n  },\n});\n\nfunction Preview({\n  name,\n  filter,\n  component = FilterPreviewer,\n  disabled,\n  ...rest\n}) {\n  const intl = useIntl();\n  const { input } = useField(name, { subscription });\n\n  const onRemove = useCallback(\n    (e) => {\n      e.stopPropagation();\n\n      if (disabled) {\n        return;\n      }\n\n      input.onChange(undefined);\n    },\n    [input, disabled],\n  );\n\n  if (!input.value || input.value === '') {\n    return null;\n  }\n\n  return React.createElement(component, {\n    name,\n    filter,\n    label: intl.formatMessage(messages.previewLabel),\n    onRemove,\n    disabled,\n    ...rest,\n  });\n}\n\nfunction MapFilter(\n  {\n    name,\n    filter,\n    disabled,\n    collapsed,\n    className,\n    component = MapField,\n    ...rest\n  },\n  ref,\n) {\n  return (\n    <Field\n      collapsed={collapsed}\n      ref={ref}\n      name={name}\n      subscription={subscription}\n      component={component}\n      filter={filter}\n      disabled={disabled}\n      className={className}\n      {...rest}\n    />\n  );\n\n  // return <LoadableMapField ref={ref} {...props} />;\n}\n\nconst Collapsable = React.forwardRef(function Collapsable(\n  { name, filter, disabled, ...rest },\n  ref,\n) {\n  const [collapsed, setCollapsed] = useState(true);\n\n  return (\n    <Panel\n      header={(\n        <Title\n          name={name}\n          filter={filter}\n          component={Preview}\n          disabled={disabled}\n        />\n      )}\n      collapsed={collapsed}\n      setCollapsed={setCollapsed}\n    >\n      <MapFilter\n        ref={ref}\n        name={name}\n        filter={filter}\n        disabled={disabled}\n        collapsed={collapsed}\n        {...rest}\n      />\n    </Panel>\n  );\n});\n\nconst exported = React.memo(React.forwardRef(MapFilter));\n\n// React.memo lose statics\nexported.Preview = Preview;\nexported.Collapsable = Collapsable;\n\nexport default exported;\n","import React from 'react';\nimport { css } from '@emotion/react';\nimport cn from 'classnames';\nimport LoadableMap from './LoadableMap.js';\nimport { gestureHandlingStyle, markerClusterStyle } from './mapStyle.js';\n\n// x remettre la carte en face des marqueurs après une recherche\n// x Submit au click du lien en mode manual\n// disabled sur le lien\n\nconst mapContainerStyle = css`\n  position: relative;\n`;\n\nconst mapStyle = css`\n  height: 100%;\n  ${markerClusterStyle}\n  ${gestureHandlingStyle}\n`;\n\nfunction MapField(\n  {\n    input,\n    collapsed,\n    // name,\n    filter,\n    tileAttribution,\n    tileUrl,\n    loadGeoData,\n    initialViewport,\n    defaultViewport,\n    className,\n    mapClass,\n  },\n  ref,\n) {\n  return !collapsed ? (\n    <div css={mapContainerStyle} className={cn(className, mapClass)}>\n      <LoadableMap\n        ref={ref}\n        input={input}\n        filter={filter}\n        tileAttribution={tileAttribution}\n        tileUrl={tileUrl}\n        loadGeoData={loadGeoData}\n        initialViewport={initialViewport}\n        defaultViewport={defaultViewport}\n        css={mapStyle}\n      />\n    </div>\n  ) : null;\n}\n\nexport default React.forwardRef(MapField);\n","import loadable from '@openagenda/react-shared/dist/utils/loadable.js';\n\n// // eslint-disable-next-line camelcase\n// const contextRequire = typeof __webpack_require__ !== 'undefined'\n//   ? import.meta.webpackContext('.', {\n//     recursive: true,\n//     regExp: /\\.js$/,\n//     mode: 'weak',\n//   }) : null;\n//\n// const LoadableMapField = loadableComponent(\n//   {\n//     chunkName: 'reactFilters-Map',\n//     importAsync: () =>\n//       import(\n//         /* webpackChunkName: \"reactFilters-Map\" */\n//         './Map.js'\n//       ),\n//     resolve: () => {\n//       if (contextRequire) {\n//         return contextRequire.resolve('./Map.js');\n//       }\n//       const { resolve } = import.meta;\n//       if (typeof resolve === 'function') {\n//         return resolve('./Map.js');\n//       }\n//     },\n//   },\n//   { ssr: false },\n// );\n\nconst LoadableMapField = loadable(\n  () => import(/* webpackChunkName: \"reactFilters-Map\" */ './Map.js'),\n  { ssr: false },\n);\n\nexport default LoadableMapField;\n","export const markerClusterStyle = {\n  '& .marker-cluster-small': {\n    backgroundColor: 'rgba(181, 226, 140, 0.6)',\n  },\n  '& .marker-cluster-small div': {\n    backgroundColor: 'rgba(110, 204, 57, 0.6)',\n  },\n  '& .marker-cluster-medium': {\n    backgroundColor: 'rgba(241, 211, 87, 0.6)',\n  },\n  '& .marker-cluster-medium div': {\n    backgroundColor: 'rgba(240, 194, 12, 0.6)',\n  },\n  '& .marker-cluster-large': {\n    backgroundColor: 'rgba(253, 156, 115, 0.6)',\n  },\n  '& .marker-cluster-large div': {\n    backgroundColor: 'rgba(241, 128, 23, 0.6)',\n  },\n  '& .marker-cluster': {\n    backgroundClip: 'padding-box',\n    borderRadius: '20px',\n  },\n  '& .marker-cluster div': {\n    width: '30px',\n    height: '30px',\n    marginLeft: '5px',\n    marginTop: '5px',\n    textAlign: 'center',\n    borderRadius: '15px',\n    font: \"12px 'Helvetica Neue', Arial, Helvetica, sans-serif\",\n  },\n  '& .marker-cluster span': {\n    lineHeight: '30px',\n  },\n};\n\nexport const gestureHandlingStyle = {\n  '&.leaflet-gesture-handling:after': {\n    color: '#fff',\n    fontFamily: 'Roboto, Arial, sans-serif',\n    fontSize: '22px',\n    justifyContent: 'center',\n    display: 'flex',\n    alignItems: 'center',\n    padding: '15px',\n    position: 'absolute',\n    top: '0',\n    left: '0',\n    right: '0',\n    bottom: '0',\n    background: 'rgba(0, 0, 0, .5)',\n    zIndex: 1001,\n    pointerEvents: 'none',\n    textAlign: 'center',\n    transition: 'opacity .8s ease-in-out',\n    opacity: 0,\n    content: '\"\"',\n  },\n  '&.leaflet-gesture-handling-warning:after': {\n    transitionDuration: '.3s',\n    opacity: 1,\n  },\n  '&.leaflet-gesture-handling-touch:after': {\n    content: 'attr(data-gesture-handling-touch-content)',\n  },\n  '&.leaflet-gesture-handling-scroll:after': {\n    content: 'attr(data-gesture-handling-scroll-content)',\n  },\n};\n","import React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { useForm, FormSpy } from 'react-final-form';\nimport a11yButtonActionHandler from '@openagenda/react-shared/dist/utils/a11yButtonActionHandler.js';\nimport matchQuery from '../../utils/matchQuery.js';\nimport updateFormValues from '../../utils/updateFormValues.js';\nimport updateCustomFilter from '../../utils/updateCustomFilter.js';\nimport FilterPreviewer from '../FilterPreviewer.js';\n\nconst subscription = { values: true };\n\nfunction Preview({\n  name,\n  component = FilterPreviewer,\n  disabled,\n  activeFilterLabel,\n  filter,\n  query,\n  ...rest\n}) {\n  const form = useForm();\n\n  const onRemove = useCallback(\n    (e) => {\n      e.stopPropagation();\n\n      if (disabled) {\n        return;\n      }\n\n      updateFormValues(form, filter.query, false);\n    },\n    [disabled, form, filter],\n  );\n\n  return (\n    <FormSpy subscription={subscription}>\n      {({ values }) => {\n        if (!matchQuery(values, query) || !activeFilterLabel) {\n          return null;\n        }\n\n        return React.createElement(component, {\n          name,\n          label: activeFilterLabel,\n          onRemove,\n          disabled,\n          filter,\n          ...rest,\n        });\n      }}\n    </FormSpy>\n  );\n}\n\nfunction CustomFilter({ filter }) {\n  const form = useForm();\n  const firstRender = useRef(true);\n\n  const updateForm = useCallback(\n    (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      const query = form.getState().values;\n\n      updateFormValues(form, filter.query, !matchQuery(query, filter.query));\n    },\n    [filter.query, form],\n  );\n\n  const onChange = useMemo(\n    () => a11yButtonActionHandler(updateForm),\n    [updateForm],\n  );\n\n  useEffect(() => {\n    if (firstRender.current) {\n      firstRender.current = false;\n\n      const query = form.getState().values;\n      const matchInitialQuery = matchQuery(query, filter.query);\n      const registeredFields = form.getRegisteredFields();\n\n      for (const key in filter.query) {\n        if (Object.prototype.hasOwnProperty.call(filter.query, key)) {\n          if (!registeredFields.includes(key)) {\n            form.registerField(\n              key,\n              () => {},\n              { value: true },\n              {\n                initialValue: matchInitialQuery ? filter.query[key] : undefined,\n              },\n            );\n          }\n        }\n      }\n    }\n\n    const handlerElem = filter.handlerElem || filter.elem;\n    const innerCheckboxes = handlerElem.querySelectorAll(\n      'input[type=\"checkbox\"]',\n    );\n\n    const handlerIsLabelWithCheckbox = innerCheckboxes.length === 1\n      && handlerElem.tagName === 'LABEL'\n      && handlerElem.contains(innerCheckboxes[0]);\n\n    if (\n      innerCheckboxes.length === 1\n      && (!filter.handlerElem || handlerIsLabelWithCheckbox)\n    ) {\n      innerCheckboxes[0].addEventListener('change', updateForm, false);\n    } else {\n      handlerElem.addEventListener('click', onChange, false);\n    }\n\n    handlerElem.addEventListener('keydown', onChange, false);\n\n    const unsubscribe = form.subscribe(\n      ({ values }) =>\n        updateCustomFilter(filter, matchQuery(values, filter.query)),\n      { values: true },\n    );\n\n    return () => {\n      if (\n        innerCheckboxes.length === 1\n        && (!filter.handlerElem || handlerIsLabelWithCheckbox)\n      ) {\n        innerCheckboxes[0].removeEventListener('change', updateForm, false);\n      } else {\n        handlerElem.removeEventListener('click', onChange, false);\n      }\n\n      handlerElem.removeEventListener('keydown', onChange, false);\n\n      unsubscribe();\n    };\n  }, [filter, form, onChange, updateForm]);\n\n  return null;\n}\n\nconst exported = React.memo(CustomFilter);\n\n// React.memo lose statics\nexported.Preview = Preview;\n\nexport default exported;\n","export default function updateCustomFilter(filter, active) {\n  const activeClass = filter.activeClass || 'active';\n  const inactiveClass = filter.inactiveClass || 'inactive';\n  const { classList } = filter.activeTargetElem || filter.elem;\n\n  const handlerElem = filter.handlerElem || filter.elem;\n  const innerCheckboxes = handlerElem.querySelectorAll(\n    'input[type=\"checkbox\"]',\n  );\n  const checkbox = innerCheckboxes.length === 1 ? innerCheckboxes[0] : null;\n\n  if (active) {\n    if (classList.contains(inactiveClass)) classList.remove(inactiveClass);\n    if (!classList.contains(activeClass)) classList.add(activeClass);\n    if (checkbox && !checkbox.checked) checkbox.checked = true;\n  } else {\n    if (classList.contains(activeClass)) classList.remove(activeClass);\n    if (!classList.contains(inactiveClass)) classList.add(inactiveClass);\n    if (checkbox && checkbox.checked) checkbox.checked = false;\n  }\n}\n","import React, { useMemo, useCallback, useEffect, useRef } from 'react';\nimport { useForm, FormSpy } from 'react-final-form';\nimport useLatestModule from 'react-use/lib/useLatest.js';\nimport a11yButtonActionHandler from '@openagenda/react-shared/dist/utils/a11yButtonActionHandler.js';\nimport matchQuery from '../../utils/matchQuery.js';\nimport updateFormValues from '../../utils/updateFormValues.js';\nimport updateCustomFilter from '../../utils/updateCustomFilter.js';\nimport { useFavoriteState } from '../../hooks/index.js';\nimport FilterPreviewer from '../FilterPreviewer.js';\nimport useFavoritesOnChange from '../../hooks/useFavoritesOnChange.js';\n\nconst useLatest = useLatestModule.default || useLatestModule;\n\nconst subscription = { values: true };\n\nfunction Preview({\n  name = 'favorites',\n  filter,\n  component = FilterPreviewer,\n  disabled,\n  activeFilterLabel,\n  agendaUid,\n  ...rest\n}) {\n  const form = useForm();\n  const [value] = useFavoriteState(filter.agendaUid || agendaUid);\n\n  const onRemove = useCallback(\n    (e) => {\n      e.stopPropagation();\n\n      if (disabled) {\n        return;\n      }\n\n      updateFormValues(\n        form,\n        {\n          uid: undefined,\n          favorites: undefined,\n        },\n        false,\n      );\n\n      const handlerElem = filter.handlerElem || filter.elem;\n      const innerCheckboxes = handlerElem.querySelectorAll(\n        'input[type=\"checkbox\"]',\n      );\n\n      if (innerCheckboxes.length === 1 && !filter.handlerElem) {\n        innerCheckboxes[0].checked = false;\n      }\n    },\n    [disabled, form, filter],\n  );\n\n  return (\n    <FormSpy subscription={subscription}>\n      {({ values }) => {\n        const query = {\n          uid: value,\n          favorites: '1',\n        };\n\n        if (!matchQuery(values, query) || !activeFilterLabel) {\n          return null;\n        }\n\n        return React.createElement(component, {\n          name,\n          label: activeFilterLabel,\n          onRemove,\n          disabled,\n          filter,\n          ...rest,\n        });\n      }}\n    </FormSpy>\n  );\n}\n\n// Favorite + uid\nconst FavoritesFilter = React.forwardRef(function FavoritesFilter(\n  { agendaUid, filter },\n  _ref,\n) {\n  const form = useForm();\n  const firstRender = useRef(true);\n  const [value] = useFavoriteState(filter.agendaUid || agendaUid);\n\n  const latestValue = useLatest(value);\n\n  const updateForm = useFavoritesOnChange(value, {\n    isExclusive: filter.exclusive,\n  });\n\n  const onChange = useMemo(\n    () => a11yButtonActionHandler(updateForm),\n    [updateForm],\n  );\n\n  useEffect(() => {\n    if (firstRender.current) {\n      firstRender.current = false;\n\n      const query = form.getState().values;\n      const registeredFields = form.getRegisteredFields();\n\n      if (!registeredFields.includes('uid')) {\n        form.registerField(\n          'uid',\n          () => {},\n          { value: true },\n          {\n            initialValue: query.uid,\n          },\n        );\n      }\n\n      if (!registeredFields.includes('favorites')) {\n        form.registerField(\n          'favorites',\n          () => {},\n          { value: true },\n          {\n            initialValue: query.favorites,\n          },\n        );\n      }\n    }\n\n    const handlerElem = filter.handlerElem || filter.elem;\n    const innerCheckboxes = handlerElem.querySelectorAll(\n      'input[type=\"checkbox\"]',\n    );\n\n    const handlerIsLabelWithCheckbox = innerCheckboxes.length === 1\n      && handlerElem.tagName === 'LABEL'\n      && handlerElem.contains(innerCheckboxes[0]);\n\n    if (\n      innerCheckboxes.length === 1\n      && (!filter.handlerElem || handlerIsLabelWithCheckbox)\n    ) {\n      innerCheckboxes[0].addEventListener('change', updateForm, false);\n    } else {\n      handlerElem.addEventListener('click', onChange, false);\n    }\n\n    handlerElem.addEventListener('keydown', onChange, false);\n\n    const unsubscribe = form.subscribe(\n      ({ values }) =>\n        updateCustomFilter(\n          filter,\n          matchQuery(values, {\n            uid: latestValue.current || ['-1'],\n            favorites: '1',\n          }),\n        ),\n      { values: true },\n    );\n\n    return () => {\n      if (\n        innerCheckboxes.length === 1\n        && (!filter.handlerElem || handlerIsLabelWithCheckbox)\n      ) {\n        innerCheckboxes[0].removeEventListener('change', updateForm, false);\n      } else {\n        handlerElem.removeEventListener('click', onChange, false);\n      }\n\n      handlerElem.removeEventListener('keydown', onChange, false);\n\n      unsubscribe();\n    };\n  }, [filter, form, latestValue, onChange, updateForm]);\n\n  return null;\n});\n\nconst exported = React.memo(FavoritesFilter);\n\n// React.memo lose statics\nexported.Preview = Preview;\n\nexport default exported;\n","import React, { useCallback } from 'react';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { Field, useField } from 'react-final-form';\nimport { endOfDay, isSameDay, parseISO } from 'date-fns';\nimport { getTimezoneOffset, utcToZonedTime } from 'date-fns-tz';\nimport FilterPreviewer from '../FilterPreviewer.js';\nimport TimelineField from '../fields/TimelineField.js';\n\nconst messages = defineMessages({\n  dateRange: {\n    id: 'ReactFilters.TimelineFilter.dateRange',\n    defaultMessage: 'From {startDate} to {endDate}',\n  },\n  until: {\n    id: 'ReactFilters.TimelineFilter.until',\n    defaultMessage: 'Until {date}',\n  },\n  from: {\n    id: 'ReactFilters.TimelineFilter.from',\n    defaultMessage: 'From {date}',\n  },\n});\n\nconst subscription = { value: true };\n\nfunction formatDateValue(value) {\n  if (!value || value === '') {\n    return null;\n  }\n\n  return typeof value === 'string' ? parseISO(value) : value;\n}\n\n// For display (store -> form)\nexport function formatValue(value) {\n  if (!value || !Array.isArray(value)) {\n    return [];\n  }\n\n  const currentTz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n  const tzFromStore = value[0].tz ?? currentTz;\n\n  return value.map(({ gte, lte }) => {\n    const start = formatDateValue(gte);\n    const end = formatDateValue(lte);\n    const tzDiff = getTimezoneOffset(tzFromStore, start ?? end ?? new Date())\n      - getTimezoneOffset(currentTz, start ?? end ?? new Date());\n\n    const convert = (d) => (tzDiff && d ? utcToZonedTime(d, tzFromStore) : d);\n\n    return {\n      startDate: convert(start),\n      endDate: convert(end),\n    };\n  });\n}\n\n// For save (form -> store)\nfunction parseValue(value) {\n  if (!value.length) {\n    return undefined;\n  }\n\n  const toStoreObj = ({ startDate, endDate }) => {\n    const start = formatDateValue(startDate);\n    const end = endDate ? endOfDay(formatDateValue(endDate)) : null;\n    return { gte: start, lte: end };\n  };\n\n  const result = value.map(toStoreObj);\n\n  if (result.length) {\n    result[0].tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n  }\n\n  return result.length ? result : undefined;\n}\n\nexport function Preview({\n  name,\n  component = FilterPreviewer,\n  disabled,\n  ...rest\n}) {\n  const intl = useIntl();\n  const { input } = useField(name, { subscription });\n  const ranges = formatValue(input.value);\n\n  const firstRange = ranges[0];\n  const lastRange = ranges[ranges.length - 1];\n\n  const begin = firstRange.startDate;\n  const end = lastRange.endDate;\n\n  const singleDay = begin && end && isSameDay(begin, end);\n\n  const onRemove = useCallback(\n    (e) => {\n      e.stopPropagation();\n      if (!disabled) input.onChange(undefined);\n    },\n    [input, disabled],\n  );\n\n  const fmt = (d) => intl.formatDate(d);\n\n  if (!ranges.length) return null;\n\n  let label;\n  if (!begin && !end) return null;\n  if (begin && !end) {\n    label = intl.formatMessage(messages.from, { date: fmt(begin) });\n  } else if (!begin && end) {\n    label = intl.formatMessage(messages.until, { date: fmt(end) });\n  } else {\n    label = singleDay\n      ? fmt(begin)\n      : intl.formatMessage(messages.dateRange, {\n        startDate: fmt(begin),\n        endDate: fmt(end),\n      });\n  }\n\n  return React.createElement(component, {\n    name,\n    label,\n    onRemove,\n    disabled,\n    ...rest,\n  });\n}\n\nconst TimelineFilter = React.forwardRef(function TimelineFilter(\n  { name, className, minDate, maxDate, shownDate, getQuery },\n  ref,\n) {\n  return (\n    <Field\n      ref={ref}\n      name={name}\n      subscription={subscription}\n      parse={parseValue}\n      format={formatValue}\n      component={TimelineField}\n      className={className}\n      minDate={minDate}\n      maxDate={maxDate}\n      shownDate={shownDate}\n      getQuery={getQuery}\n    />\n  );\n});\n\nconst exported = React.memo(TimelineFilter);\n\n// React.memo lose statics\nexported.Preview = Preview;\n\nexport default exported;\n","import React, {\n  useState,\n  useMemo,\n  useRef,\n  useEffect,\n  useImperativeHandle,\n  useContext,\n} from 'react';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { Swiper, SwiperSlide } from 'swiper/react';\nimport { FreeMode, Navigation } from 'swiper/modules';\nimport {\n  startOfDay,\n  endOfDay,\n  startOfMonth,\n  endOfMonth,\n  lastDayOfMonth,\n  addMonths,\n  isSameDay,\n  compareAsc,\n  format,\n} from 'date-fns';\nimport cn from 'classnames';\nimport dateFnsLocaleEN from 'date-fns/locale/en-US/index.js';\nimport useLoadTimingsData from '../../hooks/useLoadTimingsData.js';\nimport FiltersAndWidgetsContext from '../../contexts/FiltersAndWidgetsContext.js';\n\nconst messages = defineMessages({\n  selectMonth: {\n    id: 'ReactFilters.TimelineField.selectMonth',\n    defaultMessage: 'Select month',\n  },\n  selectDay: {\n    id: 'ReactFilters.TimelineField.selectDay',\n    defaultMessage: 'Select day',\n  },\n});\n\nfunction focusedDateToTimingsQuery(focusedDate) {\n  return {\n    gte: startOfMonth(focusedDate),\n    lte: endOfMonth(focusedDate),\n    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n  };\n}\n\nfunction formatMonthYear(date, dfnLocale) {\n  const localeCode = dfnLocale?.code ?? undefined;\n\n  return new Intl.DateTimeFormat(localeCode, {\n    month: 'long',\n    year: 'numeric',\n  }).format(date);\n}\n\nfunction TimelineField(\n  {\n    input,\n    // meta,\n    // disabled,\n    className,\n    // minDate,\n    // maxDate,\n    // shownDate,\n    getQuery,\n    // ...otherProps\n  },\n  ref,\n) {\n  const intl = useIntl();\n\n  const today = new Date();\n\n  const {\n    filtersOptions: { dateFnsLocale, searchMethod, res },\n  } = useContext(FiltersAndWidgetsContext);\n\n  const monthsList = useMemo(\n    () =>\n      Array.from({ length: 25 }, (_, i) => {\n        const d = addMonths(today, i - 12);\n        return { month: d.getMonth(), year: d.getFullYear() };\n      }),\n    [],\n  );\n\n  const [monthPos, setMonthPos] = useState(() => {\n    if (Array.isArray(input.value) && input.value.length) {\n      const firstDate = new Date(input.value[0].startDate);\n      return monthsList.findIndex(\n        (m) =>\n          m.month === firstDate.getMonth()\n          && m.year === firstDate.getFullYear(),\n      );\n    }\n    return 12;\n  });\n  const { month: monthIndex, year } = monthsList[monthPos];\n\n  const initialDay = useMemo(() => {\n    if (Array.isArray(input.value) && input.value.length) {\n      return new Date(input.value[0].startDate).getDate();\n    }\n    return today.getDate();\n  }, [input.value]);\n  const [focusedDay, setFocusedDay] = useState(initialDay);\n\n  const [data, setData] = useState(() => null);\n\n  const loadTimingsData = useLoadTimingsData(res, getQuery, { searchMethod });\n\n  useEffect(() => {\n    loadTimingsData(\n      {\n        timings: focusedDateToTimingsQuery(new Date(year, monthIndex)),\n      },\n      {\n        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      },\n    )\n      .then((newData) => setData(newData ?? []))\n      .catch((err) => {\n        console.log('Failed to load timings data', err);\n      });\n  }, [year, monthIndex]);\n\n  useImperativeHandle(ref, () => ({\n    onQueryChange: () => {\n      loadTimingsData(\n        {\n          timings: focusedDateToTimingsQuery(new Date(year, monthIndex)),\n        },\n        {\n          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n        },\n      )\n        .then((newData) => setData(newData ?? []))\n        .catch((err) => {\n          console.log('Failed to load timings data', err);\n        });\n    },\n  }));\n\n  // date composition\n  const getDaysArray = () => {\n    if (monthIndex === null || year === null) return [];\n    const nb = lastDayOfMonth(new Date(year, monthIndex, 1)).getDate();\n    return Array.from({ length: nb }, (_, i) => i + 1);\n  };\n\n  const toggleDay = (day) => {\n    if (monthIndex === null || year === null) return;\n    setFocusedDay(day);\n\n    const dateObj = new Date(year, monthIndex, day);\n    const current = Array.isArray(input.value) ? input.value : [];\n\n    const next = current.some(({ startDate }) =>\n      isSameDay(new Date(startDate), dateObj))\n      ? current.filter(\n        ({ startDate }) => !isSameDay(new Date(startDate), dateObj),\n      )\n      : [\n        ...current,\n        {\n          startDate: startOfDay(dateObj).toISOString(),\n          endDate: endOfDay(dateObj).toISOString(),\n        },\n      ];\n\n    next.sort((a, b) =>\n      compareAsc(new Date(a.startDate), new Date(b.startDate)));\n    if (current[0]?.tz) next[0].tz = current[0].tz;\n\n    input.onChange(next);\n  };\n\n  const dayRefs = useRef([]);\n  const monthRefs = useRef([]);\n\n  const daysSwiper = useRef(null);\n  const monthsSwiper = useRef(null);\n\n  const handleSelectMonth = (pos) => setMonthPos(pos);\n\n  const handleDayKey = (e, day, index) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      // like a click\n      e.preventDefault();\n      toggleDay(day);\n    } else if (e.key === 'ArrowRight') {\n      e.preventDefault();\n      const next = (index + 1) % 31;\n      dayRefs.current[next]?.focus();\n    } else if (e.key === 'ArrowLeft') {\n      e.preventDefault();\n      const prev = (index + 30) % 31;\n      dayRefs.current[prev]?.focus();\n    }\n  };\n\n  const handleMonthKey = (e, pos) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      // like a click\n      e.preventDefault();\n      handleSelectMonth(pos);\n    } else if (e.key === 'ArrowRight') {\n      e.preventDefault();\n      monthRefs.current[(pos + 1) % monthsList.length]?.focus();\n    } else if (e.key === 'ArrowLeft') {\n      e.preventDefault();\n      monthRefs.current[\n        (pos + monthsList.length - 1) % monthsList.length\n      ]?.focus();\n    }\n  };\n\n  // const months = Array.from({ length: 12 }, (_, i) => i);\n  const days = getDaysArray();\n\n  return (\n    <div ref={ref} className={className}>\n      <div\n        role=\"listbox\"\n        aria-label={intl.formatMessage(messages.selectMonth)}\n        style={{ display: 'flex' }}\n      >\n        <div className=\"swiper-button-prev oa-timeline-swiper-months-prev\" />\n        <Swiper\n          slidesPerView=\"auto\"\n          centeredSlides\n          centeredSlidesBounds\n          // loop\n          freeMode\n          navigation={{\n            prevEl: '.oa-timeline-swiper-months-prev',\n            nextEl: '.oa-timeline-swiper-months-next',\n          }}\n          modules={[FreeMode, Navigation]}\n          className=\"oa-timeline-swiper-months\"\n          onSwiper={(sw) => {\n            monthsSwiper.current = sw;\n            sw.slideTo(monthPos, 0, false);\n          }}\n        >\n          {monthsList.map(({ month, year: monthYear }, pos) => {\n            const isSelected = monthPos === pos;\n            const isTabStop = isSelected || (monthPos === null && pos === 0);\n\n            return (\n              <SwiperSlide key={`${monthYear}-${month}`}>\n                <span\n                  role=\"option\"\n                  aria-selected={isSelected}\n                  ref={(el) => {\n                    monthRefs.current[pos] = el;\n                  }}\n                  tabIndex={isTabStop ? 0 : -1}\n                  onClick={() => {\n                    if (\n                      monthsSwiper.current\n                      && !monthsSwiper.current.allowClick\n                    ) return;\n                    handleSelectMonth(pos);\n                  }}\n                  onKeyDown={(e) => handleMonthKey(e, pos)}\n                >\n                  {monthYear !== today.getFullYear()\n                    ? formatMonthYear(\n                      new Date(monthYear, month, 15),\n                      dateFnsLocale,\n                    )\n                    : format(new Date(monthYear, month, 15), 'MMMM', {\n                      locale: dateFnsLocale || dateFnsLocaleEN,\n                    })}\n                </span>\n              </SwiperSlide>\n            );\n          })}\n        </Swiper>\n        <div className=\"swiper-button-next oa-timeline-swiper-months-next\" />\n      </div>\n\n      <div\n        role=\"listbox\"\n        aria-label={intl.formatMessage(messages.selectDay)}\n        style={{ display: 'flex' }}\n      >\n        <div className=\"swiper-button-prev oa-timeline-swiper-days-prev\" />\n\n        <Swiper\n          slidesPerView=\"auto\"\n          centeredSlides\n          centeredSlidesBounds\n          // loop\n          freeMode\n          navigation={{\n            prevEl: '.oa-timeline-swiper-days-prev',\n            nextEl: '.oa-timeline-swiper-days-next',\n          }}\n          modules={[FreeMode, Navigation]}\n          className=\"oa-timeline-swiper-days\"\n          onSwiper={(sw) => {\n            daysSwiper.current = sw;\n            sw.slideTo(initialDay - 1, 0);\n          }}\n        >\n          {days.map((day, idx) => {\n            const dateObj = year !== null ? new Date(year, monthIndex, day) : null;\n            const isChecked = dateObj\n              ? input.value?.some((d) => isSameDay(d.startDate, dateObj))\n              : false;\n            const isTabStop = focusedDay === day;\n\n            const isActive = data?.find(\n              (d) => isSameDay(new Date(d.key), dateObj) && d.timingCount > 0,\n            );\n\n            return (\n              <SwiperSlide key={day}>\n                <span\n                  role=\"option\"\n                  aria-selected={isChecked}\n                  ref={(el) => {\n                    dayRefs.current[idx] = el;\n                  }}\n                  tabIndex={isTabStop ? 0 : -1}\n                  onClick={() => {\n                    if (daysSwiper.current && !daysSwiper.current.allowClick) return;\n                    toggleDay(day);\n                  }}\n                  onKeyDown={(e) => handleDayKey(e, day, idx)}\n                  className={cn('oa-timeline-swiper-days-day', {\n                    'oa-timeline-swiper-days-day-with-timings':\n                      data && isActive,\n                    'oa-timeline-swiper-days-day-without-timings':\n                      data && !isActive,\n                  })}\n                >\n                  {day}\n                </span>\n              </SwiperSlide>\n            );\n          })}\n        </Swiper>\n\n        <div className=\"swiper-button-next oa-timeline-swiper-days-next\" />\n      </div>\n    </div>\n  );\n}\n\nexport default React.forwardRef(TimelineField);\n","import useActiveFilters from '../hooks/useActiveFilters.js';\nimport Filters from './Filters.js';\nimport DateRangeFilter from './filters/DateRangeFilter.js';\nimport SimpleDateRangeFilter from './filters/SimpleDateRangeFilter.js';\nimport NumberRangeFilter from './filters/NumberRangeFilter.js';\nimport ChoiceFilter from './filters/ChoiceFilter.js';\nimport DefinedRangeFilter from './filters/DefinedRangeFilter.js';\nimport SearchFilter from './filters/SearchFilter.js';\nimport MapFilter from './filters/MapFilter.js';\nimport CustomFilter from './filters/CustomFilter.js';\nimport FavoritesFilter from './filters/FavoritesFilter.js';\nimport TimelineFilter from './filters/TimelineFilter.js';\n\nexport default function ActiveFilters({ filters, ...rest }) {\n  const activeFilters = useActiveFilters(filters);\n\n  return (\n    <Filters\n      filters={activeFilters}\n      choiceComponent={ChoiceFilter.Preview}\n      dateRangeComponent={DateRangeFilter.Preview}\n      simpleDateRangeComponent={SimpleDateRangeFilter.Preview}\n      numberRangeComponent={NumberRangeFilter.Preview}\n      definedRangeComponent={DefinedRangeFilter.Preview}\n      searchComponent={SearchFilter.Preview}\n      mapComponent={MapFilter.Preview}\n      customComponent={CustomFilter.Preview}\n      favoritesComponent={FavoritesFilter.Preview}\n      timelineComponent={TimelineFilter.Preview}\n      {...rest}\n    />\n  );\n}\n","import isEqual from 'lodash/isEqual.js';\nimport { useEffect, useRef, useCallback, useMemo } from 'react';\nimport useLatestModule from 'react-use/lib/useLatest.js';\nimport { useForm } from 'react-final-form';\nimport a11yButtonActionHandler from '@openagenda/react-shared/dist/utils/a11yButtonActionHandler.js';\nimport updateCustomFilter from '../utils/updateCustomFilter.js';\nimport updateFormValues from '../utils/updateFormValues.js';\nimport { useFavoriteState } from '../hooks/index.js';\n\nconst useLatest = useLatestModule.default || useLatestModule;\n\nexport default function FavoriteToggle({ agendaUid, eventUid, widget }) {\n  const form = useForm();\n  const [value, setValue] = useFavoriteState(widget.agendaUid || agendaUid);\n  const firstRender = useRef(true);\n\n  const latestValue = useLatest(value);\n\n  const eventUidStr = String(eventUid);\n\n  const updateForm = useCallback(\n    (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      const active = latestValue.current?.includes(eventUidStr);\n      const newValue = active\n        ? latestValue.current.filter((v) => v !== eventUidStr)\n        : [...latestValue.current || [], eventUidStr].filter(\n          (v) => v !== '-1',\n        );\n\n      setValue(newValue.length ? newValue : undefined);\n    },\n    [eventUidStr, latestValue, setValue],\n  );\n\n  const onChange = useMemo(\n    () => a11yButtonActionHandler(updateForm),\n    [updateForm],\n  );\n\n  // Add & remove click listener\n  useEffect(() => {\n    if (firstRender.current) {\n      firstRender.current = false;\n\n      if (latestValue.current?.includes(eventUidStr)) {\n        updateCustomFilter(widget, true);\n      }\n    }\n\n    const handlerElem = widget.handlerElem || widget.elem;\n    const innerCheckboxes = handlerElem.querySelectorAll(\n      'input[type=\"checkbox\"]',\n    );\n\n    const handlerIsLabelWithCheckbox = innerCheckboxes.length === 1\n      && handlerElem.tagName === 'LABEL'\n      && handlerElem.contains(innerCheckboxes[0]);\n\n    if (\n      innerCheckboxes.length === 1\n      && (!widget.handlerElem || handlerIsLabelWithCheckbox)\n    ) {\n      innerCheckboxes[0].addEventListener('change', updateForm, false);\n    } else {\n      handlerElem.addEventListener('click', onChange, false);\n    }\n\n    handlerElem.addEventListener('keydown', onChange, false);\n\n    return () => {\n      if (\n        innerCheckboxes.length === 1\n        && (!widget.handlerElem || handlerIsLabelWithCheckbox)\n      ) {\n        innerCheckboxes[0].removeEventListener('change', updateForm, false);\n      } else {\n        handlerElem.removeEventListener('click', onChange, false);\n      }\n\n      handlerElem.removeEventListener('keydown', onChange, false);\n    };\n  }, [eventUidStr, widget, latestValue, onChange]);\n\n  // Watch value change\n  useEffect(() => {\n    const active = value?.includes(eventUidStr);\n\n    updateCustomFilter(widget, active);\n\n    const formValues = form.getState().values;\n\n    // if favorties filter checked\n    if (formValues.favorites && !isEqual(formValues.uid, value)) {\n      updateFormValues(form, {\n        uid: value || ['-1'],\n      });\n    }\n  }, [form, eventUidStr, value, widget]);\n\n  return null;\n}\n","import { useIntl } from 'react-intl';\n\nexport default function Total({\n  message,\n  total,\n  totalLabel,\n  totalLabelPlural,\n}) {\n  const intl = useIntl();\n\n  return intl.formatMessage(message, { total, totalLabel, totalLabelPlural });\n}\n"],"mappings":"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","names":["import_react","import_react_intl","import_react","import_react_intl","import_jsx_runtime","L","cn","import_react","import_classnames","import_react_intl","import_react_final_form","import_jsx_runtime","React","import_isEqual","import_qs","import_react","import_react_intl","import_react_final_form","import_react_uid","import_react_portal_ssr","import_useConstant","qs","defaults","React","import_react_intl","import_react_intl","import_react_intl","import_react_intl","import_react_intl","import_react_intl","import_react_intl","import_react_intl","defaults","import_intl","import_react_intl","messages","import_react_final_form","import_react","import_react","import_react_final_form","import_react_intl","import_date_fns","import_react","import_react_intl","import_date_fns","import_intl","import_react","import_qs","qs","useIsomorphicLayoutEffectModule","useLatestModule","usePreviousModule","isDate","isEqual","dateFnsLocaleEN","cn","React","import_react","import_react","import_react_intl","messages","import_jsx_runtime","React","import_react","import_classnames","import_jsx_runtime","a11yButtonActionHandler","cn","import_classnames","import_react_intl","import_react","import_intl","import_jsx_runtime","messages","classNames","import_jsx_runtime","import_jsx_runtime","messages","subscription","React","DateRangeFilter","Collapsable","isMatch","omitBy","isEmpty","import_react","import_useIsomorphicLayoutEffect","import_usePrevious","import_react_intl","useIsomorphicLayoutEffect","useIsomorphicLayoutEffectModule","usePrevious","usePreviousModule","useConstant","Fuse","import_react","import_react_final_form","import_react","import_react","import_react_intl","import_intl","messages","get","import_react","import_react","import_qs","qs","import_react_final_form","import_react","import_jsx_runtime","React","import_react","import_react_final_form","import_date_fns","import_date_fns_tz","import_react","import_react_intl","import_jsx_runtime","messages","React","import_jsx_runtime","subscription","formatDateValue","formatValue","parseValue","React","SimpleDateRangeFilter","Collapsable","exported","import_react","import_react_final_form","import_react","import_react_intl","import_jsx_runtime","messages","React","import_jsx_runtime","subscription","parseValue","Preview","React","NumberRangeFilter","Collapsable","exported","import_react","import_react_final_form","import_react_uid","import_react_intl","import_usePrevious","import_react","import_react_uid","import_react_intl","import_classnames","import_intl","import_a11yButtonActionHandler","import_jsx_runtime","a11yButtonActionHandler","React","ChoiceField","cn","import_react_intl","import_jsx_runtime","usePrevious","usePreviousModule","subscription","parseValue","formatValue","Preview","React","ChoiceFilter","Collapsable","exported","import_react","import_react_final_form","import_react_intl","import_date_fns","import_isEqual","import_isDate","import_react","import_react_date_range","import_useIsomorphicLayoutEffect","import_useLatest","import_usePrevious","import_jsx_runtime","useIsomorphicLayoutEffect","useIsomorphicLayoutEffectModule","useLatest","useLatestModule","usePrevious","usePreviousModule","defaultGetInitialValue","normalizeValue","isDate","isEqual","React","import_jsx_runtime","messages","subscription","formatValue","parseValue","Preview","React","DefinedRangeFilter","Collapsable","exported","import_react","import_react_final_form","import_react_uid","import_react_intl","import_react","import_react_final_form","import_use_debounce","import_react_intl","import_jsx_runtime","messages","React","import_jsx_runtime","subscription","messages","Preview","React","SearchFilter","exported","import_react","import_react_final_form","import_react_intl","import_react","import_classnames","loadable","import_jsx_runtime","cn","React","import_jsx_runtime","subscription","messages","Preview","React","Collapsable","exported","import_react","import_react_final_form","import_a11yButtonActionHandler","import_jsx_runtime","subscription","Preview","React","a11yButtonActionHandler","exported","import_react","import_react_final_form","import_useLatest","import_a11yButtonActionHandler","import_jsx_runtime","useLatest","useLatestModule","subscription","Preview","React","FavoritesFilter","a11yButtonActionHandler","exported","import_react","import_react_intl","import_react_final_form","import_date_fns","import_date_fns_tz","import_react","import_react_intl","import_date_fns","import_classnames","import_en_US","import_jsx_runtime","messages","focusedDateToTimingsQuery","isSelected","dateFnsLocaleEN","cn","React","import_jsx_runtime","messages","subscription","formatDateValue","formatValue","parseValue","Preview","React","TimelineFilter","exported","import_jsx_runtime","import_isEqual","import_react","import_useLatest","import_react_final_form","import_a11yButtonActionHandler","useLatest","useLatestModule","a11yButtonActionHandler","isEqual","import_react_intl","import_jsx_runtime","React","FiltersManager","omit","unstableBatchedUpdates","isEqual","qs","Wrapper","useConstant"]}