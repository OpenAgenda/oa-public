{"version":3,"sources":["../src/components/filters/SearchFilter.js"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { Field, useField } from 'react-final-form';\nimport { useUIDSeed } from 'react-uid';\nimport { defineMessages, useIntl } from 'react-intl';\nimport FilterPreviewer from '../FilterPreviewer.js';\nimport SearchInput from '../fields/SearchInput.js';\n\nconst subscription = { value: true };\n\nconst messages = defineMessages({\n  placeholder: {\n    id: 'ReactFilters.filters.searchFilter.placeholder',\n    defaultMessage: 'Search',\n  },\n  previewLabel: {\n    id: 'ReactFilters.filters.searchFilter.previewLabel',\n    defaultMessage: 'Search',\n  },\n});\n\nfunction Preview({\n  name,\n  filter,\n  component = FilterPreviewer,\n  disabled,\n  ...rest\n}) {\n  const { input } = useField(name, { subscription });\n\n  const onRemove = useCallback(\n    (e) => {\n      e.stopPropagation();\n\n      if (disabled) {\n        return;\n      }\n\n      input.onChange(undefined);\n    },\n    [input, disabled],\n  );\n\n  if (!input.value || input.value === '') {\n    return null;\n  }\n\n  return React.createElement(component, {\n    name,\n    filter,\n    label: input.value,\n    onRemove,\n    disabled,\n    ...rest,\n  });\n}\n\nconst SearchFilter = React.forwardRef(function SearchFilter(\n  { name, filter, component = SearchInput, placeholder = null, ...rest },\n  _ref,\n) {\n  const seed = useUIDSeed();\n  const intl = useIntl();\n\n  return (\n    <Field\n      key={seed(filter)}\n      name={name}\n      subscription={subscription}\n      component={component}\n      type=\"text\"\n      filter={filter}\n      placeholder={placeholder || intl.formatMessage(messages.placeholder)}\n      {...rest}\n    />\n  );\n});\n\nconst exported = React.memo(SearchFilter);\n\n// React.memo lose statics\nexported.Preview = Preview;\n\nexport default exported;\n"],"mappings":";;;;;;;;AAAA,OAAO,SAAS,mBAAmB;AACnC,SAAS,OAAO,gBAAgB;AAChC,SAAS,kBAAkB;AAC3B,SAAS,gBAAgB,eAAe;AA6DpC;AAzDJ,IAAM,eAAe,EAAE,OAAO,KAAK;AAEnC,IAAM,WAAW,eAAe;AAAA,EAC9B,aAAa;AAAA,IACX,IAAI;AAAA,IACJ,gBAAgB;AAAA,EAClB;AAAA,EACA,cAAc;AAAA,IACZ,IAAI;AAAA,IACJ,gBAAgB;AAAA,EAClB;AACF,CAAC;AAED,SAAS,QAAQ;AAAA,EACf;AAAA,EACA;AAAA,EACA,YAAY;AAAA,EACZ;AAAA,EACA,GAAG;AACL,GAAG;AACD,QAAM,EAAE,MAAM,IAAI,SAAS,MAAM,EAAE,aAAa,CAAC;AAEjD,QAAM,WAAW;AAAA,IACf,CAAC,MAAM;AACL,QAAE,gBAAgB;AAElB,UAAI,UAAU;AACZ;AAAA,MACF;AAEA,YAAM,SAAS,MAAS;AAAA,IAC1B;AAAA,IACA,CAAC,OAAO,QAAQ;AAAA,EAClB;AAEA,MAAI,CAAC,MAAM,SAAS,MAAM,UAAU,IAAI;AACtC,WAAO;AAAA,EACT;AAEA,SAAO,MAAM,cAAc,WAAW;AAAA,IACpC;AAAA,IACA;AAAA,IACA,OAAO,MAAM;AAAA,IACb;AAAA,IACA;AAAA,IACA,GAAG;AAAA,EACL,CAAC;AACH;AAEA,IAAM,eAAe,MAAM,WAAW,SAASA,cAC7C,EAAE,MAAM,QAAQ,YAAY,aAAa,cAAc,MAAM,GAAG,KAAK,GACrE,MACA;AACA,QAAM,OAAO,WAAW;AACxB,QAAM,OAAO,QAAQ;AAErB,SACE;AAAA,IAAC;AAAA;AAAA,MAEC;AAAA,MACA;AAAA,MACA;AAAA,MACA,MAAK;AAAA,MACL;AAAA,MACA,aAAa,eAAe,KAAK,cAAc,SAAS,WAAW;AAAA,MAClE,GAAG;AAAA;AAAA,IAPC,KAAK,MAAM;AAAA,EAQlB;AAEJ,CAAC;AAED,IAAM,WAAW,MAAM,KAAK,YAAY;AAGxC,SAAS,UAAU;AAEnB,IAAO,uBAAQ;","names":["SearchFilter"]}