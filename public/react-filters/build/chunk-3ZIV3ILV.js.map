{"version":3,"sources":["../src/hooks/useActiveFilters.js"],"sourcesContent":["import { useFormState } from 'react-final-form';\nimport { useMemo } from 'react';\nimport staticRangesFirst from '../utils/staticRangesFirst.js';\nimport customFirst from '../utils/customFirst.js';\nimport matchFilter from '../utils/matchFilter.js';\n\nexport default function useActiveFilters(filters) {\n  const { values } = useFormState({ subscription: { values: true } });\n\n  const sortedFilters = useMemo(\n    () =>\n      filters\n        .map(({ destSelector, ...filter }) => filter)\n        .sort(staticRangesFirst)\n        .sort(customFirst),\n    [filters],\n  );\n\n  return useMemo(\n    () =>\n      Object.entries(values).reduce((accu, entry) => {\n        const matchingFilter = sortedFilters.find((filter) =>\n          matchFilter(filter, values, entry));\n\n        if (matchingFilter && !accu.includes(matchingFilter)) {\n          accu.push(matchingFilter);\n        }\n\n        return accu;\n      }, []),\n    [sortedFilters, values],\n  );\n}\n"],"mappings":";;;;;;;;;;;AAAA,SAAS,oBAAoB;AAC7B,SAAS,eAAe;AAKT,SAAR,iBAAkC,SAAS;AAChD,QAAM,EAAE,OAAO,IAAI,aAAa,EAAE,cAAc,EAAE,QAAQ,KAAK,EAAE,CAAC;AAElE,QAAM,gBAAgB;AAAA,IACpB,MACE,QACG,IAAI,CAAC,EAAE,cAAc,GAAG,OAAO,MAAM,MAAM,EAC3C,KAAK,iBAAiB,EACtB,KAAK,WAAW;AAAA,IACrB,CAAC,OAAO;AAAA,EACV;AAEA,SAAO;AAAA,IACL,MACE,OAAO,QAAQ,MAAM,EAAE,OAAO,CAAC,MAAM,UAAU;AAC7C,YAAM,iBAAiB,cAAc,KAAK,CAAC,WACzC,YAAY,QAAQ,QAAQ,KAAK,CAAC;AAEpC,UAAI,kBAAkB,CAAC,KAAK,SAAS,cAAc,GAAG;AACpD,aAAK,KAAK,cAAc;AAAA,MAC1B;AAEA,aAAO;AAAA,IACT,GAAG,CAAC,CAAC;AAAA,IACP,CAAC,eAAe,MAAM;AAAA,EACxB;AACF;","names":[]}