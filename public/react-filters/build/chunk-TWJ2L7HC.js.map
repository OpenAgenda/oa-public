{"version":3,"sources":["../src/utils/filtersToAggregations.js"],"sourcesContent":["import minimizeAggregation from './minimizeAggregation.js';\n\nexport default function filtersToAggregations(filters, base = false) {\n  const usedFilters = base\n    ? filters.filter(\n      (filter) =>\n        filter.type === 'choice' && (!filter.options || filter.missingValue),\n    )\n    : filters;\n\n  const aggregations = usedFilters\n    .map((filter) => {\n      if (filter.aggregation === null) {\n        return false;\n      }\n\n      return {\n        key: filter.name,\n        type: filter.name,\n        missing: filter.missingValue,\n        ...filter.aggregation,\n      };\n    })\n    .filter((filter) => filter?.key);\n\n  const needViewport = usedFilters.some((filter) => filter.type === 'map');\n\n  if (needViewport) {\n    aggregations.unshift({\n      key: 'viewport',\n      type: 'viewport',\n    });\n  }\n\n  return aggregations.map(minimizeAggregation);\n}\n"],"mappings":";;;;;AAEe,SAAR,sBAAuC,SAAS,OAAO,OAAO;AACnE,QAAM,cAAc,OAChB,QAAQ;AAAA,IACR,CAAC,WACC,OAAO,SAAS,aAAa,CAAC,OAAO,WAAW,OAAO;AAAA,EAC3D,IACE;AAEJ,QAAM,eAAe,YAClB,IAAI,CAAC,WAAW;AACf,QAAI,OAAO,gBAAgB,MAAM;AAC/B,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,MACL,KAAK,OAAO;AAAA,MACZ,MAAM,OAAO;AAAA,MACb,SAAS,OAAO;AAAA,MAChB,GAAG,OAAO;AAAA,IACZ;AAAA,EACF,CAAC,EACA,OAAO,CAAC,WAAW,iCAAQ,GAAG;AAEjC,QAAM,eAAe,YAAY,KAAK,CAAC,WAAW,OAAO,SAAS,KAAK;AAEvE,MAAI,cAAc;AAChB,iBAAa,QAAQ;AAAA,MACnB,KAAK;AAAA,MACL,MAAM;AAAA,IACR,CAAC;AAAA,EACH;AAEA,SAAO,aAAa,IAAI,mBAAmB;AAC7C;","names":[]}